<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Decision Hub ‚Äî v2.3.2</title>
  <style>
    :root { --edge:#00cc77; --ink:#8cffb2; --bg:#00140a; --tile:#002516; --active:#00ff9a; --active-ink:#00220f; }
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--ink);font-family:ui-monospace,Menlo,Consolas,monospace;text-shadow:0 0 6px rgba(0,255,153,.28)}
    header{position:sticky;top:0;z-index:100;background:linear-gradient(180deg,#002616,#001f12);border-bottom:1px solid var(--edge)}
    .wrap{max-width:1120px;margin:0 auto;padding:12px 14px}
    .ribbon{display:inline-block;padding:6px 12px;border-radius:999px;border:1px solid var(--edge);background:#06231a;color:var(--ink)}
    .dual-tabs{display:flex;gap:10px;padding:10px 14px;border-bottom:1px solid var(--edge);background:#06231a}
    .dual-tab{padding:12px 18px;border:2px solid var(--edge);border-radius:999px;background:#001a10;color:var(--ink);cursor:pointer;font-size:16px;min-height:48px;transition:all .12s;flex:0 0 auto}
    .dual-tab.active{background:var(--active); color:var(--active-ink); box-shadow:0 0 24px rgba(0,255,153,.35) inset, 0 0 12px rgba(0,255,153,.25);}
    #siteMeta{align-self:center;margin-left:8px;color:#6fcf97;font-size:14px}
    .dock{display:flex;gap:10px;align-items:center;padding:10px 14px;border-bottom:1px solid var(--edge);background:#041d14;overflow-x:auto;scrollbar-width:thin}
    .chip{flex:0 0 auto;display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border:1.5px solid var(--edge);border-radius:999px;background:#001a10;color:var(--ink);cursor:pointer;font-size:16px;min-height:46px}
    .chip .ico{font-size:18px;line-height:1}
    .chip.active{background:var(--active);color:var(--active-ink);border-color:var(--active)}
    .chip[aria-disabled="true"]{opacity:.45;cursor:not-allowed;filter:saturate(.5)}
    .grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:12px;padding:14px}
    .tile{background:var(--tile);border:1px solid var(--edge);border-radius:14px;padding:14px;min-height:120px;display:flex;flex-direction:column;justify-content:space-between;cursor:pointer;transition:border-color .12s, box-shadow .12s}
    .tile.selected{box-shadow:0 0 0 2px var(--active), inset 0 0 24px rgba(0,255,153,.12)}
    .tile h3{margin:0 0 8px 0;font-size:18px}
    .tile .desc{opacity:.85;font-size:13px}
    .btn{padding:12px 16px;border-radius:12px;border:1px solid var(--edge);background:#001a10;color:#8cffb2;cursor:pointer;font-size:16px;min-height:48px}
    .status{margin:8px 14px;padding:8px 12px;border:1px solid var(--edge);border-radius:10px;background:#06231a;color:var(--ink)}
    .frame-wrap{position:relative;height:calc(100vh - 330px);margin:12px 14px;border:1px solid var(--edge);border-radius:12px;overflow:hidden;background:#0b1326}
    iframe.embed{width:100%;height:100%;border:0;background:#0b1326}
    .loading{position:absolute;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.25)}
    .loading span{padding:8px 12px;border:1px solid var(--edge);border-radius:10px;background:#001a10;color:#8cffb2}
    @media (max-width: 768px){ .grid{display:none} .dual-tabs{gap:8px} .dual-tab{font-size:15px;min-height:46px;padding:10px 14px} .chip{font-size:15px;min-height:44px;padding:10px 12px} .frame-wrap{height:calc(100vh - 260px)} }
  </style>
</head>
<body data-theme="farmresearch-v1.0" data-skin="pipboy">
  <header><div class="wrap"><span class="ribbon">Pip-Boy ‚Ä¢ Decision Hub v2.3.2</span></div></header>

  <div class="dual-tabs" role="tablist" aria-label="Site">
    <button id="tabWA" class="dual-tab" role="tab" aria-selected="true">WA ‚Äî EH1003006</button>
    <button id="tabOR" class="dual-tab" role="tab" aria-selected="false">OR ‚Äî CANBY1736</button>
    <span id="siteMeta">EH1003006 ‚Ä¢ 46.0201, -122.5488</span>
  </div>

  <nav class="dock" aria-label="Tools">
    <button class="chip" id="chip-planner" data-open="planner" aria-pressed="true"><span class="ico">üó∫Ô∏è</span><span>Planner</span></button>
    <button class="chip" id="chip-intake"  data-open="intake"  aria-pressed="false"><span class="ico">üìù</span><span>Field Intake</span></button>
    <button class="chip" id="chip-pdr"     data-open="pdr"     aria-pressed="false"><span class="ico">üìö</span><span>PDR</span></button>
    <button class="chip" id="chip-tool4"   aria-disabled="true"><span class="ico">üß≠</span><span>Tool 4</span></button>
    <button class="chip" id="chip-tool5"   aria-disabled="true"><span class="ico">üìà</span><span>Tool 5</span></button>
  </nav>

  <section class="wrap">
    <h2 style="margin:12px 14px 6px" id="qsTitle">Quick Start ‚Äî EH1003006</h2>
    <div class="grid" id="toolGrid">
      <div class="tile" id="tile-planner" data-tool="planner" tabindex="0" role="button"><h3 id="plannerLabel">Planner (WA)</h3><div class="desc">Site planning, map layers, exports.</div><button class="btn" data-open="planner">Open inline</button></div>
      <div class="tile" id="tile-intake"  data-tool="intake"  tabindex="0" role="button"><h3 id="intakeLabel">Field Intake (WA)</h3><div class="desc">Rapid notes + photos.</div><button class="btn" data-open="intake">Open inline</button></div>
      <div class="tile" id="tile-pdr"     data-tool="pdr"     tabindex="0" role="button"><h3 id="pdrLabel">PDR Navigator (WA)</h3><div class="desc">Policy/permit navigator.</div><button class="btn" data-open="pdr">Open inline</button></div>
    </div>
  </section>

  <div class="status" id="status">Active: <b>EH1003006</b> ‚Ä¢ <b>Planner</b></div>

  <div class="frame-wrap">
    <div class="loading" id="loading"><span>Loading‚Ä¶</span></div>
    <iframe class="embed" id="frame" src="about:blank" title="Embedded tool"></iframe>
  </div>

  <script>
    const KEY = "fr_planner_site";
    const SITES = { EH1003006: { name: "EH1003006", meta: "EH1003006 ‚Ä¢ 46.0201, -122.5488", tag: "(WA)" },
                    Canby:     { name: "CANBY1736", meta: "CANBY1736 ‚Ä¢ 1736 N Locust St, Canby, OR", tag: "(OR)" } };
    const SRC = {
      planner: { EH1003006: "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgPG1ldGEgY2hhcnNldD0idXRmLTgiIC8+CiAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiIC8+CiAgPHRpdGxlPkVIMTAwMzAwNiBPbmxpbmUgUGxhbm5lciDigJQgdjUuMi44PC90aXRsZT4KCiAgPCEtLSBDb3JlIG1hcCBsaWJzIC0tPgogIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly91bnBrZy5jb20vbGVhZmxldEAxLjkuNC9kaXN0L2xlYWZsZXQuY3NzIiAvPgogIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly91bnBrZy5jb20vQGdlb21hbi1pby9sZWFmbGV0LWdlb21hbi1mcmVlQDIuMTQuMi9kaXN0L2xlYWZsZXQtZ2VvbWFuLmNzcyIgLz4KICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly91bnBrZy5jb20vbGVhZmxldEAxLjkuNC9kaXN0L2xlYWZsZXQuanMiPjwvc2NyaXB0PgogIDxzY3JpcHQgc3JjPSJodHRwczovL3VucGtnLmNvbS9AZ2VvbWFuLWlvL2xlYWZsZXQtZ2VvbWFuLWZyZWVAMi4xNC4yL2Rpc3QvbGVhZmxldC1nZW9tYW4ubWluLmpzIj48L3NjcmlwdD4KICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly91bnBrZy5jb20vZXNyaS1sZWFmbGV0QDMuMC4xMi9kaXN0L2VzcmktbGVhZmxldC5qcyI+PC9zY3JpcHQ+CiAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vdW5wa2cuY29tL0B0dXJmL3R1cmZANi41LjAvdHVyZi5taW4uanMiPjwvc2NyaXB0PgogIDxzY3JpcHQgc3JjPSJodHRwczovL3VucGtnLmNvbS9jaGFydC5qc0A0LjQuMy9kaXN0L2NoYXJ0LnVtZC5qcyI+PC9zY3JpcHQ+CgogIDwhLS0gTG9jYWwgR2VvVElGRiByYXN0ZXIgcmVuZGVyaW5nICsgYW5hbHlzaXMgLS0+CiAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vdW5wa2cuY29tL2dlb3RpZmYvZGlzdC1icm93c2VyL2dlb3RpZmYuanMiPjwvc2NyaXB0PgogIDxzY3JpcHQgc3JjPSJodHRwczovL3VucGtnLmNvbS9nZW9yYXN0ZXIvZGlzdC9nZW9yYXN0ZXIuYnJvd3Nlci5taW4uanMiPjwvc2NyaXB0PgogIDxzY3JpcHQgc3JjPSJodHRwczovL3VucGtnLmNvbS9nZW9yYXN0ZXItbGF5ZXItZm9yLWxlYWZsZXQvZGlzdC9nZW9yYXN0ZXItbGF5ZXItZm9yLWxlYWZsZXQubWluLmpzIj48L3NjcmlwdD4KICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly91bnBrZy5jb20vcHJvajRAMi4xMS4wL2Rpc3QvcHJvajQuanMiPjwvc2NyaXB0PgogIDxzY3JpcHQgc3JjPSJodHRwczovL3VucGtnLmNvbS9nZW9ibGF6ZUAxLjMuNC9kaXN0L2dlb2JsYXplLnVtZC5qcyI+PC9zY3JpcHQ+CgogIDxzdHlsZT4KICAgIDpyb290IHsKICAgICAgLS1iZzogIzBiMTAyMDsgLS1wYW5lbDogIzBmMTcyYTsgLS1jYXJkOiAjMGMxOTMwOyAtLWluazogI2UyZThmMDsgLS1tdXRlZDogIzk0YTNiODsKICAgICAgLS1hY2NlbnQ6ICM2MGE1ZmE7IC0tYWNjZW50LTI6ICMyMmM1NWU7IC0td2FybjogI2Y5NzMxNjsgLS1kYW5nZXI6ICNlZjQ0NDQ7CiAgICB9CiAgICBodG1sLCBib2R5IHsgaGVpZ2h0OjEwMCU7IG1hcmdpbjowOyBiYWNrZ3JvdW5kOnZhcigtLWJnKTsgY29sb3I6dmFyKC0taW5rKTsgZm9udC1mYW1pbHk6IHN5c3RlbS11aSwgdWktc2Fucy1zZXJpZiwgU2Vnb2UgVUksIFJvYm90bywgSGVsdmV0aWNhLCBBcmlhbDsgfQogICAgI2FwcCB7IGRpc3BsYXk6Z3JpZDsgZ3JpZC10ZW1wbGF0ZS1yb3dzOiBhdXRvIGF1dG8gMWZyIGF1dG87IGdhcDoxMHB4OyBoZWlnaHQ6MTAwJTsgfQogICAgI3Rvb2xiYXIgeyBkaXNwbGF5OmZsZXg7IGdhcDo4cHg7IGZsZXgtd3JhcDp3cmFwOyBhbGlnbi1pdGVtczpjZW50ZXI7IHBhZGRpbmc6MTBweCAxMnB4OyBiYWNrZ3JvdW5kOnZhcigtLXBhbmVsKTsgYm9yZGVyLWJvdHRvbToxcHggc29saWQgIzFmMjkzNzsgfQogICAgI21hcCB7IGhlaWdodDogNTZ2aDsgfQogICAgI3BhbmVsIHsgZGlzcGxheTpncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgxMiwgMWZyKTsgZ2FwOjEwcHg7IHBhZGRpbmc6MTBweCAxMnB4OyBiYWNrZ3JvdW5kOnZhcigtLXBhbmVsKTsgfQogICAgI2Zvb3RlciB7IHBhZGRpbmc6OHB4IDEycHg7IGZvbnQtc2l6ZToxMnB4OyBjb2xvcjp2YXIoLS1tdXRlZCk7IGJhY2tncm91bmQ6IzBhMGYxZjsgYm9yZGVyLXRvcDoxcHggc29saWQgIzFmMjkzNzsgfQogICAgLmJhZGdlIHsgZm9udC1zaXplOjEycHg7IGJhY2tncm91bmQ6cmdiYSg5NiwxNjUsMjUwLDAuMTUpOyBjb2xvcjojOTNjNWZkOyBwYWRkaW5nOjJweCA4cHg7IGJvcmRlci1yYWRpdXM6OTk5cHg7IGJvcmRlcjoxcHggc29saWQgcmdiYSg5NiwxNjUsMjUwLDAuMzUpOyB9CiAgICAuYnRuIHsgcGFkZGluZzo4cHggMTJweDsgYm9yZGVyLXJhZGl1czoxMHB4OyBiYWNrZ3JvdW5kOiMxZjZmZWI7IGNvbG9yOndoaXRlOyBjdXJzb3I6cG9pbnRlcjsgYm9yZGVyOm5vbmU7IGZvbnQtd2VpZ2h0OjYwMDsgfQogICAgLmJ0bi5zZWNvbmRhcnkgeyBiYWNrZ3JvdW5kOiMzMzQxNTU7IH0KICAgIC5idG4uZ2hvc3QgeyBiYWNrZ3JvdW5kOnRyYW5zcGFyZW50OyBib3JkZXI6MXB4IHNvbGlkICMzMzQxNTU7IGNvbG9yOiNlNWU3ZWI7IH0KICAgIC5idG4ud2FybiB7IGJhY2tncm91bmQ6I2I5MWMxYzsgfQogICAgLmJ0bi5nb29kIHsgYmFja2dyb3VuZDojMTZhMzRhOyB9CiAgICAucGlsbCB7IGJhY2tncm91bmQ6IzBiMTMyNjsgcGFkZGluZzo0cHggOHB4OyBib3JkZXI6MXB4IHNvbGlkICMxZTI5M2I7IGJvcmRlci1yYWRpdXM6OTk5cHg7IG1pbi13aWR0aDo2NHB4OyB0ZXh0LWFsaWduOmNlbnRlcjsgY29sb3I6I2UyZThmMDsgfQogICAgLmtiZCB7IGZvbnQtZmFtaWx5OiB1aS1tb25vc3BhY2UsIE1lbmxvLCBDb25zb2xhcywgbW9ub3NwYWNlOyBmb250LXNpemU6MTJweDsgYmFja2dyb3VuZDojMGIxMzI2OyBib3JkZXI6MXB4IHNvbGlkICMxZTI5M2I7IHBhZGRpbmc6MCA2cHg7IGJvcmRlci1yYWRpdXM6NnB4OyBjb2xvcjojY2JkNWUxOyB9CiAgICAuY2FyZCB7IGJhY2tncm91bmQ6dmFyKC0tY2FyZCk7IGJvcmRlcjoxcHggc29saWQgIzBiMTIyNTsgYm9yZGVyLXJhZGl1czoxMnB4OyBwYWRkaW5nOjEwcHg7IH0KICAgIC5jYXJkIGgzIHsgbWFyZ2luOjAgMCA4cHggMDsgZm9udC1zaXplOjE0cHg7IGNvbG9yOiNjYmQ1ZTE7IH0KICAgIC5yb3cgeyBkaXNwbGF5OmZsZXg7IGdhcDoxMHB4OyBmbGV4LXdyYXA6d3JhcDsgYWxpZ24taXRlbXM6Y2VudGVyOyB9CiAgICAuY29sIHsgZGlzcGxheTpmbGV4OyBmbGV4LWRpcmVjdGlvbjpjb2x1bW47IGdhcDo4cHg7IH0KICAgIC5pbnB1dCB7IGJhY2tncm91bmQ6IzBiMTMyNjsgY29sb3I6I2UyZThmMDsgYm9yZGVyOjFweCBzb2xpZCAjMWUyOTNiOyBwYWRkaW5nOjZweCA4cHg7IGJvcmRlci1yYWRpdXM6OHB4OyB9CiAgICAuc21hbGwgeyBmb250LXNpemU6MTJweDsgY29sb3I6dmFyKC0tbXV0ZWQpOyB9CiAgICAuc3dpdGNoIHsgZGlzcGxheTppbmxpbmUtZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6NnB4OyB9CiAgICAudmVyc2lvbi1iYWRnZSB7IHBvc2l0aW9uOmFic29sdXRlOyB0b3A6MTBweDsgbGVmdDoxMHB4OyB6LWluZGV4OjEwMDA7IGJhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjYpOyBjb2xvcjojZmZmOyBwYWRkaW5nOjZweCAxMHB4OyBib3JkZXItcmFkaXVzOjhweDsgZm9udC1zaXplOjEycHg7IH0KICAgICNwcm9maWxlIHsgaGVpZ2h0OiAyOHZoOyB9CiAgICAubGVnZW5kQm94IHsgZm9udC1zaXplOjEycHg7IGJhY2tncm91bmQ6IzBiMTMyNjsgYm9yZGVyOjFweCBzb2xpZCAjMWUyOTNiOyBib3JkZXItcmFkaXVzOjhweDsgcGFkZGluZzo4cHggMTBweDsgfQogICAgLmRpdmlkZXIgeyBoZWlnaHQ6MXB4OyBiYWNrZ3JvdW5kOiMxZTI5M2I7IG1hcmdpbjo4cHggMDsgfQogICAgLmxheWVyLXJvdyB7IGRpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6OHB4OyBtYXJnaW4tYm90dG9tOjRweDsgfQogICAgLmxheWVyLXJvdyBpbnB1dFt0eXBlPXJhbmdlXSB7IHdpZHRoOjEyMHB4OyB9CiAgICAuYmFkZ2UuZ29vZCB7IGJhY2tncm91bmQ6cmdiYSgzNCwxOTcsOTQsMC4xMik7IGNvbG9yOiM4NmVmYWM7IGJvcmRlci1jb2xvcjpyZ2JhKDM0LDE5Nyw5NCwwLjM1KTsgfQogIDwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+CjxkaXYgaWQ9ImFwcCI+CiAgPCEtLSBUb3AgaW5mbyBsaW5lIC0tPgogIDxkaXYgaWQ9InRvb2xiYXIiPgogICAgPHNwYW4gY2xhc3M9ImJhZGdlIj5FSDEwMDMwMDYg4oCiIDQ2LjAyMDEsIC0xMjIuNTQ4OCAoQ293bGl0eiwgV0EpPC9zcGFuPgogICAgPHNwYW4gY2xhc3M9ImJhZGdlIj5TdGFybGluayDigKIgV2nigJFGaSArIGNhbXMg4oCiIFNvbGFyIHByZXNlbnQ8L3NwYW4+CiAgICA8c3BhbiBjbGFzcz0iYmFkZ2UiPkludmFzaXZlczogSGltYWxheWFuIGJsYWNrYmVycnk8L3NwYW4+CiAgICA8c3BhbiBjbGFzcz0iYmFkZ2UiPk9ubGluZSBQbGFubmVyIHY1LjIuODwvc3Bhbj4KICAgIDxzcGFuIGlkPSJsaWRhckJhZGdlIiBjbGFzcz0iYmFkZ2UiPkxpREFSOiBsb2FkaW5n4oCmPC9zcGFuPgogIDwvZGl2PgoKICA8IS0tIE1hcCAtLT4KICA8ZGl2IGlkPSJtYXAiPjwvZGl2PgogIDxkaXYgY2xhc3M9InZlcnNpb24tYmFkZ2UiPjxzdHJvbmc+RUgxMDAzMDA2IE9ubGluZSBQbGFubmVyPC9zdHJvbmc+IOKAlCB2NS4yLjg8L2Rpdj4KCiAgPCEtLSBDb250cm9sIHBhbmVsIC0tPgogIDxkaXYgaWQ9InBhbmVsIj4KICAgIDwhLS0gSHlkcm8gKyBwb3dlciAtLT4KICAgIDxkaXYgY2xhc3M9ImNhcmQiIHN0eWxlPSJncmlkLWNvbHVtbjpzcGFuIDQ7Ij4KICAgICAgPGgzPkh5ZHJvIFByb2ZpbGUgJiBQb3dlcjwvaDM+CiAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgPGRpdj5BY3RpdmUgbGluZTogPHNwYW4gaWQ9ImFjdGl2ZU5hbWUiIGNsYXNzPSJwaWxsIj7igJM8L3NwYW4+PC9kaXY+CiAgICAgICAgPGJ1dHRvbiBpZD0icmVjYWxjIiBjbGFzcz0iYnRuIj5SZWNvbXB1dGU8L2J1dHRvbj4KICAgICAgICA8YnV0dG9uIGlkPSJjbGVhciIgY2xhc3M9ImJ0biBzZWNvbmRhcnkiPkNsZWFyPC9idXR0b24+CiAgICAgIDwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICAgIDxkaXY+TGVuZ3RoOiA8c3BhbiBpZD0ibGVuIiBjbGFzcz0icGlsbCI+4oCTPC9zcGFuPjwvZGl2PgogICAgICAgIDxkaXY+U3RhcnQ6IDxzcGFuIGlkPSJ6MCIgY2xhc3M9InBpbGwiPuKAkzwvc3Bhbj48L2Rpdj4KICAgICAgICA8ZGl2PkVuZDogPHNwYW4gaWQ9InoxIiBjbGFzcz0icGlsbCI+4oCTPC9zcGFuPjwvZGl2PgogICAgICAgIDxkaXY+SGVhZDogPHNwYW4gaWQ9ImRyb3AiIGNsYXNzPSJwaWxsIj7igJM8L3NwYW4+PC9kaXY+CiAgICAgICAgPGRpdj5TbG9wZTogPHNwYW4gaWQ9InNsb3BlIiBjbGFzcz0icGlsbCI+4oCTPC9zcGFuPjwvZGl2PgogICAgICA8L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0icm93Ij4KICAgICAgICA8ZGl2PkdhaW46IDxzcGFuIGlkPSJnYWluIiBjbGFzcz0icGlsbCI+4oCTPC9zcGFuPjwvZGl2PgogICAgICAgIDxkaXY+TG9zczogPHNwYW4gaWQ9Imxvc3MiIGNsYXNzPSJwaWxsIj7igJM8L3NwYW4+PC9kaXY+CiAgICAgIDwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJyb3ciIHN0eWxlPSJtYXJnaW4tdG9wOjZweDsiPgogICAgICAgIDxsYWJlbD5GbG93IChjZnMpIDxpbnB1dCBpZD0iZmxvd0NGUyIgY2xhc3M9ImlucHV0IiB0eXBlPSJudW1iZXIiIHZhbHVlPSIwLjUwIiBzdGVwPSIwLjAxIiBtaW49IjAiIHN0eWxlPSJ3aWR0aDo5MHB4OyIvPjwvbGFiZWw+CiAgICAgICAgPGxhYmVsPs63ICgw4oCTMSkgPGlucHV0IGlkPSJldGEiIGNsYXNzPSJpbnB1dCIgdHlwZT0ibnVtYmVyIiB2YWx1ZT0iMC43MCIgc3RlcD0iMC4wMSIgbWluPSIwIiBtYXg9IjEiIHN0eWxlPSJ3aWR0aDo5MHB4OyIvPjwvbGFiZWw+CiAgICAgIDwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJyb3ciIHN0eWxlPSJtYXJnaW4tdG9wOjZweDsiPgogICAgICAgIDxzcGFuIGlkPSJwb3dlclciIGNsYXNzPSJwaWxsIj7igJMgVzwvc3Bhbj4KICAgICAgICA8c3BhbiBpZD0icG93ZXJrVyIgY2xhc3M9InBpbGwiPuKAkyBrVzwvc3Bhbj4KICAgICAgICA8c3BhbiBpZD0iaHAiIGNsYXNzPSJwaWxsIj7igJMgaHA8L3NwYW4+CiAgICAgIDwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJyb3ciIHN0eWxlPSJtYXJnaW4tdG9wOjZweDsiPgogICAgICAgIDxzcGFuIGNsYXNzPSJidG4gZ2hvc3QgY2hpcCIgZGF0YS1mbG93PSIwLjIwIj4wLjIwPC9zcGFuPgogICAgICAgIDxzcGFuIGNsYXNzPSJidG4gZ2hvc3QgY2hpcCIgZGF0YS1mbG93PSIwLjUwIj4wLjUwPC9zcGFuPgogICAgICAgIDxzcGFuIGNsYXNzPSJidG4gZ2hvc3QgY2hpcCIgZGF0YS1mbG93PSIxLjAwIj4xLjAwPC9zcGFuPgogICAgICAgIDxzcGFuIGNsYXNzPSJidG4gZ2hvc3QgY2hpcCIgZGF0YS1mbG93PSIxLjUwIj4xLjUwPC9zcGFuPgogICAgICA8L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0iZGl2aWRlciI+PC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgPGxhYmVsIGNsYXNzPSJzd2l0Y2giPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9InVzZUxvY2FsTGlkYXIiIGNoZWNrZWQgLz4gPHNwYW4+VXNlIGxvY2FsIExpREFSIGZvciBlbGV2YXRpb24gKGZhbGxiYWNrOiBVU0dTKTwvc3Bhbj48L2xhYmVsPgogICAgICA8L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0iZGl2aWRlciI+PC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgPGxhYmVsPkJhdHRlcnkgKFdoKSA8aW5wdXQgaWQ9ImJhdHRlcnlXaCIgY2xhc3M9ImlucHV0IiB0eXBlPSJudW1iZXIiIHZhbHVlPSI1MDQwIiBzdGVwPSIxMCIgbWluPSIwIiBzdHlsZT0id2lkdGg6MTIwcHg7Ii8+PC9sYWJlbD4KICAgICAgICA8bGFiZWw+RHV0eSAoMOKAkzEpIDxpbnB1dCBpZD0iZHV0eSIgY2xhc3M9ImlucHV0IiB0eXBlPSJudW1iZXIiIHZhbHVlPSIxLjAwIiBzdGVwPSIwLjA1IiBtaW49IjAiIG1heD0iMSIgc3R5bGU9IndpZHRoOjkwcHg7Ii8+PC9sYWJlbD4KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9InJvdyIgc3R5bGU9Im1hcmdpbi10b3A6NnB4OyI+CiAgICAgICAgPHNwYW4gaWQ9ImRhaWx5S1doIiBjbGFzcz0icGlsbCI+RGFpbHk6IOKAkyBrV2g8L3NwYW4+CiAgICAgICAgPHNwYW4gaWQ9InRpbWVUb0ZpbGwiIGNsYXNzPSJwaWxsIj5DaGFyZ2UgdGltZTog4oCTIGg8L3NwYW4+CiAgICAgIDwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJzbWFsbCI+RWxldmF0aW9uczogbG9jYWwgTGlEQVIgRFRNIHdoZW4gYXZhaWxhYmxlOyBVU0dTIEVQUVMgZmFsbGJhY2suIEhlYWQgaXMgZ3Jvc3M7IGZyaWN0aW9uIHJlZHVjZXMgbmV0LjwvZGl2PgogICAgPC9kaXY+CgogICAgPCEtLSBPbmxpbmUgYmFzZW1hcHMgJiBvdmVybGF5cyAtLT4KICAgIDxkaXYgY2xhc3M9ImNhcmQiIHN0eWxlPSJncmlkLWNvbHVtbjpzcGFuIDQ7Ij4KICAgICAgPGgzPk9ubGluZSBMYXllcnM8L2gzPgogICAgICA8ZGl2IGlkPSJsYXllckxpc3QiIGNsYXNzPSJzbWFsbCI+PC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8IS0tIEFuYWx5emVyICsgdmVnZXRhdGlvbiAtLT4KICAgIDxkaXYgY2xhc3M9ImNhcmQiIHN0eWxlPSJncmlkLWNvbHVtbjpzcGFuIDQ7Ij4KICAgICAgPGgzPlNpdGUgUGxhbm5lciAmIFZlZ2V0YXRpb248L2gzPgogICAgICA8ZGl2IGNsYXNzPSJsZWdlbmRCb3giPgogICAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzd2l0Y2giPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9InZlZy10b2dnbGUiIC8+IDxsYWJlbCBmb3I9InZlZy10b2dnbGUiPjxzdHJvbmc+VmVnZXRhdGlvbiBtb2RlPC9zdHJvbmc+IChkcmF3IGJsYWNrYmVycnkgcGF0Y2hlcyk8L2xhYmVsPjwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9InNtYWxsIj5Qb2x5Z29ucyBkcmF3biB3aGlsZSB2ZWdldGF0aW9uIG1vZGUgaXMgT04gYXJlIHN0eWxlZCBwdXJwbGUgYW5kIGdyb3VwZWQgdW5kZXIgPGk+VmVnZXRhdGlvbjwvaT4uPC9kaXY+CiAgICAgIDwvZGl2PgoKICAgICAgPGRpdiBjbGFzcz0ibGVnZW5kQm94IiBzdHlsZT0ibWFyZ2luLXRvcDo4cHg7Ij4KICAgICAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICAgICAgPGxhYmVsIGNsYXNzPSJidG4gZ2hvc3QiIGZvcj0iZ2VvanNvbkZpbGUiPlVwbG9hZCBHZW9KU09OPC9sYWJlbD4KICAgICAgICAgIDxpbnB1dCBpZD0iZ2VvanNvbkZpbGUiIHR5cGU9ImZpbGUiIGFjY2VwdD0iLmdlb2pzb24sYXBwbGljYXRpb24vZ2VvK2pzb24sYXBwbGljYXRpb24vanNvbiIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiIC8+CiAgICAgICAgICA8YnV0dG9uIGlkPSJleHBvcnROb3RlcyIgY2xhc3M9ImJ0biBzZWNvbmRhcnkiPkV4cG9ydCBub3RlcyAoLmdlb2pzb24pPC9idXR0b24+CiAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJ0biBnaG9zdCIgZm9yPSJpbXBvcnROb3RlcyI+SW1wb3J0IG5vdGVzPC9sYWJlbD4KICAgICAgICAgIDxpbnB1dCBpZD0iaW1wb3J0Tm90ZXMiIHR5cGU9ImZpbGUiIGFjY2VwdD0iLmdlb2pzb24sYXBwbGljYXRpb24vanNvbiIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiIC8+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0icm93IiBzdHlsZT0ibWFyZ2luLXRvcDo2cHg7Ij4KICAgICAgICAgIDxzZWxlY3QgaWQ9ImxheWVyUm9sZSIgY2xhc3M9ImlucHV0IiBzdHlsZT0id2lkdGg6MTYwcHg7Ij4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ic3RyZWFtcyI+c3RyZWFtczwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJoeWRyb2xvZ3kiPmh5ZHJvbG9neTwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJmbG9vZHBsYWluIj5mbG9vZHBsYWluPC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IndldGxhbmRzIj53ZXRsYW5kczwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJzbG9wZSI+c2xvcGU8L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iYXNwZWN0Ij5hc3BlY3Q8L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iYmxhY2tiZXJyeSI+YmxhY2tiZXJyeTwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJwYXJjZWwiPnBhcmNlbDwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJyb2FkcyI+cm9hZHM8L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iYnVpbGRpbmdzIj5idWlsZGluZ3M8L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0idXRpbGl0aWVzIj51dGlsaXRpZXM8L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iY3VzdG9tIiBzZWxlY3RlZD5jdXN0b208L29wdGlvbj4KICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgPGlucHV0IGlkPSJsYXllck5hbWUiIGNsYXNzPSJpbnB1dCIgcGxhY2Vob2xkZXI9IkxheWVyIG5hbWUgKG9wdGlvbmFsKSIgc3R5bGU9IndpZHRoOjIwMHB4OyIgLz4KICAgICAgICAgIDxidXR0b24gaWQ9ImFzc2lnblJvbGUiIGNsYXNzPSJidG4gc2Vjb25kYXJ5Ij5Bc3NpZ24gcm9sZSB0byBsYXN0IHVwbG9hZGVkPC9idXR0b24+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iZGl2aWRlciI+PC9kaXY+CiAgICAgICAgPGJ1dHRvbiBpZD0iYW5hbHl6ZUJ0biIgY2xhc3M9ImJ0biBnb29kIj5BbmFseXplIFNlbGVjdGVkIEZlYXR1cmVzPC9idXR0b24+CiAgICAgICAgPGRpdiBpZD0icmVwb3J0IiBjbGFzcz0ic21hbGwiIHN0eWxlPSJtYXJnaW4tdG9wOjhweDsgbWF4LWhlaWdodDoxODBweDsgb3ZlcmZsb3c6YXV0bzsiPjwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDwhLS0gUHJvZmlsZSBjaGFydCAoZnVsbCB3aWR0aCkgLS0+CiAgICA8ZGl2IGNsYXNzPSJjYXJkIiBzdHlsZT0iZ3JpZC1jb2x1bW46c3BhbiAxMjsiPgogICAgICA8Y2FudmFzIGlkPSJwcm9maWxlIj48L2NhbnZhcz4KICAgIDwvZGl2PgogIDwvZGl2PgoKICA8IS0tIEZvb3RlciAtLT4KICA8ZGl2IGlkPSJmb290ZXIiPgogICAgPGRpdj5EcmF3IHBlbnN0b2NrIHdpdGggdGhlIHBlbmNpbCwgY2xpY2sgaW50YWtlIChoaWdoKSDihpIgcG93ZXJob3VzZSAobG93KS4gRG91Ymxl4oCRY2xpY2sgdG8gZmluaXNoLiBZb3UgY2FuIGVkaXQgdmVydGljZXMsIHRoZW4gPHNwYW4gY2xhc3M9ImtiZCI+UmVjb21wdXRlPC9zcGFuPi4gQm9va21hcmtzIGxpdmUgaW4geW91ciBicm93c2VyIChsb2NhbFN0b3JhZ2UpLiBFeHBvcnQgbm90ZXMgZmlsZSBuYW1lIG5vdyBpbmNsdWRlcyA8c3Ryb25nPnY1LjIuODwvc3Ryb25nPi48L2Rpdj4KICA8L2Rpdj4KPC9kaXY+Cgo8c2NyaXB0PgovLyAtLS0gTWFwIGluaXQgLS0tCmNvbnN0IGNlbnRlciA9IFs0Ni4wMjAxLCAtMTIyLjU0ODhdOwpjb25zdCBtYXAgPSBMLm1hcCgnbWFwJywgeyBjZW50ZXIsIHpvb206IDE3IH0pOwoKLy8gPT09IEVIMTAwMzAwNiBQYXJjZWwgKGFsd2F5cy1vbiBkZWZhdWx0KSA9PT0KY29uc3QgcGFyY2VsR2VvSlNPTiA9IHsidHlwZSI6IkZlYXR1cmVDb2xsZWN0aW9uIiwiZmVhdHVyZXMiOlt7InR5cGUiOiJGZWF0dXJlIiwicHJvcGVydGllcyI6e30sImdlb21ldHJ5Ijp7InR5cGUiOiJQb2x5Z29uIiwiY29vcmRpbmF0ZXMiOltbWy0xMjIuNTUwNDQsNDYuMDIwMzc1XSxbLTEyMi41NTA0ODMsNDYuMDE4MzEyXSxbLTEyMi41NDc4NjUsNDYuMDE4MzEyXSxbLTEyMi41NDc4NjUsNDYuMDE4ODQ4XSxbLTEyMi41NDUxNjEsNDYuMDE4ODQ4XSxbLTEyMi41NDUxMjksNDYuMDIwMzgzXSxbLTEyMi41NTA0NCw0Ni4wMjAzNzVdXV19fV19Owpjb25zdCBwYXJjZWxMYXllciA9IEwuZ2VvSlNPTihwYXJjZWxHZW9KU09OLCB7IHN0eWxlOiB7IGNvbG9yOicjZWY0NDQ0Jywgd2VpZ2h0OjMsIGZpbGxPcGFjaXR5OjAuMDYgfSB9KTsKY29uc3QgcGFyY2VsQ2VudGVyID0gWzQ2LjAyMDEsIC0xMjIuNTQ4OF07CmNvbnN0IHBhcmNlbE5vdGVzID0gTC5tYXJrZXIocGFyY2VsQ2VudGVyKS5iaW5kUG9wdXAoYAogIDxiPlBhcmNlbDo8L2I+IEVIMTAwMzAwNjxici8+CiAgPGI+Q291bnR5OjwvYj4gQ293bGl0eiwgV0E8YnIvPgogIDxiPkNvb3Jkczo8L2I+IDQ2LjAyMDEwMCwgLTEyMi41NDg4MDA8YnIvPgogIDxociBzdHlsZT0ibWFyZ2luOjZweCAwIiAvPgogIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZToxMnB4O2xpbmUtaGVpZ2h0OjEuMiI+CiAgICBTdGFybGluayB1bmxpbWl0ZWQgaW50ZXJuZXQ8YnIvPgogICAgT25zaXRlIFdp4oCRRmkgJiBzZWN1cml0eSBjYW1lcmFzPGJyLz4KICAgIFNvbGFyIHByZXNlbnQ8YnIvPgogICAgSXNzdWU6IGludmFzaXZlIGJsYWNrYmVycmllcwogIDwvZGl2PgpgKTsKY29uc3QgcGFyY2VsR3JvdXAgPSBMLmxheWVyR3JvdXAoWwogIHBhcmNlbExheWVyLAogIHBhcmNlbE5vdGVzLAogIEwuY2lyY2xlKHBhcmNlbENlbnRlciwgeyByYWRpdXM6IDI1MCwgY29sb3I6ICcjMWQ0ZWQ4Jywgd2VpZ2h0OiAxLCBmaWxsT3BhY2l0eTogMC4wMyB9KS5iaW5kVG9vbHRpcCgnMjUwIG0gcmVmZXJlbmNlJykKXSk7CnBhcmNlbEdyb3VwLmFkZFRvKG1hcCk7CnRyeSB7IG1hcC5maXRCb3VuZHMocGFyY2VsTGF5ZXIuZ2V0Qm91bmRzKCkpOyB9IGNhdGNoKGUpe30KCi8vIC0tLSBHZW9tYW4gY29udHJvbHMgLS0tCm1hcC5wbS5hZGRDb250cm9scyh7CiAgcG9zaXRpb246ICd0b3BsZWZ0JywgZHJhd01hcmtlcjogdHJ1ZSwgZHJhd1BvbHlsaW5lOiB0cnVlLCBkcmF3UmVjdGFuZ2xlOiB0cnVlLAogIGRyYXdDaXJjbGU6IHRydWUsIGRyYXdQb2x5Z29uOiB0cnVlLCBlZGl0TW9kZTogdHJ1ZSwgZHJhZ01vZGU6IHRydWUsIGN1dFBvbHlnb246IHRydWUsIHJlbW92YWxNb2RlOiB0cnVlCn0pOwoKLy8gLS0tIEZlYXR1cmUgZ3JvdXBzIC0tLQpjb25zdCBkcmF3biA9IEwuZmVhdHVyZUdyb3VwKCkuYWRkVG8obWFwKTsKY29uc3QgdmVnR3JvdXAgPSBMLmZlYXR1cmVHcm91cCgpLmFkZFRvKG1hcCk7CmNvbnN0IGVuZHBvaW50cyA9IEwubGF5ZXJHcm91cCgpLmFkZFRvKG1hcCk7CgovLyAtLS0gVmVnZXRhdGlvbiBtb2RlIC0tLQpsZXQgdmVnTW9kZSA9IGZhbHNlOwpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmVnLXRvZ2dsZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7CiAgdmVnTW9kZSA9ICEhZS50YXJnZXQuY2hlY2tlZDsKICBtYXAucG0uc2V0UGF0aE9wdGlvbnModmVnTW9kZSA/IHsgY29sb3I6JyM3ZTIyY2UnLCBmaWxsQ29sb3I6JyM3ZTIyY2UnLCBmaWxsT3BhY2l0eTowLjI1IH0gOiB7IGNvbG9yOicjZTJlOGYwJywgZmlsbENvbG9yOicjMWYyOTM3JyB9KTsKfSk7CgovLyAtLS0gQmFzZW1hcHMgLS0tCmNvbnN0IHVzZ3NUb3BvID0gTC50aWxlTGF5ZXIoJ2h0dHBzOi8vYmFzZW1hcC5uYXRpb25hbG1hcC5nb3YvYXJjZ2lzL3Jlc3Qvc2VydmljZXMvVVNHU1RvcG8vTWFwU2VydmVyL3RpbGUve3p9L3t5fS97eH0nLCB7IG1heFpvb206IDE5LCBhdHRyaWJ1dGlvbjogJ1VTR1MnIH0pLmFkZFRvKG1hcCk7CmNvbnN0IHVzZ3NJbWFnZXJ5VG9wbyA9IEwudGlsZUxheWVyKCdodHRwczovL2Jhc2VtYXAubmF0aW9uYWxtYXAuZ292L2FyY2dpcy9yZXN0L3NlcnZpY2VzL1VTR1NJbWFnZXJ5VG9wby9NYXBTZXJ2ZXIvdGlsZS97en0ve3l9L3t4fScsIHsgbWF4Wm9vbTogMTksIGF0dHJpYnV0aW9uOiAnVVNHUycgfSk7CgovLyAtLS0gT25saW5lIGR5bmFtaWMgb3ZlcmxheXMgKEVzcmkgTGVhZmxldCkgLS0tCmNvbnN0IG92ZXJsYXlzID0gewogICdQYXJjZWwgJiBOb3Rlcyc6IHBhcmNlbEdyb3VwLAogICJXQSBETlIgTGlEQVIgSGlsbHNoYWRlIjogTC5lc3JpLmR5bmFtaWNNYXBMYXllcih7IHVybDogJ2h0dHBzOi8vZ2lzLmRuci53YS5nb3Yvc2l0ZTEvcmVzdC9zZXJ2aWNlcy9QdWJsaWNfR2VvbG9neS9MaWRhcl9IaWxsc2hhZGUvTWFwU2VydmVyJywgb3BhY2l0eTogMC42IH0pLAogICJXQSBETlIgRm9yZXN0IFByYWN0aWNlcyBIeWRybyI6IEwuZXNyaS5keW5hbWljTWFwTGF5ZXIoeyB1cmw6ICdodHRwczovL2dpcy5kbnIud2EuZ292L3NpdGUyL3Jlc3Qvc2VydmljZXMvUHVibGljX0ZvcmVzdF9QcmFjdGljZXMvV0FETlJfUFVCTElDX0ZQX0h5ZHJvL01hcFNlcnZlcicsIG9wYWNpdHk6IDAuODUgfSksCiAgIlVTR1MgTkhEIChIeWRyb2dyYXBoeSkiOiBMLmVzcmkuZHluYW1pY01hcExheWVyKHsgdXJsOiAnaHR0cHM6Ly9oeWRyby5uYXRpb25hbG1hcC5nb3YvYXJjZ2lzL3Jlc3Qvc2VydmljZXMvbmhkL01hcFNlcnZlcicsIG9wYWNpdHk6IDAuOCB9KSwKICAiVVNHUyBXQkQgKFdhdGVyc2hlZHMpIjogTC5lc3JpLmR5bmFtaWNNYXBMYXllcih7IHVybDogJ2h0dHBzOi8vaHlkcm8ubmF0aW9uYWxtYXAuZ292L2FyY2dpcy9yZXN0L3NlcnZpY2VzL3diZC9NYXBTZXJ2ZXInLCBvcGFjaXR5OiAwLjcgfSksCiAgIkZFTUEgTkZITCAoRmxvb2RwbGFpbikiOiBMLmVzcmkuZHluYW1pY01hcExheWVyKHsgdXJsOiAnaHR0cHM6Ly9oYXphcmRzLmZlbWEuZ292L2FyY2dpcy9yZXN0L3NlcnZpY2VzL3B1YmxpYy9ORkhML01hcFNlcnZlcicsIG9wYWNpdHk6IDAuNzUgfSksCiAgIlVTRldTIE5XSSBXZXRsYW5kcyI6IEwuZXNyaS5keW5hbWljTWFwTGF5ZXIoeyB1cmw6ICdodHRwczovL2Z3c3B1YmxpY3NlcnZpY2VzLndpbS51c2dzLmdvdi93ZXRsYW5kc21hcHNlcnZpY2UvcmVzdC9zZXJ2aWNlcy9XZXRsYW5kcy9NYXBTZXJ2ZXInLCBvcGFjaXR5OiAwLjc1IH0pLAogICJOUkNTIFNvaWxzIChTU1VSR08gc2FtcGxlKSI6IEwuZXNyaS5keW5hbWljTWFwTGF5ZXIoeyB1cmw6ICdodHRwczovL25yY3NnZW9zZXJ2aWNlcy5zYy5lZ292LnVzZGEuZ292L2FyY2dpcy9yZXN0L3NlcnZpY2VzL3NvaWxzL3NzdXJnb19mb3JfcnN2aS9NYXBTZXJ2ZXInLCBvcGFjaXR5OiAwLjcgfSksCiAgIk5PQUEvVVNHUyBTdHJlYW0gR2F1Z2VzIChyZWYpIjogTC5lc3JpLmR5bmFtaWNNYXBMYXllcih7IHVybDogJ2h0dHBzOi8vbWFwc2VydmljZXMud2VhdGhlci5ub2FhLmdvdi9zdGF0aWMvcmVzdC9zZXJ2aWNlcy9ud3NfcmVmZXJlbmNlX21hcHMvVVNHU19TdHJlYW1fR2F1Z2VzL01hcFNlcnZlcicsIG9wYWNpdHk6IDAuOSB9KQp9OwoKLy8gTGF5ZXIgc3dpdGNoZXIgVUkgd2l0aCBvcGFjaXR5IHNsaWRlcnMKY29uc3QgbGF5ZXJMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xheWVyTGlzdCcpOwpmdW5jdGlvbiBhZGRMYXllclJvdyhuYW1lLCBsYXllcil7CiAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgcm93LmNsYXNzTmFtZSA9ICdsYXllci1yb3cnOwogIGNvbnN0IGNoayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7IGNoay50eXBlID0gJ2NoZWNrYm94JzsKICB0cnkgeyBjaGsuY2hlY2tlZCA9IGZhbHNlOyB9IGNhdGNoKF8pIHsgY2hrLmNoZWNrZWQgPSBmYWxzZTsgfQogIGNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTsgbGFiZWwudGV4dENvbnRlbnQgPSBuYW1lOwogIGNvbnN0IHNsaWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7IHNsaWRlci50eXBlID0gJ3JhbmdlJzsgc2xpZGVyLm1pbj0wOyBzbGlkZXIubWF4PTE7IHNsaWRlci5zdGVwPTAuMDU7IHNsaWRlci52YWx1ZT1sYXllci5vcHRpb25zLm9wYWNpdHkgPz8gMTsKICBjaGsuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4geyBpZihjaGsuY2hlY2tlZCkgbGF5ZXIuYWRkVG8obWFwKTsgZWxzZSBsYXllci5yZW1vdmUoKTsgfSk7CiAgc2xpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gbGF5ZXIuc2V0T3BhY2l0eShwYXJzZUZsb2F0KHNsaWRlci52YWx1ZSkpKTsKICByb3cuYXBwZW5kQ2hpbGQoY2hrKTsgcm93LmFwcGVuZENoaWxkKGxhYmVsKTsgcm93LmFwcGVuZENoaWxkKHNsaWRlcik7CiAgbGF5ZXJMaXN0LmFwcGVuZENoaWxkKHJvdyk7Cn0KT2JqZWN0LmVudHJpZXMob3ZlcmxheXMpLmZvckVhY2goKFtuYW1lLCBsYXllcl0pID0+IGFkZExheWVyUm93KG5hbWUsIGxheWVyKSk7CgpMLmNvbnRyb2wubGF5ZXJzKHsgJ1VTR1MgVG9wbyc6IHVzZ3NUb3BvLCAnVVNHUyBJbWFnZXJ5VG9wbyc6IHVzZ3NJbWFnZXJ5VG9wbyB9LCBudWxsLCB7IHBvc2l0aW9uOid0b3ByaWdodCcgfSkuYWRkVG8obWFwKTsKCi8vIC0tLSBNdWx0aWJhbmQgc3RhY2sgY29uZmlnIChhc3N1bWVzIG9yZGVyOiBEVE0sIFNsb3BlLCBBc3BlY3QsIENITSkgLS0tCmNvbnN0IEJBTkRNQVAgPSB7IERUTTogMCwgU0xPUEU6IDEsIEFTUEVDVDogMiwgQ0hNOiAzIH07CmNvbnN0IFNUQUNLX0NBTkRJREFURVMgPSBbCiAgJ2VoMTAwMzAwNl9zdGFja192MV8xX2NvZy50aWYnLCAgICAgLy8gcHJlZmVycmVkCiAgJ2VoMTAwMzAwNl9jb21iaW5lZF9iYW5kc192MV8wLnRpZicgLy8gZXhpc3RpbmcKXTsKCmFzeW5jIGZ1bmN0aW9uIGZldGNoQXJyYXlCdWZmZXJGcm9tKHVybHMpewogIGZvcihjb25zdCB1IG9mIHVybHMpewogICAgdHJ5IHsKICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godSk7CiAgICAgIGlmKHJlcy5vayl7IGNvbnN0IGJ1ZiA9IGF3YWl0IHJlcy5hcnJheUJ1ZmZlcigpOyByZXR1cm4geyB1cmw6IHUsIGJ1ZiB9OyB9CiAgICB9IGNhdGNoKGUpe30KICB9CiAgdGhyb3cgbmV3IEVycm9yKCdObyBVUkwgYXZhaWxhYmxlJyk7Cn0KCi8vIENvbG9yIHJhbXBzCmZ1bmN0aW9uIHJhbXBHcmVlbih2LCB2bWluLCB2bWF4KXsKICB2ID0gQXJyYXkuaXNBcnJheSh2KSA/IHZbMF0gOiB2OwogIGlmKHY9PW51bGwgfHwgaXNOYU4odikpIHJldHVybiBudWxsOwogIGNvbnN0IHQgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCAodiAtIHZtaW4pLyh2bWF4IC0gdm1pbikpKTsKICBjb25zdCBnID0gTWF0aC5mbG9vcig0MCArIDE4MCp0KTsKICBjb25zdCByID0gTWF0aC5mbG9vcigyMCArIDUwKnQpOwogIGNvbnN0IGIgPSBNYXRoLmZsb29yKDIwICsgNDAqKDEtdCkpOwogIHJldHVybiBgcmdiYSgke3J9LCR7Z30sJHtifSwxKWA7Cn0KZnVuY3Rpb24gcmFtcFNsb3BlKHYpewogIHYgPSBBcnJheS5pc0FycmF5KHYpID8gdlswXSA6IHY7CiAgaWYodj09bnVsbCB8fCBpc05hTih2KSkgcmV0dXJuIG51bGw7CiAgaWYodiA8IDEwKSByZXR1cm4gJ3JnYmEoMzQsMTk3LDk0LDAuODUpJzsKICBpZih2IDwgMzApIHJldHVybiAncmdiYSgyNDUsMTU4LDExLDAuODUpJzsKICByZXR1cm4gJ3JnYmEoMjM5LDY4LDY4LDAuOSknOwp9CmZ1bmN0aW9uIGNvbG9yQXNwZWN0KHYpewogIHYgPSBBcnJheS5pc0FycmF5KHYpID8gdlswXSA6IHY7CiAgaWYodj09bnVsbCB8fCBpc05hTih2KSkgcmV0dXJuIG51bGw7CiAgY29uc3QgZCA9ICgodiUzNjApKzM2MCklMzYwOwogIGlmKGQ8NDUpIHJldHVybiAncmdiYSg1OSwxMzAsMjQ2LDAuNyknOwogIGlmKGQ8OTApIHJldHVybiAncmdiYSg0NSwyMTIsMTkxLDAuNyknOwogIGlmKGQ8MTM1KSByZXR1cm4gJ3JnYmEoMTYsMTg1LDEyOSwwLjcpJzsKICBpZihkPDE4MCkgcmV0dXJuICdyZ2JhKDEzMiwyMDQsMjIsMC43KSc7CiAgaWYoZDwyMjUpIHJldHVybiAncmdiYSgyMzQsMTc5LDgsMC43KSc7CiAgaWYoZDwyNzApIHJldHVybiAncmdiYSgyNDksMTE1LDIyLDAuNyknOwogIGlmKGQ8MzE1KSByZXR1cm4gJ3JnYmEoMTY4LDg1LDI0NywwLjcpJzsKICByZXR1cm4gJ3JnYmEoOTksMTAyLDI0MSwwLjcpJzsKfQoKZnVuY3Rpb24gbWFrZUJhbmRMYXllcihnZW9yYXN0ZXIsIGJhbmRJbmRleCwgcGl4ZWxWYWx1ZXNUb0NvbG9yRm4sIG9wdHM9e30pewogIHJldHVybiBuZXcgR2VvUmFzdGVyTGF5ZXIoewogICAgZ2VvcmFzdGVyLAogICAgb3BhY2l0eTogb3B0cy5vcGFjaXR5ID8/IDAuNiwKICAgIHJlc29sdXRpb246IG9wdHMucmVzb2x1dGlvbiA/PyA5NiwKICAgIHBpeGVsVmFsdWVzVG9Db2xvckZuOiAodmFscykgPT4gewogICAgICBjb25zdCB2ID0gQXJyYXkuaXNBcnJheSh2YWxzKSA/IHZhbHNbYmFuZEluZGV4XSA6IHZhbHM7CiAgICAgIHJldHVybiBwaXhlbFZhbHVlc1RvQ29sb3JGbihbdl0pOwogICAgfQogIH0pOwp9CgpsZXQgbG9jYWxEVE0gPSBudWxsOyAvLyBnZW9yYXN0ZXIgb2JqZWN0IChzdGFjayBvciBzaW5nbGUpCmxldCBkdG1MYXllciA9IG51bGw7IC8vIGJhc2UgbGF5ZXIKCihhc3luYyBmdW5jdGlvbiBsb2FkUmFzdGVycygpewogIGNvbnN0IGJhZGdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpZGFyQmFkZ2UnKTsKCiAgLy8gMSkgVHJ5IG11bHRpYmFuZCBzdGFjayBmaXJzdAogIHRyeSB7CiAgICBjb25zdCB7IGJ1Zjogc3RhY2tCdWYgfSA9IGF3YWl0IGZldGNoQXJyYXlCdWZmZXJGcm9tKFNUQUNLX0NBTkRJREFURVMpOwogICAgY29uc3Qgc3RhY2tSYXN0ZXIgPSBhd2FpdCBwYXJzZUdlb3Jhc3RlcihzdGFja0J1Zik7CiAgICBsb2NhbERUTSA9IHN0YWNrUmFzdGVyOwoKICAgIC8vIERUTSBiYXNlIChncmV5c2NhbGUgc3RyZXRjaCkKICAgIGNvbnN0IE1JTl9GVCA9IDExMDYsIE1BWF9GVCA9IDE0NzY7CiAgICBkdG1MYXllciA9IG5ldyBHZW9SYXN0ZXJMYXllcih7CiAgICAgIGdlb3Jhc3Rlcjogc3RhY2tSYXN0ZXIsIG9wYWNpdHk6IDAuODUsIHJlc29sdXRpb246IDk2LAogICAgICBwaXhlbFZhbHVlc1RvQ29sb3JGbjogKHZhbHMpID0+IHsKICAgICAgICBjb25zdCB2ID0gQXJyYXkuaXNBcnJheSh2YWxzKSA/IHZhbHNbQkFORE1BUC5EVE1dIDogdmFsczsKICAgICAgICBpZiAodiA9PSBudWxsIHx8IGlzTmFOKHYpKSByZXR1cm4gbnVsbDsKICAgICAgICBjb25zdCB0ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgKHYgLSBNSU5fRlQpIC8gKE1BWF9GVCAtIE1JTl9GVCkpKTsKICAgICAgICBjb25zdCBnID0gTWF0aC5mbG9vcigyNTUgKiB0KTsKICAgICAgICByZXR1cm4gYHJnYmEoJHtnfSwke2d9LCR7Z30sMSlgOwogICAgICB9CiAgICB9KS5hZGRUbyhtYXApOwogICAgYWRkTGF5ZXJSb3coJ0VIMTAwMzAwNiBEVE0gKHN0YWNrLCBsb2NhbCknLCBkdG1MYXllcik7CiAgICB0cnkgeyBtYXAuZml0Qm91bmRzKGR0bUxheWVyLmdldEJvdW5kcygpKTsgfSBjYXRjaCAoZSkge30KCiAgICAvLyBPcHRpb25hbCBvdmVybGF5cyBmcm9tIGJhbmRzIChzdGFydCBPRkYpCiAgICBjb25zdCBzbG9wZUxheWVyID0gbWFrZUJhbmRMYXllcihzdGFja1Jhc3RlciwgQkFORE1BUC5TTE9QRSwgcmFtcFNsb3BlLCB7IG9wYWNpdHk6MC41NSB9KTsKICAgIGFkZExheWVyUm93KCdTbG9wZSAlIChzdGFjaywgbG9jYWwpJywgc2xvcGVMYXllcik7CgogICAgY29uc3QgYXNwZWN0TGF5ZXIgPSBtYWtlQmFuZExheWVyKHN0YWNrUmFzdGVyLCBCQU5ETUFQLkFTUEVDVCwgY29sb3JBc3BlY3QsIHsgb3BhY2l0eTowLjUgfSk7CiAgICBhZGRMYXllclJvdygnQXNwZWN0IMKwIChzdGFjaywgbG9jYWwpJywgYXNwZWN0TGF5ZXIpOwoKICAgIGNvbnN0IENITV9NSU4gPSAwLCBDSE1fTUFYID0gNDA7CiAgICBjb25zdCBjaG1MYXllciA9IG1ha2VCYW5kTGF5ZXIoc3RhY2tSYXN0ZXIsIEJBTkRNQVAuQ0hNLCAodmFscyk9PnJhbXBHcmVlbih2YWxzLCBDSE1fTUlOLCBDSE1fTUFYKSwgeyBvcGFjaXR5OjAuNiB9KTsKICAgIGFkZExheWVyUm93KCdDYW5vcHkgSGVpZ2h0IChzdGFjaywgbG9jYWwpJywgY2htTGF5ZXIpOwoKICAgIGJhZGdlLnRleHRDb250ZW50ID0gJ0xpREFSIChzdGFjayk6IGxvYWRlZCc7CiAgICBiYWRnZS5jbGFzc0xpc3QuYWRkKCdnb29kJyk7CiAgICByZXR1cm47IC8vIGRvbmUKICB9IGNhdGNoIChlKSB7CiAgICBjb25zb2xlLmxvZygnTm8gc3RhY2s7IGZhbGxpbmcgYmFjayB0byBzaW5nbGVzLi4uJywgZSk7CiAgfQoKICAvLyAyKSBGYWxsYmFjazogc2luZ2xlLWZpbGUgRFRNICsgb3B0aW9uYWwgc2luZ2xlLWZpbGUgb3ZlcmxheXMKICB0cnkgewogICAgY29uc3QgeyBidWYgfSA9IGF3YWl0IGZldGNoQXJyYXlCdWZmZXJGcm9tKFsKICAgICAgJy4uL2RhdGEvZWgxMDAzMDA2X2R0bV9jbGlwLnRpZicsJ2VoMTAwMzAwNl9kdG1fY2xpcC50aWYnLAogICAgICAnbGlkYXJfZXh0cmFjdC9iZV93MTExODI1MG4yNTY1MDBfZHRtLnRpZicsJy4uL2RhdGEvbGlkYXJfZXh0cmFjdC9iZV93MTExODI1MG4yNTY1MDBfZHRtLnRpZicKICAgIF0pOwogICAgbG9jYWxEVE0gPSBhd2FpdCBwYXJzZUdlb3Jhc3RlcihidWYpOwoKICAgIGNvbnN0IE1JTl9GVCA9IDExMDYsIE1BWF9GVCA9IDE0NzY7CiAgICBkdG1MYXllciA9IG5ldyBHZW9SYXN0ZXJMYXllcih7CiAgICAgIGdlb3Jhc3RlcjogbG9jYWxEVE0sIG9wYWNpdHk6IDAuODUsIHJlc29sdXRpb246IDk2LAogICAgICBwaXhlbFZhbHVlc1RvQ29sb3JGbjogKFt2XSkgPT4gewogICAgICAgIGlmICh2ID09IG51bGwgfHwgaXNOYU4odikpIHJldHVybiBudWxsOwogICAgICAgIGNvbnN0IHQgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCAodiAtIE1JTl9GVCkgLyAoTUFYX0ZUIC0gTUlOX0ZUKSkpOwogICAgICAgIGNvbnN0IGcgPSBNYXRoLmZsb29yKDI1NSAqIHQpOwogICAgICAgIHJldHVybiBgcmdiYSgke2d9LCR7Z30sJHtnfSwxKWA7CiAgICAgIH0KICAgIH0pLmFkZFRvKG1hcCk7CiAgICBhZGRMYXllclJvdygnRUgxMDAzMDA2IExpREFSIERUTSAobG9jYWwpJywgZHRtTGF5ZXIpOwogICAgdHJ5IHsgbWFwLmZpdEJvdW5kcyhkdG1MYXllci5nZXRCb3VuZHMoKSk7IH0gY2F0Y2goZSl7fQogICAgYmFkZ2UudGV4dENvbnRlbnQgPSAnTGlEQVIgRFRNOiBsb2FkZWQnOyBiYWRnZS5jbGFzc0xpc3QuYWRkKCdnb29kJyk7CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBjb25zb2xlLmVycm9yKGVycik7IGJhZGdlLnRleHRDb250ZW50ID0gJ0xpREFSIERUTTogZmFpbGVkICh1c2luZyBvbmxpbmUgb25seSknOwogIH0KCiAgLy8gT3B0aW9uYWwgc2luZ2xlcyAob25seSBpZiBwcmVzZW50KQogIHRyeSB7CiAgICBjb25zdCB7IGJ1ZiB9ID0gYXdhaXQgZmV0Y2hBcnJheUJ1ZmZlckZyb20oWydlaDEwMDMwMDZfc2xvcGVfcGN0LnRpZicsJy4uL2RhdGEvZWgxMDAzMDA2X3Nsb3BlX3BjdC50aWYnXSk7CiAgICBjb25zdCBzbG9wZVJhc3RlciA9IGF3YWl0IHBhcnNlR2VvcmFzdGVyKGJ1Zik7CiAgICBjb25zdCBzbG9wZUxheWVyID0gbmV3IEdlb1Jhc3RlckxheWVyKHsKICAgICAgZ2VvcmFzdGVyOiBzbG9wZVJhc3Rlciwgb3BhY2l0eTogMC41NSwgcmVzb2x1dGlvbjogOTYsCiAgICAgIHBpeGVsVmFsdWVzVG9Db2xvckZuOiAoW3ZdKSA9PiByYW1wU2xvcGUodikKICAgIH0pOwogICAgYWRkTGF5ZXJSb3coJ1Nsb3BlICUgKGxvY2FsKScsIHNsb3BlTGF5ZXIpOwogIH0gY2F0Y2goZSl7fQoKICB0cnkgewogICAgY29uc3QgeyBidWYgfSA9IGF3YWl0IGZldGNoQXJyYXlCdWZmZXJGcm9tKFsnZWgxMDAzMDA2X2FzcGVjdF9kZWcudGlmJywnLi4vZGF0YS9laDEwMDMwMDZfYXNwZWN0X2RlZy50aWYnXSk7CiAgICBjb25zdCBhc3BlY3RSYXN0ZXIgPSBhd2FpdCBwYXJzZUdlb3Jhc3RlcihidWYpOwogICAgY29uc3QgYXNwZWN0TGF5ZXIgPSBuZXcgR2VvUmFzdGVyTGF5ZXIoewogICAgICBnZW9yYXN0ZXI6IGFzcGVjdFJhc3Rlciwgb3BhY2l0eTogMC41LCByZXNvbHV0aW9uOiA5NiwKICAgICAgcGl4ZWxWYWx1ZXNUb0NvbG9yRm46IChbdl0pID0+IGNvbG9yQXNwZWN0KHYpCiAgICB9KTsKICAgIGFkZExheWVyUm93KCdBc3BlY3QgwrAgKGxvY2FsKScsIGFzcGVjdExheWVyKTsKICB9IGNhdGNoKGUpe30KCiAgdHJ5IHsKICAgIGNvbnN0IHsgYnVmIH0gPSBhd2FpdCBmZXRjaEFycmF5QnVmZmVyRnJvbShbJ2VoMTAwMzAwNl9jaG0udGlmJywnLi4vZGF0YS9laDEwMDMwMDZfY2htLnRpZiddKTsKICAgIGNvbnN0IGNobVJhc3RlciA9IGF3YWl0IHBhcnNlR2VvcmFzdGVyKGJ1Zik7CiAgICBjb25zdCBDSE1fTUlOID0gMCwgQ0hNX01BWCA9IDQwOwogICAgY29uc3QgY2htTGF5ZXIgPSBuZXcgR2VvUmFzdGVyTGF5ZXIoewogICAgICBnZW9yYXN0ZXI6IGNobVJhc3Rlciwgb3BhY2l0eTogMC42LCByZXNvbHV0aW9uOiA5NiwKICAgICAgcGl4ZWxWYWx1ZXNUb0NvbG9yRm46IChbdl0pID0+IHJhbXBHcmVlbih2LCBDSE1fTUlOLCBDSE1fTUFYKQogICAgfSk7CiAgICBhZGRMYXllclJvdygnQ2Fub3B5IEhlaWdodCAobG9jYWwpJywgY2htTGF5ZXIpOwogIH0gY2F0Y2goZSl7fQp9KSgpOwoKLy8gLS0tIENoYXJ0IHNldHVwIC0tLQpjb25zdCBjdHggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvZmlsZScpOwpsZXQgY2hhcnQgPSBuZXcgQ2hhcnQoY3R4LCB7CiAgdHlwZTogJ2xpbmUnLAogIGRhdGE6IHsgbGFiZWxzOiBbXSwgZGF0YXNldHM6IFt7IGxhYmVsOiAnRWxldmF0aW9uIChmdCknLCBkYXRhOiBbXSwgZmlsbDpmYWxzZSwgdGVuc2lvbjogMC4xNSB9XSB9LAogIG9wdGlvbnM6IHsgcmVzcG9uc2l2ZTp0cnVlLCBtYWludGFpbkFzcGVjdFJhdGlvOmZhbHNlLCBzY2FsZXM6IHsgeDogeyB0aXRsZTp7IGRpc3BsYXk6dHJ1ZSwgdGV4dDonRGlzdGFuY2UgKGZ0KScgfSB9LCB5OiB7IHRpdGxlOnsgZGlzcGxheTp0cnVlLCB0ZXh0OidFbGV2YXRpb24gKGZ0KScgfSB9IH0gfQp9KTsKCi8vIC0tLSBVU0dTIEVQUVMgKGZhbGxiYWNrKSAtLS0KYXN5bmMgZnVuY3Rpb24gZXBxc0ZlZXQobG9uLCBsYXQpewogIGNvbnN0IHVybCA9IGBodHRwczovL2VwcXMubmF0aW9uYWxtYXAuZ292L3YxL2pzb24/eD0ke2xvbn0meT0ke2xhdH0mdW5pdHM9RmVldCZ3a2lkPTQzMjZgOwogIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCk7CiAgaWYoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKCdFUFFTIGVycm9yJyk7CiAgY29uc3QganMgPSBhd2FpdCByZXMuanNvbigpOwogIHJldHVybiBqcz8udmFsdWUgPz8ganM/LmVsZXZhdGlvbiA/PyBudWxsOwp9CgovLyBVdGlsaXRpZXMKZnVuY3Rpb24gaGF2ZXJzaW5lKG0xLCBtMil7CiAgY29uc3QgUiA9IDYzNzEwMDA7IGNvbnN0IHRvUmFkID0geCA9PiB4Kk1hdGguUEkvMTgwOwogIGNvbnN0IGRMYXQgPSB0b1JhZChtMlswXS1tMVswXSk7IGNvbnN0IGRMb24gPSB0b1JhZChtMlsxXS1tMVsxXSk7CiAgY29uc3QgbGF0MSA9IHRvUmFkKG0xWzBdKTsgY29uc3QgbGF0MiA9IHRvUmFkKG0yWzBdKTsKICBjb25zdCBhID0gTWF0aC5zaW4oZExhdC8yKSoqMiArIE1hdGguY29zKGxhdDEpKk1hdGguY29zKGxhdDIpKk1hdGguc2luKGRMb24vMikqKjI7CiAgcmV0dXJuIDIqUipNYXRoLmFzaW4oTWF0aC5zcXJ0KGEpKTsKfQpmdW5jdGlvbiBpbnRlcnBvbGF0ZUxhdExuZyhsaW5lTGF0TG5nLCBuKXsKICBsZXQgc2VnTGVucz1bXSxjdW09WzBdOyBmb3IobGV0IGk9MTtpPGxpbmVMYXRMbmcubGVuZ3RoO2krKyl7IHNlZ0xlbnNbaS0xXT1oYXZlcnNpbmUobGluZUxhdExuZ1tpLTFdLGxpbmVMYXRMbmdbaV0pOyBjdW1baV09Y3VtW2ktMV0rc2VnTGVuc1tpLTFdOyB9CiAgY29uc3QgdG90YWw9Y3VtW2N1bS5sZW5ndGgtMV07IGNvbnN0IG91dD1bXTsKICBmb3IobGV0IGk9MDtpPG47aSsrKXsgY29uc3QgZD0oaS8obi0xKSkqdG90YWw7IGxldCBzPTA7IHdoaWxlKHM8c2VnTGVucy5sZW5ndGgmJmN1bVtzKzFdPGQpIHMrKzsgY29uc3QgcmVtYWluPWQtY3VtW3NdOyBjb25zdCB0PXNlZ0xlbnNbc109PT0wPzA6cmVtYWluL3NlZ0xlbnNbc107CiAgICBjb25zdCBwMD1saW5lTGF0TG5nW3NdLHAxPWxpbmVMYXRMbmdbcysxXTsgb3V0LnB1c2goW3AwWzBdKyhwMVswXS1wMFswXSkqdCxwMFsxXSsocDFbMV0tcDBbMV0pKnQsZF0pOyB9CiAgcmV0dXJuIHtwdHM6b3V0LHRvdGFsfTsKfQoKZnVuY3Rpb24gc2V0U3RhdHModG90YWxNZXRlcnMsIGVsZXZzKXsKICBjb25zdCBmdCA9IHRvdGFsTWV0ZXJzICogMy4yODA4NDsKICBsZXQgZ2Fpbj0wLCBsb3NzPTA7IGZvcihsZXQgaT0xO2k8ZWxldnMubGVuZ3RoO2krKyl7IGNvbnN0IGQ9ZWxldnNbaV0tZWxldnNbaS0xXTsgaWYoZD4wKSBnYWluKz1kOyBlbHNlIGxvc3MrPS1kOyB9CiAgY29uc3Qgc3RhcnQgPSBlbGV2c1swXTsgY29uc3QgZW5kID0gZWxldnNbZWxldnMubGVuZ3RoLTFdOwogIGNvbnN0IGhlYWQgPSBNYXRoLm1heCgwLCBzdGFydCAtIGVuZCk7CiAgY29uc3QgYXZnU2xvcGUgPSBoZWFkIC8gKGZ0fHwxKSAqIDEwMDsKICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGVuJykuaW5uZXJUZXh0ID0gZnQudG9GaXhlZCgwKSsnIGZ0JzsKICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnejAnKS5pbm5lclRleHQgPSBzdGFydC50b0ZpeGVkKDApKycgZnQnOwogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd6MScpLmlubmVyVGV4dCA9IGVuZC50b0ZpeGVkKDApKycgZnQnOwogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkcm9wJykuaW5uZXJUZXh0ID0gaGVhZC50b0ZpeGVkKDApKycgZnQnOwogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzbG9wZScpLmlubmVyVGV4dCA9IGF2Z1Nsb3BlLnRvRml4ZWQoMSkrJyAlJzsKICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FpbicpLmlubmVyVGV4dCA9IGdhaW4udG9GaXhlZCgwKSsnIGZ0JzsKICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9zcycpLmlubmVyVGV4dCA9IGxvc3MudG9GaXhlZCgwKSsnIGZ0JzsKICBjb21wdXRlUG93ZXIoaGVhZCk7Cn0KCi8vIFRocm90dGxlZCBoZWxwZXJzCmFzeW5jIGZ1bmN0aW9uIHRocm90dGxlTWFwKGl0ZW1zLCBsaW1pdCwgZm4pewogIGNvbnN0IHJlc3VsdHMgPSBuZXcgQXJyYXkoaXRlbXMubGVuZ3RoKTsKICBsZXQgaSA9IDA7CiAgY29uc3Qgd29ya2VycyA9IG5ldyBBcnJheShsaW1pdCkuZmlsbCgwKS5tYXAoYXN5bmMgKCkgPT4gewogICAgd2hpbGUgKGkgPCBpdGVtcy5sZW5ndGgpIHsKICAgICAgY29uc3QgaWR4ID0gaSsrOwogICAgICB0cnkgeyByZXN1bHRzW2lkeF0gPSBhd2FpdCBmbihpdGVtc1tpZHhdLCBpZHgpOyB9IGNhdGNoKGUpeyByZXN1bHRzW2lkeF0gPSBudWxsOyB9CiAgICB9CiAgfSk7CiAgYXdhaXQgUHJvbWlzZS5hbGwod29ya2Vycyk7CiAgcmV0dXJuIHJlc3VsdHM7Cn0KCi8vIC0tLSBMb2NhbCBMaURBUiBzYW1wbGluZyAod29ya3MgZm9yIHN0YWNrOiB1c2VzIGJhbmQgMCBhcyBEVE0pIC0tLQphc3luYyBmdW5jdGlvbiBzYW1wbGVMb2NhbERUTShjb29yZHMgLyogW1tsYXQsIGxvbl0sIC4uLl0gKi8pewogIGlmKCFsb2NhbERUTSkgdGhyb3cgbmV3IEVycm9yKCdObyBsb2NhbCBEVE0gbG9hZGVkJyk7CiAgLy8gVHJ5IHRvIGRldGVjdCBFUFNHIGluIGdlb3Jhc3RlciBwcm9qZWN0aW9uCiAgbGV0IHRhcmdldEVQU0cgPSBudWxsOwogIGNvbnN0IHByb2ogPSBsb2NhbERUTS5wcm9qZWN0aW9uOwogIGlmIChwcm9qICYmIHR5cGVvZiBwcm9qID09PSAnc3RyaW5nJykgewogICAgY29uc3QgbSA9IHByb2oubWF0Y2goL0VQU0c6XGQrL2kpOwogICAgaWYgKG0pIHRhcmdldEVQU0cgPSBtWzBdLnRvVXBwZXJDYXNlKCk7CiAgfQogIGNvbnN0IHRyYW5zZm9ybSA9IChsb24sIGxhdCkgPT4gdGFyZ2V0RVBTRyA/IHByb2o0KCdFUFNHOjQzMjYnLCB0YXJnZXRFUFNHLCBbbG9uLCBsYXRdKSA6IFtsb24sIGxhdF07CiAgY29uc3Qgb3V0ID0gYXdhaXQgdGhyb3R0bGVNYXAoY29vcmRzLCAxMCwgYXN5bmMgKFtsYXQsIGxvbl0pID0+IHsKICAgIHRyeSB7CiAgICAgIGNvbnN0IFt4LCB5XSA9IHRyYW5zZm9ybShsb24sIGxhdCk7CiAgICAgIGNvbnN0IHYgPSBhd2FpdCBnZW9ibGF6ZS5pZGVudGlmeShsb2NhbERUTSwgW3gsIHldKTsKICAgICAgY29uc3QgdmFsID0gQXJyYXkuaXNBcnJheSh2KSA/IHZbMF0gOiB2OyAvLyBiYW5kIDAgaXMgRFRNCiAgICAgIHJldHVybiAodmFsPT1udWxsIHx8IGlzTmFOKHZhbCkpID8gbnVsbCA6IE51bWJlcih2YWwpOwogICAgfSBjYXRjaChlKXsgcmV0dXJuIG51bGw7IH0KICB9KTsKICAvLyBGb3J3YXJkL2JhY2tmaWxsIG51bGxzIGlmIGFueQogIGZvcihsZXQgaT0wO2k8b3V0Lmxlbmd0aDtpKyspIGlmKG91dFtpXT09bnVsbCkgb3V0W2ldPShvdXRbaS0xXT8/bnVsbCk7CiAgZm9yKGxldCBpPW91dC5sZW5ndGgtMTtpPj0wO2ktLSkgaWYob3V0W2ldPT1udWxsKSBvdXRbaV09KG91dFtpKzFdPz8wKTsKICByZXR1cm4gb3V0Owp9Cgphc3luYyBmdW5jdGlvbiBzYW1wbGVFUFFTKGNvb3JkcyAvKiBbW2xhdCwgbG9uXSwgLi4uXSAqLyl7CiAgcmV0dXJuIGF3YWl0IHRocm90dGxlTWFwKGNvb3JkcywgOCwgYXN5bmMgKFtsYXQsIGxvbl0pID0+IGF3YWl0IGVwcXNGZWV0KGxvbiwgbGF0KSk7Cn0KCmFzeW5jIGZ1bmN0aW9uIHByb2ZpbGVGb3JQb2x5bGluZShwb2x5KXsKICBjb25zdCBsYXRsbmdzID0gcG9seS5nZXRMYXRMbmdzKCkubWFwKHAgPT4gW3AubGF0LCBwLmxuZ10pOwogIGlmKGxhdGxuZ3MubGVuZ3RoIDwgMil7IGFsZXJ0KCdBZGQgbW9yZSBwb2ludHMgdG8gdGhlIGxpbmUuJyk7IHJldHVybjsgfQogIGNvbnN0IE4gPSBNYXRoLm1pbigyNDAsIE1hdGgubWF4KDgwLCBNYXRoLmZsb29yKGxhdGxuZ3MubGVuZ3RoKjUwKSkpOwogIGNvbnN0IHsgcHRzLCB0b3RhbCB9ID0gaW50ZXJwb2xhdGVMYXRMbmcobGF0bG5ncywgTik7CiAgY29uc3QgY29vcmRzID0gcHRzLm1hcCgoW2xhdCwgbG9uXSkgPT4gW2xhdCwgbG9uXSk7CgogIGNvbnN0IHVzZUxvY2FsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZUxvY2FsTGlkYXInKS5jaGVja2VkICYmICEhbG9jYWxEVE07CiAgbGV0IGVsZXZzID0gbnVsbDsgbGV0IHNvdXJjZUxhYmVsID0gJyc7CiAgaWYodXNlTG9jYWwpewogICAgdHJ5IHsgZWxldnMgPSBhd2FpdCBzYW1wbGVMb2NhbERUTShjb29yZHMpOyBzb3VyY2VMYWJlbCA9ICdMb2NhbCBMaURBUic7IH0KICAgIGNhdGNoKGUpeyBjb25zb2xlLndhcm4oJ0xvY2FsIExpREFSIHNhbXBsaW5nIGZhaWxlZCwgZmFsbGluZyBiYWNrIHRvIEVQUVMnLCBlKTsgfQogIH0KICBpZighZWxldnMgfHwgZWxldnMuc29tZSh2ID0+IHY9PW51bGwpKSB7IGVsZXZzID0gYXdhaXQgc2FtcGxlRVBRUyhjb29yZHMpOyBzb3VyY2VMYWJlbCA9ICdVU0dTIEVQUVMnOyB9CgogIGNvbnN0IGxhYmVscyA9IHB0cy5tYXAocCA9PiAocFsyXSozLjI4MDg0KS50b0ZpeGVkKDApKTsKICBjaGFydC5kYXRhLmxhYmVscyA9IGxhYmVsczsKICBjaGFydC5kYXRhLmRhdGFzZXRzWzBdLmRhdGEgPSBlbGV2czsKICBjaGFydC5kYXRhLmRhdGFzZXRzWzBdLmxhYmVsID0gYEVsZXZhdGlvbiAoZnQpIOKAlCAke3NvdXJjZUxhYmVsfWA7CiAgY2hhcnQudXBkYXRlKCk7CiAgc2V0U3RhdHModG90YWwsIGVsZXZzKTsKfQoKLy8gUG93ZXIgY2FsYyAoZmxvdyBpbiBjZnMsIGhlYWQgaW4gZnQpCmZ1bmN0aW9uIGNvbXB1dGVQb3dlcihoZWFkRnQpewogIGNvbnN0IGZsb3dDRlMgPSBwYXJzZUZsb2F0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmbG93Q0ZTJykudmFsdWUgfHwgJzAnKSB8fCAwOwogIGNvbnN0IGV0YSA9IE1hdGgubWluKDEsIE1hdGgubWF4KDAsIHBhcnNlRmxvYXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V0YScpLnZhbHVlIHx8ICcwLjcnKSkpOwogIGNvbnN0IFEgPSBmbG93Q0ZTICogMC4wMjgzMTY4NDY1OTI7IC8vIG1eMy9zCiAgY29uc3QgSCA9IGhlYWRGdCAqIDAuMzA0ODsgICAgICAgICAgLy8gbQogIGNvbnN0IHJobyA9IDEwMDAsIGcgPSA5LjgwNjY1OwogIGNvbnN0IFAgPSBldGEgKiByaG8gKiBnICogUSAqIEg7ICAgIC8vIFdhdHRzCiAgY29uc3Qga1cgPSBQIC8gMTAwMDsKICBjb25zdCBocCA9IFAgLyA3NDUuNjk5ODcyOwogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3dlclcnKS5pbm5lclRleHQgPSAoaXNGaW5pdGUoUCk/UDowKS50b0ZpeGVkKDApKycgVyc7CiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bvd2Vya1cnKS5pbm5lclRleHQgPSAoaXNGaW5pdGUoa1cpP2tXOjApLnRvRml4ZWQoMikrJyBrVyc7CiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hwJykuaW5uZXJUZXh0ID0gKGlzRmluaXRlKGhwKT9ocDowKS50b0ZpeGVkKDIpKycgaHAnOwoKICBjb25zdCBkdXR5ID0gTWF0aC5taW4oMSwgTWF0aC5tYXgoMCwgcGFyc2VGbG9hdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHV0eScpLnZhbHVlIHx8ICcxJykpKTsKICBjb25zdCBiYXR0ZXJ5V2ggPSBNYXRoLm1heCgwLCBwYXJzZUZsb2F0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYXR0ZXJ5V2gnKS52YWx1ZSB8fCAnMCcpKTsKICBjb25zdCBkYWlseVdoID0gKFAgKiAyNCkgKiBkdXR5OyBjb25zdCBkYWlseUtXaCA9IGRhaWx5V2ggLyAxMDAwOwogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYWlseUtXaCcpLmlubmVyVGV4dCA9ICdEYWlseTogJyArIChpc0Zpbml0ZShkYWlseUtXaCk/ZGFpbHlLV2g6MCkudG9GaXhlZCgyKSArICcga1doJzsKICBjb25zdCBob3VycyA9IFAgPiAwID8gKGJhdHRlcnlXaCAvIFApIDogSW5maW5pdHk7CiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpbWVUb0ZpbGwnKS5pbm5lclRleHQgPSAnQ2hhcmdlIHRpbWU6ICcgKyAoaXNGaW5pdGUoaG91cnMpP2hvdXJzLnRvRml4ZWQoMSk6J+KAkycpICsgJyBoJzsKfQoKLy8gV2lyZSBjb250cm9scwpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjYWxjJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgaWYoYWN0aXZlKXsgcHJvZmlsZUZvclBvbHlsaW5lKGFjdGl2ZSk7IHJldHVybjsgfQogIGNvbnN0IHBvbHlzID0gW107IGRyYXduLmVhY2hMYXllcih4ID0+IHsgaWYoeCBpbnN0YW5jZW9mIEwuUG9seWxpbmUgJiYgISh4IGluc3RhbmNlb2YgTC5Qb2x5Z29uKSkgcG9seXMucHVzaCh4KTsgfSk7CiAgY29uc3QgbGFzdCA9IHBvbHlzW3BvbHlzLmxlbmd0aC0xXTsKICBpZihsYXN0KXsgc2V0QWN0aXZlKGxhc3QpOyBwcm9maWxlRm9yUG9seWxpbmUobGFzdCk7IH0KICBlbHNlIGFsZXJ0KCdEcmF3IGEgbGluZSAoaW50YWtlIOKGkiBwb3dlcmhvdXNlKSB3aXRoIHRoZSBwZW5jaWwgdG9vbC4nKTsKfSk7Cgpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xlYXInKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICBkcmF3bi5jbGVhckxheWVycygpOyB2ZWdHcm91cC5jbGVhckxheWVycygpOyBlbmRwb2ludHMuY2xlYXJMYXllcnMoKTsgaW50YWtlTWFya2VyPW51bGw7IHBvd2VyaG91c2VNYXJrZXI9bnVsbDsKICBjaGFydC5kYXRhLmxhYmVscz1bXTsgY2hhcnQuZGF0YS5kYXRhc2V0c1swXS5kYXRhPVtdOyBjaGFydC51cGRhdGUoKTsKICBbJ2xlbicsJ3owJywnejEnLCdkcm9wJywnc2xvcGUnLCdnYWluJywnbG9zcycsJ2FjdGl2ZU5hbWUnLCdwb3dlclcnLCdwb3dlcmtXJywnaHAnLCdkYWlseUtXaCcsJ3RpbWVUb0ZpbGwnXS5mb3JFYWNoKGlkPT5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkuaW5uZXJUZXh0PSfigJMnKTsKICBhY3RpdmUgPSBudWxsOyBsaW5lU2VxID0gMDsKfSk7Cgpkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2hpcCcpLmZvckVhY2goY2hpcCA9PiBjaGlwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gewogIGNvbnN0IHYgPSBwYXJzZUZsb2F0KGNoaXAudGV4dENvbnRlbnQudHJpbSgpKTsKICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmxvd0NGUycpLnZhbHVlID0gdi50b0ZpeGVkKDIpOwogIGNvbnN0IGhlYWRGdCA9IHBhcnNlRmxvYXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Ryb3AnKS5pbm5lclRleHQpIHx8IDA7IGNvbXB1dGVQb3dlcihoZWFkRnQpOwp9KSk7ClsnZmxvd0NGUycsJ2V0YScsJ2JhdHRlcnlXaCcsJ2R1dHknXS5mb3JFYWNoKGlkID0+IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCcnK2lkKS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICBjb25zdCBoZWFkRnQgPSBwYXJzZUZsb2F0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkcm9wJykuaW5uZXJUZXh0KSB8fCAwOyBjb21wdXRlUG93ZXIoaGVhZEZ0KTsKfSkpOwoKLy8gLS0tIFVwbG9hZCBHZW9KU09OIGxheWVycyAmIHJvbGVzIC0tLQpjb25zdCB1cGxvYWRlZExheWVycyA9IFtdOyAvLyB7bGF5ZXIsIG5hbWUsIHJvbGUsIGNvbG9yLCBnan0KZnVuY3Rpb24gcmFuZG9tQ29sb3IoKSB7CiAgY29uc3QgaCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDM2MCk7CiAgcmV0dXJuIGBoc2woJHtofWRlZyA3MCUgNDUlKWA7Cn0KZnVuY3Rpb24gYWRkR2VvSnNvblRvTWFwKGdqLCBuYW1lLCByb2xlKXsKICBjb25zdCBjb2xvciA9IHJhbmRvbUNvbG9yKCk7CiAgY29uc3Qgc3R5bGUgPSB7IGNvbG9yLCB3ZWlnaHQ6Miwgb3BhY2l0eTowLjksIGZpbGxPcGFjaXR5OjAuMTIgfTsKICBjb25zdCBsYXllciA9IEwuZ2VvSlNPTihnaiwgewogICAgc3R5bGU6ICgpID0+IHN0eWxlLAogICAgb25FYWNoRmVhdHVyZTogKGZlYXR1cmUsIGx5cikgPT4gewogICAgICBjb25zdCBwcm9wcyA9IE9iamVjdC5lbnRyaWVzKGZlYXR1cmUucHJvcGVydGllcyB8fCB7fSkubWFwKChbaywgdl0pID0+IGA8ZGl2PjxiPiR7a308L2I+OiAke1N0cmluZyh2KX08L2Rpdj5gKS5qb2luKCIiKTsKICAgICAgbHlyLmJpbmRQb3B1cChgPGRpdiBjbGFzcz0nc21hbGwnPjxiPiR7bmFtZX08L2I+JHtwcm9wcyA/IGA8aHIvPiR7cHJvcHN9YCA6ICIifTwvZGl2PmApOwogICAgfSwKICAgIHBvaW50VG9MYXllcjogKGZlYXR1cmUsIGxhdGxuZykgPT4gTC5jaXJjbGVNYXJrZXIobGF0bG5nLCB7IC4uLnN0eWxlLCByYWRpdXM6IDUgfSksCiAgfSkuYWRkVG8obWFwKTsKICB1cGxvYWRlZExheWVycy5wdXNoKHsgbGF5ZXIsIG5hbWUsIHJvbGUsIGNvbG9yLCBnaiB9KTsKICByZWZyZXNoVXBsb2FkZWRMaXN0KCk7Cn0KCmZ1bmN0aW9uIHJlZnJlc2hVcGxvYWRlZExpc3QoKXsKICBsZXQgc2VwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VwbG9hZGVkU2VwJyk7CiAgaWYoIXNlcCl7CiAgICBzZXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsgc2VwLmlkPSd1cGxvYWRlZFNlcCc7IHNlcC5jbGFzc05hbWU9J2RpdmlkZXInOyBsYXllckxpc3QuYXBwZW5kQ2hpbGQoc2VwKTsKICAgIGNvbnN0IGggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsgaC5pbm5lckhUTUwgPSAnPGI+VXBsb2FkZWQgbGF5ZXJzPC9iPic7IGxheWVyTGlzdC5hcHBlbmRDaGlsZChoKTsKICB9CiAgY29uc3QgZXhpc3RpbmcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXBsb2FkZWRMaXN0JykgfHwgKCgpPT57IGNvbnN0IGQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7IGQuaWQ9J3VwbG9hZGVkTGlzdCc7IGxheWVyTGlzdC5hcHBlbmRDaGlsZChkKTsgcmV0dXJuIGQ7IH0pKCk7CiAgZXhpc3RpbmcuaW5uZXJIVE1MID0gJyc7CiAgdXBsb2FkZWRMYXllcnMuZm9yRWFjaCgoZW50cnksIGlkeCkgPT4gewogICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICByb3cuY2xhc3NOYW1lID0gJ2xheWVyLXJvdyc7CiAgICByb3cuaW5uZXJIVE1MID0gYDxkaXYgc3R5bGU9IndpZHRoOjEwcHg7aGVpZ2h0OjEwcHg7Ym9yZGVyLXJhZGl1czoycHg7YmFja2dyb3VuZDoke2VudHJ5LmNvbG9yfTsiPjwvZGl2PgogICAgICA8ZGl2PiR7ZW50cnkubmFtZX0gPHNwYW4gY2xhc3M9InNtYWxsIj4oJHtlbnRyeS5yb2xlfSk8L3NwYW4+PC9kaXY+CiAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBzZWNvbmRhcnkiIGRhdGEtdmlzPSIke2lkeH0iPlRvZ2dsZTwvYnV0dG9uPgogICAgICA8YnV0dG9uIGNsYXNzPSJidG4gZ2hvc3QiIGRhdGEtZGVsPSIke2lkeH0iPlJlbW92ZTwvYnV0dG9uPmA7CiAgICBleGlzdGluZy5hcHBlbmRDaGlsZChyb3cpOwogIH0pOwogIGV4aXN0aW5nLnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbltkYXRhLXZpc10nKS5mb3JFYWNoKGJ0biA9PiBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHsKICAgIGNvbnN0IGkgPSArZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXZpcycpOwogICAgY29uc3QgZW50ID0gdXBsb2FkZWRMYXllcnNbaV07CiAgICBpZiAoIWVudCkgcmV0dXJuOwogICAgaWYgKG1hcC5oYXNMYXllcihlbnQubGF5ZXIpKSBtYXAucmVtb3ZlTGF5ZXIoZW50LmxheWVyKTsgZWxzZSBlbnQubGF5ZXIuYWRkVG8obWFwKTsKICB9KSk7CiAgZXhpc3RpbmcucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uW2RhdGEtZGVsXScpLmZvckVhY2goYnRuID0+IGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4gewogICAgY29uc3QgaSA9ICtlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZGVsJyk7CiAgICBjb25zdCBlbnQgPSB1cGxvYWRlZExheWVyc1tpXTsKICAgIGlmICghZW50KSByZXR1cm47CiAgICBtYXAucmVtb3ZlTGF5ZXIoZW50LmxheWVyKTsKICAgIHVwbG9hZGVkTGF5ZXJzLnNwbGljZShpLDEpOwogICAgcmVmcmVzaFVwbG9hZGVkTGlzdCgpOwogIH0pKTsKfQoKZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dlb2pzb25GaWxlJykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgYXN5bmMgKGV2dCkgPT4gewogIGNvbnN0IGZpbGUgPSBldnQudGFyZ2V0LmZpbGVzWzBdOwogIGlmICghZmlsZSkgcmV0dXJuOwogIGNvbnN0IG5hbWUgPSBmaWxlLm5hbWUucmVwbGFjZSgvXC4oZ2VvKT9qc29uJC9pLCAnJyk7CiAgY29uc3QgdGV4dCA9IGF3YWl0IGZpbGUudGV4dCgpOwogIHRyeSB7CiAgICBjb25zdCBnaiA9IEpTT04ucGFyc2UodGV4dCk7CiAgICBhZGRHZW9Kc29uVG9NYXAoZ2osIG5hbWUsICdjdXN0b20nKTsKICB9IGNhdGNoIChlcnIpIHsKICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsKICAgIGFsZXJ0KCdJbnZhbGlkIEdlb0pTT04uJyk7CiAgfQp9KTsKCmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhc3NpZ25Sb2xlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgY29uc3Qgc2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xheWVyUm9sZScpLnZhbHVlOwogIGNvbnN0IG5hbWVPdmVycmlkZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYXllck5hbWUnKS52YWx1ZS50cmltKCk7CiAgY29uc3QgbGFzdCA9IHVwbG9hZGVkTGF5ZXJzW3VwbG9hZGVkTGF5ZXJzLmxlbmd0aCAtIDFdOwogIGlmICghbGFzdCkgeyBhbGVydCgnVXBsb2FkIGEgbGF5ZXIgZmlyc3QuJyk7IHJldHVybjsgfQogIGxhc3Qucm9sZSA9IHNlbDsKICBpZiAobmFtZU92ZXJyaWRlKSBsYXN0Lm5hbWUgPSBuYW1lT3ZlcnJpZGU7CiAgcmVmcmVzaFVwbG9hZGVkTGlzdCgpOwp9KTsKCi8vIEV4cG9ydC9JbXBvcnQgdXNlciBkcmF3aW5ncyAobm90ZXMpCmZ1bmN0aW9uIGV4cG9ydE5vdGVzKCl7CiAgY29uc3QgZmVhdHMgPSBbXTsKICBkcmF3bi5lYWNoTGF5ZXIobCA9PiB7IHRyeSB7IGZlYXRzLnB1c2gobC50b0dlb0pTT04oKSk7IH0gY2F0Y2goZSl7fSB9KTsKICB2ZWdHcm91cC5lYWNoTGF5ZXIobCA9PiB7IHRyeSB7IGNvbnN0IGYgPSBsLnRvR2VvSlNPTigpOyBmLnByb3BlcnRpZXMgPSBPYmplY3QuYXNzaWduKHt9LCBmLnByb3BlcnRpZXN8fHt9LCB7bGF5ZXI6J3ZlZ2V0YXRpb24nfSk7IGZlYXRzLnB1c2goZik7IH0gY2F0Y2goZSl7fSB9KTsKICBjb25zdCBmYyA9IHsgdHlwZTonRmVhdHVyZUNvbGxlY3Rpb24nLCBmZWF0dXJlczogZmVhdHMgfTsKICBjb25zdCBibG9iID0gbmV3IEJsb2IoW0pTT04uc3RyaW5naWZ5KGZjLCBudWxsLCAyKV0sIHt0eXBlOidhcHBsaWNhdGlvbi9qc29uJ30pOwogIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7IGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7IGEuaHJlZiA9IHVybDsgYS5kb3dubG9hZCA9ICdlaDEwMDMwMDZfYW5ub3RhdGlvbnNfdjUuMi44Lmdlb2pzb24nOyBhLmNsaWNrKCk7IFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTsKfQpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwb3J0Tm90ZXMnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV4cG9ydE5vdGVzKTsKZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltcG9ydE5vdGVzJykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgYXN5bmMgKGV2dCkgPT4gewogIGNvbnN0IGZpbGUgPSBldnQudGFyZ2V0LmZpbGVzWzBdOwogIGlmICghZmlsZSkgcmV0dXJuOwogIHRyeSB7CiAgICBjb25zdCBnaiA9IEpTT04ucGFyc2UoYXdhaXQgZmlsZS50ZXh0KCkpOwogICAgZHJhd24uY2xlYXJMYXllcnMoKTsgdmVnR3JvdXAuY2xlYXJMYXllcnMoKTsKICAgIEwuZ2VvSlNPTihnaikuZWFjaExheWVyKChsYXllcikgPT4gZHJhd24uYWRkTGF5ZXIobGF5ZXIpKTsKICB9IGNhdGNoIChlcnIpIHsKICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsKICAgIGFsZXJ0KCdCYWQgR2VvSlNPTi4nKTsKICB9Cn0pOwoKLy8gLS0tIERyYXdpbmcgbG9naWMgLS0tCmxldCBsaW5lU2VxID0gMCwgYWN0aXZlID0gbnVsbDsKZnVuY3Rpb24gbmFtZUxpbmUobCl7IGxpbmVTZXErKzsgbC5fbGluZU5hbWUgPSAnTGluZSAnICsgbGluZVNlcTsgcmV0dXJuIGwuX2xpbmVOYW1lOyB9CmZ1bmN0aW9uIHNldEFjdGl2ZShsKXsgYWN0aXZlID0gbDsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FjdGl2ZU5hbWUnKS5pbm5lclRleHQgPSBsPyAobC5fbGluZU5hbWUgfHwgJ0xpbmUnKSA6ICfigJMnOyBoaWdobGlnaHQobCk7IH0KZnVuY3Rpb24gaGlnaGxpZ2h0KGxpbmUpewogIGRyYXduLmVhY2hMYXllcihsID0+IHsgaWYobC5zZXRTdHlsZSl7IGwuc2V0U3R5bGUoeyBjb2xvcjogdmVnR3JvdXAuaGFzTGF5ZXIobCkgPyAnIzdlMjJjZScgOiAnI2UyZThmMCcsIHdlaWdodDozLCBkYXNoQXJyYXk6bnVsbCB9KTsgfSB9KTsKICBpZihsaW5lICYmIGxpbmUuc2V0U3R5bGUpeyBsaW5lLnNldFN0eWxlKHsgY29sb3I6IHZlZ0dyb3VwLmhhc0xheWVyKGxpbmUpID8gJyM3ZTIyY2UnIDogJyNmNTllMGInLCB3ZWlnaHQ6NSwgZGFzaEFycmF5Oic2LDQnIH0pOyB9Cn0KCmNvbnN0IGludGFrZUljb24gPSBMLmRpdkljb24oeyBjbGFzc05hbWU6ICdpbnRha2UtaWNvbicsIGh0bWw6ICc8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiMyNTYzZWI7Y29sb3I6I2ZmZjtwYWRkaW5nOjNweCA2cHg7Ym9yZGVyLXJhZGl1czo2cHg7Ym9yZGVyOjFweCBzb2xpZCAjMWQ0ZWQ4OyI+SW50YWtlPC9kaXY+JyB9KTsKY29uc3QgcG93ZXJob3VzZUljb24gPSBMLmRpdkljb24oeyBjbGFzc05hbWU6ICdwaC1pY29uJywgaHRtbDogJzxkaXYgc3R5bGU9ImJhY2tncm91bmQ6IzA2NWY0Njtjb2xvcjojZmZmO3BhZGRpbmc6M3B4IDZweDtib3JkZXItcmFkaXVzOjZweDtib3JkZXI6MXB4IHNvbGlkICMwNjRlM2I7Ij5Qb3dlcmhvdXNlPC9kaXY+JyB9KTsKbGV0IGludGFrZU1hcmtlciA9IG51bGwsIHBvd2VyaG91c2VNYXJrZXIgPSBudWxsOwpmdW5jdGlvbiB1cGRhdGVFbmRwb2ludHMobGluZSl7CiAgdHJ5ewogICAgY29uc3QgbGF0bG5ncyA9IGxpbmUuZ2V0TGF0TG5ncygpOwogICAgaWYoIWxhdGxuZ3MgfHwgbGF0bG5ncy5sZW5ndGggPCAyKSByZXR1cm47CiAgICBjb25zdCBzdGFydCA9IGxhdGxuZ3NbMF0sIGVuZCA9IGxhdGxuZ3NbbGF0bG5ncy5sZW5ndGggLSAxXTsKICAgIGlmKCFpbnRha2VNYXJrZXIpeyBpbnRha2VNYXJrZXIgPSBMLm1hcmtlcihzdGFydCwgeyBpY29uOiBpbnRha2VJY29uIH0pLmFkZFRvKGVuZHBvaW50cyk7IH0gZWxzZSB7IGludGFrZU1hcmtlci5zZXRMYXRMbmcoc3RhcnQpOyB9CiAgICBpZighcG93ZXJob3VzZU1hcmtlcil7IHBvd2VyaG91c2VNYXJrZXIgPSBMLm1hcmtlcihlbmQsIHsgaWNvbjogcG93ZXJob3VzZUljb24gfSkuYWRkVG8oZW5kcG9pbnRzKTsgfSBlbHNlIHsgcG93ZXJob3VzZU1hcmtlci5zZXRMYXRMbmcoZW5kKTsgfQogIH1jYXRjaChlKXt9Cn0KCm1hcC5vbigncG06Y3JlYXRlJywgZSA9PiB7CiAgY29uc3QgbCA9IGUubGF5ZXI7CiAgaWYobCBpbnN0YW5jZW9mIEwuUG9seWxpbmUgJiYgIShsIGluc3RhbmNlb2YgTC5Qb2x5Z29uKSl7CiAgICBkcmF3bi5hZGRMYXllcihsKTsKICAgIG5hbWVMaW5lKGwpOyBzZXRBY3RpdmUobCk7CiAgICB0cnkgeyBsLmJpbmRUb29sdGlwKGxhYmVsRGlzdGFuY2UobCksIHtwZXJtYW5lbnQ6dHJ1ZX0pLm9wZW5Ub29sdGlwKCk7IH0gY2F0Y2goZXJyKXt9CiAgICBsLm9uKCdjbGljaycsICgpPT57IHNldEFjdGl2ZShsKTsgcHJvZmlsZUZvclBvbHlsaW5lKGwpOyB9KTsKICAgIHVwZGF0ZUVuZHBvaW50cyhsKTsKICAgIHByb2ZpbGVGb3JQb2x5bGluZShsKTsKICB9IGVsc2UgaWYgKGwgaW5zdGFuY2VvZiBMLlBvbHlnb24pIHsKICAgIGNvbnN0IHRhcmdldCA9IHZlZ01vZGUgPyB2ZWdHcm91cCA6IGRyYXduOwogICAgdGFyZ2V0LmFkZExheWVyKGwpOwogICAgY29uc3Qgc3R5bGUgPSB2ZWdNb2RlID8geyBjb2xvcjonIzdlMjJjZScsIGZpbGxDb2xvcjonIzdlMjJjZScsIGZpbGxPcGFjaXR5OjAuMjUgfSA6IHsgY29sb3I6JyNlMmU4ZjAnLCBmaWxsT3BhY2l0eTowLjE1IH07CiAgICBpZihsLnNldFN0eWxlKSBsLnNldFN0eWxlKHN0eWxlKTsKICAgIHRyeSB7IGwuYmluZFRvb2x0aXAobGFiZWxBcmVhRm9yUG9seWdvbihsKSwge3Blcm1hbmVudDp0cnVlfSkub3BlblRvb2x0aXAoKTsgfSBjYXRjaChlcnIpe30KICB9IGVsc2UgaWYgKGwgaW5zdGFuY2VvZiBMLkNpcmNsZSkgewogICAgY29uc3QgdGFyZ2V0ID0gdmVnTW9kZSA/IHZlZ0dyb3VwIDogZHJhd247CiAgICB0YXJnZXQuYWRkTGF5ZXIobCk7CiAgICB0cnkgeyBsLmJpbmRUb29sdGlwKGxhYmVsQXJlYUZvckNpcmNsZShsKSwge3Blcm1hbmVudDp0cnVlfSkub3BlblRvb2x0aXAoKTsgfSBjYXRjaChlcnIpe30KICB9IGVsc2UgewogICAgZHJhd24uYWRkTGF5ZXIobCk7CiAgfQp9KTsKbWFwLm9uKCdwbTplZGl0JywgZSA9PiB7CiAgY29uc3QgbCA9IGUubGF5ZXI7CiAgaWYobCBpbnN0YW5jZW9mIEwuUG9seWxpbmUgJiYgIShsIGluc3RhbmNlb2YgTC5Qb2x5Z29uKSl7CiAgICBpZihsLmdldFRvb2x0aXApIGwuc2V0VG9vbHRpcENvbnRlbnQobGFiZWxEaXN0YW5jZShsKSk7CiAgICBpZihsID09PSBhY3RpdmUpeyB1cGRhdGVFbmRwb2ludHMobCk7IHByb2ZpbGVGb3JQb2x5bGluZShsKTsgfQogIH0gZWxzZSBpZiAobCBpbnN0YW5jZW9mIEwuUG9seWdvbikgewogICAgaWYobC5nZXRUb29sdGlwKSBsLnNldFRvb2x0aXBDb250ZW50KGxhYmVsQXJlYUZvclBvbHlnb24obCkpOwogIH0gZWxzZSBpZiAobCBpbnN0YW5jZW9mIEwuQ2lyY2xlKSB7CiAgICBpZihsLmdldFRvb2x0aXApIGwuc2V0VG9vbHRpcENvbnRlbnQobGFiZWxBcmVhRm9yQ2lyY2xlKGwpKTsKICB9Cn0pOwoKLy8gTGFiZWxzIGFuZCBtZWFzdXJlcwpmdW5jdGlvbiBsYWJlbERpc3RhbmNlKGxheWVyKXsKICB0cnkgewogICAgY29uc3QgY29vcmRzID0gKGxheWVyLmdldExhdExuZ3MoKS5mbGF0ID8gbGF5ZXIuZ2V0TGF0TG5ncygpLmZsYXQoKSA6IGxheWVyLmdldExhdExuZ3MoKSkubWFwKGxsID0+IFtsbC5sbmcsIGxsLmxhdF0pOwogICAgY29uc3QgbGluZSA9IHR1cmYubGluZVN0cmluZyhjb29yZHMpOwogICAgY29uc3QgbWV0ZXJzID0gdHVyZi5sZW5ndGgobGluZSwge3VuaXRzOidraWxvbWV0ZXJzJ30pICogMTAwMC4wOwogICAgcmV0dXJuIChtZXRlcnMqMy4yODA4NCkudG9GaXhlZCgwKSArICcgZnQnOwogIH0gY2F0Y2goZSl7IHJldHVybiAnJzsgfQp9CmZ1bmN0aW9uIGxhYmVsQXJlYUZvclBvbHlnb24obGF5ZXIpewogIHRyeSB7CiAgICBjb25zdCByaW5ncyA9IGxheWVyLmdldExhdExuZ3MoKVswXSB8fCBsYXllci5nZXRMYXRMbmdzKCk7CiAgICBjb25zdCBjb29yZHMgPSByaW5ncy5tYXAobGwgPT4gW2xsLmxuZywgbGwubGF0XSk7CiAgICBjb25zdCBwb2x5ID0gdHVyZi5wb2x5Z29uKFtbLi4uY29vcmRzLCBjb29yZHNbMF1dXSk7CiAgICBjb25zdCBzcW0gPSB0dXJmLmFyZWEocG9seSk7CiAgICByZXR1cm4gKHNxbS80MDQ2Ljg1NjQyKS50b0ZpeGVkKDMpICsgJyBhY3Jlcyc7CiAgfSBjYXRjaChlKXsgcmV0dXJuICcnOyB9Cn0KZnVuY3Rpb24gbGFiZWxBcmVhRm9yQ2lyY2xlKGxheWVyKXsKICB0cnkgewogICAgY29uc3QgYSA9IE1hdGguUEkgKiBNYXRoLnBvdyhsYXllci5nZXRSYWRpdXMoKSwgMik7CiAgICByZXR1cm4gKGEvNDA0Ni44NTY0MikudG9GaXhlZCgzKSArICcgYWNyZXMnOwogIH0gY2F0Y2goZSl7IHJldHVybiAnJzsgfQp9CgovLyAtLS0gQW5hbHl6ZXIgKHJ1bGUgY2hlY2tzKSAtLS0KZnVuY3Rpb24gdHVyZkZDRnJvbVJvbGUocm9sZSkgewogIGNvbnN0IGZlYXRzID0gW107CiAgdXBsb2FkZWRMYXllcnMuZmlsdGVyKGwgPT4gbC5yb2xlID09PSByb2xlKS5mb3JFYWNoKGwgPT4gZmVhdHMucHVzaCguLi5sLmdqLmZlYXR1cmVzKSk7CiAgcmV0dXJuIHR1cmYuZmVhdHVyZUNvbGxlY3Rpb24oZmVhdHMpOwp9CgpmdW5jdGlvbiBhbmFseXplU2VsZWN0ZWQoKXsKICBjb25zdCByZXBvcnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVwb3J0Jyk7CiAgcmVwb3J0LmlubmVySFRNTCA9ICcnOwoKICBjb25zdCB1c2VyRmVhdHMgPSBbXTsKICBkcmF3bi5lYWNoTGF5ZXIobCA9PiB7IHRyeSB7IHVzZXJGZWF0cy5wdXNoKGwudG9HZW9KU09OKCkpOyB9IGNhdGNoKGUpe30gfSk7CiAgY29uc3QgdXNlckZDID0gdHVyZi5mZWF0dXJlQ29sbGVjdGlvbih1c2VyRmVhdHMpOwoKICBjb25zdCBzdHJlYW1zID0gdHVyZkZDRnJvbVJvbGUoJ3N0cmVhbXMnKTsKICBjb25zdCBmbG9vZCA9IHR1cmZGQ0Zyb21Sb2xlKCdmbG9vZHBsYWluJyk7CiAgY29uc3Qgd2V0bGFuZHMgPSB0dXJmRkNGcm9tUm9sZSgnd2V0bGFuZHMnKTsKICBjb25zdCBzbG9wZXMgPSB0dXJmRkNGcm9tUm9sZSgnc2xvcGUnKTsKICBjb25zdCBhc3BlY3RzID0gdHVyZkZDRnJvbVJvbGUoJ2FzcGVjdCcpOwogIGNvbnN0IGJsYWNrYmVycmllcyA9IHR1cmZGQ0Zyb21Sb2xlKCdibGFja2JlcnJ5Jyk7CiAgY29uc3QgcGFyY2VsID0gdHVyZkZDRnJvbVJvbGUoJ3BhcmNlbCcpOwoKICB1c2VyRkMuZmVhdHVyZXMuZm9yRWFjaCgoZiwgaWR4KSA9PiB7CiAgICBjb25zdCBpZCA9IGYucHJvcGVydGllcz8uaWQgfHwgYGZlYXR1cmVfJHtpZHgrMX1gOwogICAgY29uc3QgdHlwZSA9IGYuZ2VvbWV0cnk/LnR5cGUgfHwgJz8nOwoKICAgIGNvbnN0IGNlbnRyb2lkID0gdHVyZi5jZW50cm9pZChmKTsKICAgIGNvbnN0IHB0ID0gY2VudHJvaWQ7CgogICAgY29uc3Qgbm90ZXMgPSBbXTsKCiAgICAvLyBTdHJlYW1zIHNldGJhY2sKICAgIGlmIChzdHJlYW1zLmZlYXR1cmVzLmxlbmd0aCkgewogICAgICBjb25zdCBuZWFyZXN0ID0gc3RyZWFtcy5mZWF0dXJlcy5tYXAoZyA9PiB0dXJmLm5lYXJlc3RQb2ludE9uTGluZShnLCBwdCkpLnNvcnQoKGEsYikgPT4gYS5wcm9wZXJ0aWVzLmRpc3QgLSBiLnByb3BlcnRpZXMuZGlzdClbMF07CiAgICAgIGlmIChuZWFyZXN0ICYmIG5lYXJlc3QucHJvcGVydGllcykgewogICAgICAgIGNvbnN0IGQgPSBuZWFyZXN0LnByb3BlcnRpZXMuZGlzdDsgLy8gbWV0ZXJzCiAgICAgICAgaWYgKGQgPCAxNS4yNCkgbm90ZXMucHVzaChg4pqg77iPIFdpdGhpbiAke2QudG9GaXhlZCgxKX0gbSBvZiBhIG1hcHBlZCBzdHJlYW0gKHRhcmdldCDiiaUgMTUuMiBtIC8gNTAgZnQpLmApOwogICAgICAgIGVsc2Ugbm90ZXMucHVzaChg4pyFICR7ZC50b0ZpeGVkKDEpfSBtIGZyb20gbmVhcmVzdCBzdHJlYW0uYCk7CiAgICAgIH0KICAgIH0KCiAgICAvLyBGbG9vZCAvIFdldGxhbmRzIGludGVyc2VjdHMKICAgIGZ1bmN0aW9uIGludGVyc2VjdHNBbnkoY29sbCwgbGFiZWwpIHsKICAgICAgY29uc3QgaGl0ID0gY29sbC5mZWF0dXJlcy5zb21lKGcgPT4gdHVyZi5ib29sZWFuSW50ZXJzZWN0cyhmLCBnKSk7CiAgICAgIGlmIChoaXQpIG5vdGVzLnB1c2goYOKaoO+4jyBJbnRlcnNlY3RzICR7bGFiZWx9LiBDb25zaWRlciBhbHRlcm5hdGUgc2l0aW5nIG9yIHBlcm1pdHMuYCk7CiAgICB9CiAgICBpZiAoZmxvb2QuZmVhdHVyZXMubGVuZ3RoKSBpbnRlcnNlY3RzQW55KGZsb29kLCAnZmxvb2RwbGFpbicpOwogICAgaWYgKHdldGxhbmRzLmZlYXR1cmVzLmxlbmd0aCkgaW50ZXJzZWN0c0FueSh3ZXRsYW5kcywgJ3dldGxhbmRzJyk7CgogICAgLy8gU2xvcGUgY2hlY2sgKGV4cGVjdCBwb2x5Z29ucyB3aXRoIHNsb3BlX3BjdCBwcm9wZXJ0eSkKICAgIGlmIChzbG9wZXMuZmVhdHVyZXMubGVuZ3RoKSB7CiAgICAgIGNvbnN0IGhpdHMgPSBzbG9wZXMuZmVhdHVyZXMuZmlsdGVyKGcgPT4gdHVyZi5ib29sZWFuSW50ZXJzZWN0cyhmLCBnKSk7CiAgICAgIGlmIChoaXRzLmxlbmd0aCkgewogICAgICAgIGNvbnN0IG1heFNsb3BlID0gTWF0aC5tYXgoLi4uaGl0cy5tYXAoZyA9PiBOdW1iZXIoZy5wcm9wZXJ0aWVzPy5zbG9wZV9wY3QgPz8gMCkpKTsKICAgICAgICBpZiAobWF4U2xvcGUgPj0gMzApIG5vdGVzLnB1c2goYOKaoO+4jyBNYXggc2xvcGUgaW4gZm9vdHByaW50IOKJiCAke21heFNsb3BlfSUgKOKJpTMwJSBpcyBzdGVlcCkuYCk7CiAgICAgICAgZWxzZSBub3Rlcy5wdXNoKGDinIUgU2xvcGVzIGluIGZvb3RwcmludCA8IDMwJSAobWF4IOKJiCAke21heFNsb3BlfSUpLmApOwogICAgICB9CiAgICB9CgogICAgLy8gQXNwZWN0IHByZWZlcmVuY2UKICAgIGlmIChhc3BlY3RzLmZlYXR1cmVzLmxlbmd0aCkgewogICAgICBjb25zdCBoaXQgPSBhc3BlY3RzLmZlYXR1cmVzLmZpbmQoZyA9PiB0dXJmLmJvb2xlYW5Qb2ludEluUG9seWdvbihwdCwgZykpOwogICAgICBpZiAoaGl0KSB7CiAgICAgICAgY29uc3QgYXNwZWN0ID0gU3RyaW5nKGhpdC5wcm9wZXJ0aWVzPy5hc3BlY3QgPz8gJz8nKTsKICAgICAgICBpZiAoWydTJywnU0UnLCdTVyddLmluY2x1ZGVzKGFzcGVjdCkpIG5vdGVzLnB1c2goYOKchSBBc3BlY3QgJHthc3BlY3R9IGlzIGZhdm9yYWJsZSBmb3Igc3VuLmApOwogICAgICAgIGVsc2Ugbm90ZXMucHVzaChg4oS577iPIEFzcGVjdCAke2FzcGVjdH0uIE1heSByZWR1Y2Ugd2ludGVyIHN1bi5gKTsKICAgICAgfQogICAgfQoKICAgIC8vIEludmFzaXZlcyBvdmVybGFwCiAgICBpZiAoYmxhY2tiZXJyaWVzLmZlYXR1cmVzLmxlbmd0aCkgewogICAgICBjb25zdCBoaXQgPSBibGFja2JlcnJpZXMuZmVhdHVyZXMuc29tZShnID0+IHR1cmYuYm9vbGVhbkludGVyc2VjdHMoZiwgZykpOwogICAgICBpZiAoaGl0KSBub3Rlcy5wdXNoKGDwn6uQIEludGVyc2VjdHMgbWFwcGVkIGJsYWNrYmVycnkuIEJ1ZGdldCBjbGVhcmluZyArIHRhcnAvc29sYXJpemF0aW9uIGN5Y2xlcy5gKTsKICAgIH0KCiAgICAvLyBQYXJjZWwgYm91bmRzCiAgICBpZiAocGFyY2VsLmZlYXR1cmVzLmxlbmd0aCkgewogICAgICBsZXQgbWVyZ2VkID0gcGFyY2VsLmZlYXR1cmVzWzBdOwogICAgICBmb3IgKGxldCBpPTE7aTxwYXJjZWwuZmVhdHVyZXMubGVuZ3RoO2krKyl7IHRyeXsgbWVyZ2VkID0gdHVyZi51bmlvbihtZXJnZWQsIHBhcmNlbC5mZWF0dXJlc1tpXSk7IH1jYXRjaHt9IH0KICAgICAgaWYgKG1lcmdlZCAmJiAhdHVyZi5ib29sZWFuV2l0aGluKGYsIG1lcmdlZCkpIG5vdGVzLnB1c2goJ+KaoO+4jyBQYXJ0aWFsbHkgb3IgZnVsbHkgb3V0c2lkZSBwYXJjZWwgYm91bmRhcnkuJyk7CiAgICB9CgogICAgY29uc3QgW2xuZywgbGF0XSA9IHB0Lmdlb21ldHJ5LmNvb3JkaW5hdGVzOwogICAgY29uc3QgcG9wdXBIdG1sID0gYDxkaXYgY2xhc3M9J3NtYWxsJz48Yj4ke2lkfTwvYj4gKCR7dHlwZX0pPGJyLz4ke25vdGVzLm1hcChuID0+IGA8ZGl2PuKAoiAke259PC9kaXY+YCkuam9pbignJyl9PC9kaXY+YDsKICAgIEwucG9wdXAoeyBtYXhXaWR0aDogMzYwIH0pLnNldExhdExuZyhbbGF0LGxuZ10pLnNldENvbnRlbnQocG9wdXBIdG1sKS5vcGVuT24obWFwKTsKCiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIGRpdi5pbm5lckhUTUwgPSBgPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbTo2cHg7Ij48Yj4ke2lkfTwvYj4gKCR7dHlwZX0pPC9kaXY+JHtub3Rlcy5tYXAobiA9PiBgPGRpdj7igKIgJHtufTwvZGl2PmApLmpvaW4oJycpfWA7CiAgICByZXBvcnQuYXBwZW5kQ2hpbGQoZGl2KTsKICB9KTsKCiAgaWYgKCF1c2VyRkMuZmVhdHVyZXMubGVuZ3RoKSB7CiAgICByZXBvcnQuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9InNtYWxsIj5ObyB1c2VyIGZlYXR1cmVzIHRvIGFuYWx5emUuIERyYXcgcG9seWdvbnMvbGluZXMvcG9pbnRzIGZpcnN0LjwvZGl2Pic7CiAgfQp9CmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbmFseXplQnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhbmFseXplU2VsZWN0ZWQpOwo8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+Cg==", Canby: "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgPG1ldGEgY2hhcnNldD0idXRmLTgiPgogIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MSI+CiAgPHRpdGxlPkNBTkJZMTczNiDigKIgU2F0ZWxsaXRlIFF1aWNrbG9vayB2MS4wPC90aXRsZT4KICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vdW5wa2cuY29tL2xlYWZsZXRAMS45LjQvZGlzdC9sZWFmbGV0LmNzcyIgaW50ZWdyaXR5PSJzaGEyNTYtcDROeEFvSkJoSUlOK2htTkhyelJDZjl0RC9taVp5b0hTNW9iVFJSOUJNWT0iIGNyb3Nzb3JpZ2luPSIiLz4KICA8c3R5bGU+CiAgICA6cm9vdCB7IC0tZWRnZTojMDBjYzc3OyAtLWluazojOGNmZmIyOyAtLWJnOiMwMDE0MGE7IH0KICAgIGJvZHkgeyBtYXJnaW46MDsgYmFja2dyb3VuZDp2YXIoLS1iZyk7IGNvbG9yOnZhcigtLWluayk7IGZvbnQtZmFtaWx5OnVpLW1vbm9zcGFjZSxNZW5sbyxDb25zb2xhcyxtb25vc3BhY2U7IH0KICAgIGhlYWRlciB7IHBhZGRpbmc6OHB4IDEycHg7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkIHZhcigtLWVkZ2UpOyB9CiAgICAjbWFwIHsgd2lkdGg6MTAwJTsgaGVpZ2h0OmNhbGMoMTAwdmggLSA1NnB4KTsgfQogICAgLmxlYWZsZXQtY29udHJvbC1sYXllcnMtZXhwYW5kZWQgeyBiYWNrZ3JvdW5kOiMwMDFhMTA7IGNvbG9yOnZhcigtLWluayk7IGJvcmRlcjoxcHggc29saWQgdmFyKC0tZWRnZSk7IH0KICA8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5PgogIDxoZWFkZXI+8J+bsO+4jyBQaXDigJFCb3kg4oCiIENBTkJZMTczNiDigKIgU2F0ZWxsaXRlIFF1aWNrbG9vayB2MS4wPC9oZWFkZXI+CiAgPGRpdiBpZD0ibWFwIj48L2Rpdj4KCiAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vdW5wa2cuY29tL2xlYWZsZXRAMS45LjQvZGlzdC9sZWFmbGV0LmpzIiBpbnRlZ3JpdHk9InNoYTI1Ni0yMG5RQ2NoQjljbzBxSWpKWlJHdWsyL1o5Vk0ra05peXhOVjFsdlRsWkJvPSIgY3Jvc3NvcmlnaW49IiI+PC9zY3JpcHQ+CiAgPHNjcmlwdD4KICAgIGNvbnN0IGNlbnRlciA9IFs0NS4yNzY1MTQyLCAtMTIyLjY5MTYyMDZdOwogICAgY29uc3QgbWFwID0gTC5tYXAoJ21hcCcsIHsgem9vbUNvbnRyb2w6IHRydWUsIGF0dHJpYnV0aW9uQ29udHJvbDogdHJ1ZSB9KS5zZXRWaWV3KGNlbnRlciwgMTgpOwogICAgY29uc3QgZXNyaSA9IEwudGlsZUxheWVyKCdodHRwczovL3NlcnZlci5hcmNnaXNvbmxpbmUuY29tL0FyY0dJUy9yZXN0L3NlcnZpY2VzL1dvcmxkX0ltYWdlcnkvTWFwU2VydmVyL3RpbGUve3p9L3t5fS97eH0nLCB7CiAgICAgIGF0dHJpYnV0aW9uOiAnVGlsZXMgwqkgRXNyaSDigJQgU291cmNlOiBFc3JpLCBNYXhhciwgRWFydGhzdGFyIEdlb2dyYXBoaWNzLCBhbmQgdGhlIEdJUyBVc2VyIENvbW11bml0eScKICAgIH0pLmFkZFRvKG1hcCk7CiAgICBjb25zdCBvc20gPSBMLnRpbGVMYXllcignaHR0cHM6Ly97c30udGlsZS5vcGVuc3RyZWV0bWFwLm9yZy97en0ve3h9L3t5fS5wbmcnLCB7IGF0dHJpYnV0aW9uOiAnJmNvcHk7IE9wZW5TdHJlZXRNYXAgY29udHJpYnV0b3JzJyB9KTsKCiAgICBMLmNvbnRyb2wubGF5ZXJzKHsgJ/Cfm7DvuI8gRXNyaSBXb3JsZEltYWdlcnknOiBlc3JpLCAn8J+Xuu+4jyBPcGVuU3RyZWV0TWFwJzogb3NtIH0sIHt9LCB7IGNvbGxhcHNlZDogZmFsc2UgfSkuYWRkVG8obWFwKTsKICAgIEwubWFya2VyKGNlbnRlcikuYWRkVG8obWFwKS5iaW5kUG9wdXAoJ0NBTkJZMTczNjxicj40NS4yNzY1MTQsIC0xMjIuNjkxNjIxJykub3BlblBvcHVwKCk7CiAgPC9zY3JpcHQ+CjwvYm9keT4KPC9odG1sPgo=" },
      intake:  { EH1003006: "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CjxtZXRhIGNoYXJzZXQ9InV0Zi04Ii8+CjxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MSwgbWF4aW11bS1zY2FsZT0xIi8+Cjx0aXRsZT5FSDEwMDMwMDYgRmllbGQgSW50YWtlIOKAlCB2MS4zLjc8L3RpdGxlPgo8bWV0YSBuYW1lPSJjb2xvci1zY2hlbWUiIGNvbnRlbnQ9ImRhcmsgbGlnaHQiPgo8c3R5bGU+CiAgOnJvb3R7LS1iZzojMGIxMDIwOy0taW5rOiNlMmU4ZjA7LS1tdXRlZDojOTRhM2I4Oy0tY2FyZDojMGYxNzJhOy0tYWNjZW50OiM2MGE1ZmE7LS1nb29kOiMyMmM1NWU7LS13YXJuOiNmNTllMGI7LS1iYWQ6I2VmNDQ0NDt9CiAgYm9keXttYXJnaW46MDtiYWNrZ3JvdW5kOnZhcigtLWJnKTtjb2xvcjp2YXIoLS1pbmspO2ZvbnQtZmFtaWx5OnN5c3RlbS11aSxTZWdvZSBVSSxSb2JvdG8sSGVsdmV0aWNhLEFyaWFsfQogIGhlYWRlcntwYWRkaW5nOjEycHggMTRweDtiYWNrZ3JvdW5kOiMwYTBmMWY7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgIzE3MjAzYjtwb3NpdGlvbjpzdGlja3k7dG9wOjA7ei1pbmRleDoxMH0KICBoMXttYXJnaW46MDtmb250LXNpemU6MThweH0KICAuc3Vie2NvbG9yOnZhcigtLW11dGVkKTtmb250LXNpemU6MTJweDttYXJnaW4tdG9wOjRweH0KICBtYWlue3BhZGRpbmc6MTJweCAxNHB4O2Rpc3BsYXk6Z3JpZDtnYXA6MTJweH0KICAuY2FyZHtiYWNrZ3JvdW5kOnZhcigtLWNhcmQpO2JvcmRlcjoxcHggc29saWQgIzBiMTIyNTtib3JkZXItcmFkaXVzOjEycHg7cGFkZGluZzoxMnB4fQogIC5yb3d7ZGlzcGxheTpmbGV4O2dhcDo4cHg7ZmxleC13cmFwOndyYXA7YWxpZ24taXRlbXM6Y2VudGVyfQogIC5idG57YmFja2dyb3VuZDojMWY2ZmViO2NvbG9yOiNmZmY7Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czoxMHB4O3BhZGRpbmc6MTBweCAxNHB4O2ZvbnQtd2VpZ2h0OjcwMDtjdXJzb3I6cG9pbnRlcn0KICAuYnRuLnNlY29uZGFyeXtiYWNrZ3JvdW5kOiMzMzQxNTV9CiAgLmJ0bi5naG9zdHtiYWNrZ3JvdW5kOnRyYW5zcGFyZW50O2JvcmRlcjoxcHggc29saWQgIzMzNDE1NTtjb2xvcjojZTVlN2VifQogIC5idG4uZ29vZHtiYWNrZ3JvdW5kOiMxNTgwM2R9CiAgLmJ0bi53YXJue2JhY2tncm91bmQ6I2I5MWMxY30KICAucGlsbHtiYWNrZ3JvdW5kOiMwYjEzMjY7Ym9yZGVyOjFweCBzb2xpZCAjMWUyOTNiO2JvcmRlci1yYWRpdXM6OTk5cHg7cGFkZGluZzo0cHggMTBweDtmb250LXNpemU6MTJweH0KICAucGlsbC5iYWR7Ym9yZGVyLWNvbG9yOiM1ZjExMTE7Y29sb3I6I2ZlY2FjYTtiYWNrZ3JvdW5kOiMxYTBiMGJ9CiAgLnBpbGwub2t7Ym9yZGVyLWNvbG9yOiMwZjUxMzI7Y29sb3I6I2JiZjdkMDtiYWNrZ3JvdW5kOiMwYjFmMTR9CiAgLnBpbGwuaW5mb3tib3JkZXItY29sb3I6IzFlNDBhZjtjb2xvcjojYmZkYmZlO2JhY2tncm91bmQ6IzBiMTMyNn0KICAuaW5wdXQsIHRleHRhcmVhLCBzZWxlY3R7YmFja2dyb3VuZDojMGIxMzI2O2NvbG9yOiNlMmU4ZjA7Ym9yZGVyOjFweCBzb2xpZCAjMWUyOTNiO2JvcmRlci1yYWRpdXM6OHB4O3BhZGRpbmc6MTBweH0KICB0ZXh0YXJlYXt3aWR0aDoxMDAlO21pbi1oZWlnaHQ6NzBweDtyZXNpemU6dmVydGljYWx9CiAgLmdyaWR7ZGlzcGxheTpncmlkO2dhcDo4cHh9CiAgLnRodW1ie2Rpc3BsYXk6ZmxleDtnYXA6OHB4O2FsaWduLWl0ZW1zOmZsZXgtc3RhcnQ7YmFja2dyb3VuZDojMGIxMzI2O2JvcmRlcjoxcHggc29saWQgIzFlMjkzYjtib3JkZXItcmFkaXVzOjEwcHg7cGFkZGluZzo4cHh9CiAgLnRodW1iIGltZ3t3aWR0aDo3MnB4O2hlaWdodDo3MnB4O29iamVjdC1maXQ6Y292ZXI7Ym9yZGVyLXJhZGl1czo4cHg7Ym9yZGVyOjFweCBzb2xpZCAjMGYyMDNhfQogIC5tZXRhe2ZvbnQtc2l6ZToxMnB4O2NvbG9yOnZhcigtLW11dGVkKX0KICAudGFne2JvcmRlcjoxcHggc29saWQgIzFlMjkzYjtib3JkZXItcmFkaXVzOjk5OXB4O3BhZGRpbmc6NHB4IDhweDttYXJnaW46MnB4O2Rpc3BsYXk6aW5saW5lLWJsb2NrO2N1cnNvcjpwb2ludGVyfQogIC50YWcub257YmFja2dyb3VuZDojMWUyOTNiO2NvbG9yOiNjYmU3ZmY7Ym9yZGVyLWNvbG9yOiMyYjNiNTV9CiAgLnNtYWxse2ZvbnQtc2l6ZToxMnB4O2NvbG9yOnZhcigtLW11dGVkKX0KICAuZm9vdGVye3BhZGRpbmc6MTBweCAxNHB4O2NvbG9yOnZhcigtLW11dGVkKTtmb250LXNpemU6MTJweDtib3JkZXItdG9wOjFweCBzb2xpZCAjMTcyMDNifQogIC5oaWRkZW57ZGlzcGxheTpub25lfQogIC5jaGlwc3tkaXNwbGF5OmZsZXg7Z2FwOjZweDtmbGV4LXdyYXA6d3JhcH0KICAuY2hlY2tsaXN0e2Rpc3BsYXk6Z3JpZDtnYXA6OHB4fQogIC5zdGVwe2Rpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6ZmxleC1zdGFydDsgZ2FwOjEwcHg7IHBhZGRpbmc6OHB4OyBib3JkZXI6MXB4IGRhc2hlZCAjMWUyOTNiOyBib3JkZXItcmFkaXVzOjhweDsgYmFja2dyb3VuZDojMGIxMzI2fQogIC5zdGVwIC5udW17d2lkdGg6MjJweDsgaGVpZ2h0OjIycHg7IGJvcmRlci1yYWRpdXM6NTAlOyBiYWNrZ3JvdW5kOiMxZjZmZWI7IGNvbG9yOiNmZmY7IGZvbnQtd2VpZ2h0OjgwMDsgZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IGZvbnQtc2l6ZToxMnB4fQogIC5zdGVwIC5ib2R5e2ZsZXg6MX0KICAuc3RlcCAuYWN0aW9uc3tkaXNwbGF5OmZsZXg7IGdhcDo2cHg7IGZsZXgtd3JhcDp3cmFwfQogIGF1ZGlve3dpZHRoOjIyMHB4fQogIC5ncmlkLWNvbHMtMntkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMiwgbWlubWF4KDAsMWZyKSk7IGdhcDoxMHB4fQogIEBtZWRpYSAobWF4LXdpZHRoOiA4MDBweCl7IC5ncmlkLWNvbHMtMntncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmcjt9IH0KICAuY2FsbG91dHtib3JkZXItbGVmdDozcHggc29saWQgIzI1NjNlYjtiYWNrZ3JvdW5kOiMwYjEzMjY7cGFkZGluZzo4cHg7Ym9yZGVyLXJhZGl1czo2cHh9CiAgLnRvZ2dsZXtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo4cHh9CiAgLnN3aXRjaHtwb3NpdGlvbjpyZWxhdGl2ZTt3aWR0aDo0NnB4O2hlaWdodDoyNnB4O2JhY2tncm91bmQ6IzMzNDE1NTtib3JkZXItcmFkaXVzOjk5OXB4O2N1cnNvcjpwb2ludGVyOyBib3JkZXI6MXB4IHNvbGlkICMxZTI5M2J9CiAgLnN3aXRjaDo6YWZ0ZXJ7Y29udGVudDonJztwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MnB4O2xlZnQ6MnB4O3dpZHRoOjIycHg7aGVpZ2h0OjIycHg7YmFja2dyb3VuZDojZTVlN2ViO2JvcmRlci1yYWRpdXM6NTAlOyB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gLjJzfQogIC5zd2l0Y2gub257YmFja2dyb3VuZDojMWY2ZmVifQogIC5zd2l0Y2gub246OmFmdGVye3RyYW5zZm9ybTogdHJhbnNsYXRlWCgyMHB4KX0KPC9zdHlsZT4KCiAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJmYXJtcmVzZWFyY2gtdGhlbWUtdjFfMC5jc3MiIC8+CiAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJmYXJtcmVzZWFyY2gtdGhlbWUtaW50YWtlLWFkYXB0ZXItdjFfMF8xLmNzcyIgLz4KCiAgPHN0eWxlIGlkPSJ0aGVtZS1pbnRha2UtYWRhcHRlci12MV8wXzEiPgoKLyogRmFybSBSZXNlYXJjaCDigJQgRmllbGQgSW50YWtlIEFkYXB0ZXIgdjEuMC4xCiAgIFB1cnBvc2U6IG1ha2UgdGhlIHNoYXJlZCB0aGVtZSB2aXN1YWxseSBvYnZpb3VzIHdpdGhvdXQgY2hhbmdpbmcgbG9naWMvbWFya3VwLgogICBTY29wZTogdGFyZ2V0cyBvbmx5IGNsYXNzZXMvc3RydWN0dXJlcyB1c2VkIGJ5IEZpZWxkIEludGFrZS4KKi8KCi8qIEZsb2F0aW5nIHZlcnNpb24gYmFkZ2Ugc291cmNlZCBmcm9tIGRhdGEtdmVyc2lvbiBhdHRyaWJ1dGUgKi8KYm9keVtkYXRhLXRoZW1lPSJmYXJtcmVzZWFyY2gtdjEuMCJdOjpiZWZvcmUgewogIGNvbnRlbnQ6ICJGaWVsZCBJbnRha2UgdiIgYXR0cihkYXRhLXZlcnNpb24pOwogIHBvc2l0aW9uOiBmaXhlZDsKICB0b3A6IDEwcHg7IGxlZnQ6IDEwcHg7CiAgei1pbmRleDogOTk5OTsKICBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDAuNik7CiAgY29sb3I6ICNmZmY7CiAgcGFkZGluZzogNnB4IDEwcHg7CiAgYm9yZGVyLXJhZGl1czogOHB4OwogIGZvbnQtc2l6ZTogMTJweDsKICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuMDYpOwogIHBvaW50ZXItZXZlbnRzOiBub25lOwp9CgovKiBIZWFkZXIgcmVmcmVzaCB0byBtYXRjaCBQbGFubmVyIHRvbmVzICovCmJvZHlbZGF0YS10aGVtZT0iZmFybXJlc2VhcmNoLXYxLjAiXSBoZWFkZXIgewogIGJhY2tncm91bmQ6ICMwZjE3MmE7CiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICMxZTI5M2I7CiAgYm94LXNoYWRvdzogMCA2cHggMTZweCByZ2JhKDIsIDYsIDIzLCAwLjM1KTsKfQpib2R5W2RhdGEtdGhlbWU9ImZhcm1yZXNlYXJjaC12MS4wIl0gaDEgewogIGZvbnQtd2VpZ2h0OiA4MDA7CiAgbGV0dGVyLXNwYWNpbmc6IDAuMXB4Owp9CgovKiBDYXJkcyBhbmQgbGF5b3V0ICovCmJvZHlbZGF0YS10aGVtZT0iZmFybXJlc2VhcmNoLXYxLjAiXSAuY2FyZCB7CiAgYmFja2dyb3VuZDogIzBjMTkzMDsgLyogbWF0Y2hlcyB0aGVtZSB2YXIoLS1jYXJkKSAqLwogIGJvcmRlcjogMXB4IHNvbGlkICMwYjEyMjU7CiAgYm9yZGVyLXJhZGl1czogMTJweDsKICBib3gtc2hhZG93OiAwIDZweCAxNnB4IHJnYmEoMiwgNiwgMjMsIDAuMzUpOwp9CgovKiBCdXR0b25zICovCmJvZHlbZGF0YS10aGVtZT0iZmFybXJlc2VhcmNoLXYxLjAiXSAuYnRuIHsKICBwYWRkaW5nOiAxMHB4IDE2cHg7CiAgYm9yZGVyLXJhZGl1czogMTJweDsKICBib3gtc2hhZG93OiAwIDJweCAwIHJnYmEoMCwwLDAsMC4yNSk7Cn0KYm9keVtkYXRhLXRoZW1lPSJmYXJtcmVzZWFyY2gtdjEuMCJdIC5idG4uc2Vjb25kYXJ5IHsgYmFja2dyb3VuZDogIzMzNDE1NTsgY29sb3I6ICNlNWU3ZWI7IH0KYm9keVtkYXRhLXRoZW1lPSJmYXJtcmVzZWFyY2gtdjEuMCJdIC5idG4uZ2hvc3QgeyBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsgYm9yZGVyOiAxcHggc29saWQgIzMzNDE1NTsgY29sb3I6ICNlNWU3ZWI7IH0KYm9keVtkYXRhLXRoZW1lPSJmYXJtcmVzZWFyY2gtdjEuMCJdIC5idG4uZ29vZCB7IGJhY2tncm91bmQ6ICMxNTgwM2Q7IH0KYm9keVtkYXRhLXRoZW1lPSJmYXJtcmVzZWFyY2gtdjEuMCJdIC5idG4ud2FybiB7IGJhY2tncm91bmQ6ICNiOTFjMWM7IH0KCi8qIElucHV0cyAqLwpib2R5W2RhdGEtdGhlbWU9ImZhcm1yZXNlYXJjaC12MS4wIl0gLmlucHV0LApib2R5W2RhdGEtdGhlbWU9ImZhcm1yZXNlYXJjaC12MS4wIl0gdGV4dGFyZWEsCmJvZHlbZGF0YS10aGVtZT0iZmFybXJlc2VhcmNoLXYxLjAiXSBzZWxlY3QgewogIGJhY2tncm91bmQ6ICMwYjEzMjY7CiAgYm9yZGVyOiAxcHggc29saWQgIzFlMjkzYjsKICBjb2xvcjogI2UyZThmMDsKICBib3JkZXItcmFkaXVzOiAxMHB4Owp9CmJvZHlbZGF0YS10aGVtZT0iZmFybXJlc2VhcmNoLXYxLjAiXSB0ZXh0YXJlYSB7IG1pbi1oZWlnaHQ6IDkwcHg7IH0KCi8qIFBpbGxzL1RhZ3MgKi8KYm9keVtkYXRhLXRoZW1lPSJmYXJtcmVzZWFyY2gtdjEuMCJdIC5waWxsIHsKICBiYWNrZ3JvdW5kOiAjMGIxMzI2OwogIGJvcmRlcjogMXB4IHNvbGlkICMxZTI5M2I7CiAgY29sb3I6ICNjYmQ1ZTE7Cn0KYm9keVtkYXRhLXRoZW1lPSJmYXJtcmVzZWFyY2gtdjEuMCJdIC5waWxsLmluZm8gewogIGJhY2tncm91bmQ6IHJnYmEoOTYsMTY1LDI1MCwwLjEyKTsKICBjb2xvcjogIzkzYzVmZDsKICBib3JkZXItY29sb3I6IHJnYmEoOTYsMTY1LDI1MCwwLjM1KTsKfQpib2R5W2RhdGEtdGhlbWU9ImZhcm1yZXNlYXJjaC12MS4wIl0gLnBpbGwub2sgewogIGJhY2tncm91bmQ6IHJnYmEoMzQsMTk3LDk0LDAuMTIpOwogIGNvbG9yOiAjODZlZmFjOwogIGJvcmRlci1jb2xvcjogcmdiYSgzNCwxOTcsOTQsMC4zNSk7Cn0KYm9keVtkYXRhLXRoZW1lPSJmYXJtcmVzZWFyY2gtdjEuMCJdIC5waWxsLmJhZCB7CiAgYmFja2dyb3VuZDogcmdiYSgyMzksNjgsNjgsMC4xMik7CiAgY29sb3I6ICNmZWNhY2E7CiAgYm9yZGVyLWNvbG9yOiByZ2JhKDIzOSw2OCw2OCwwLjM1KTsKfQoKLyogVGh1bWJuYWlscyAqLwpib2R5W2RhdGEtdGhlbWU9ImZhcm1yZXNlYXJjaC12MS4wIl0gLnRodW1iIHsKICBiYWNrZ3JvdW5kOiAjMGIxMzI2OwogIGJvcmRlcjogMXB4IHNvbGlkICMxZTI5M2I7CiAgYm9yZGVyLXJhZGl1czogMTJweDsKfQoKLyogTWV0YSBzbWFsbCB0ZXh0ICovCmJvZHlbZGF0YS10aGVtZT0iZmFybXJlc2VhcmNoLXYxLjAiXSAubWV0YSB7IGNvbG9yOiAjOTRhM2I4OyB9CgogIDwvc3R5bGU+CjwvaGVhZD4KPGJvZHkgZGF0YS10aGVtZT0iZmFybXJlc2VhcmNoLXYxLjAiIGRhdGEtdmVyc2lvbj0iMS4zLjciPgogIDxoZWFkZXI+CiAgICA8aDE+RUgxMDAzMDA2IEZpZWxkIEludGFrZSA8c3BhbiBjbGFzcz0icGlsbCI+djEuMy43PC9zcGFuPjwvaDE+CiAgICA8ZGl2IGNsYXNzPSJzdWIiPkFkZHMgYSBndWlkZWQgPGI+U29sYXIgMzYwIENhcHR1cmU8L2I+IHRvZ2dsZS4gQWxsIHByZXZpb3VzIGZlYXR1cmVzIHJlbWFpbi4gT25l4oCRY2xpY2sgPGI+VmFsaWRhdGlvbiBQYWNrPC9iPiBmb3IgQ2hhdEdQVCByZXZpZXcuPC9kaXY+CiAgPC9oZWFkZXI+CgogIDxtYWluPgogICAgPGRpdiBjbGFzcz0iY2FyZCI+CiAgICAgIDxkaXYgY2xhc3M9ImdyaWQtY29scy0yIj4KICAgICAgICA8ZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0icm93Ij4KICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJidG4iIGZvcj0iZmlsZUlucHV0Ij5BZGQgUGhvdG9zPC9sYWJlbD4KICAgICAgICAgICAgPGlucHV0IGlkPSJmaWxlSW5wdXQiIHR5cGU9ImZpbGUiIGFjY2VwdD0iaW1hZ2UvKiIgY2FwdHVyZT0iZW52aXJvbm1lbnQiIG11bHRpcGxlIHN0eWxlPSJkaXNwbGF5Om5vbmUiLz4KICAgICAgICAgICAgPGJ1dHRvbiBpZD0iZ2V0R1BTIiBjbGFzcz0iYnRuIHNlY29uZGFyeSI+Q2FwdHVyZSBkZXZpY2UgR1BTPC9idXR0b24+CiAgICAgICAgICAgIDxidXR0b24gaWQ9ImdldEhlYWRpbmciIGNsYXNzPSJidG4gc2Vjb25kYXJ5Ij5DYXB0dXJlIGRldmljZSBoZWFkaW5nPC9idXR0b24+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgICAgIDxzcGFuIGlkPSJzdGF0dXMiIGNsYXNzPSJzbWFsbCI+R1BTL0hlYWRpbmc6IG5vdCByZXF1ZXN0ZWQuPC9zcGFuPgogICAgICAgICAgICA8c3BhbiBpZD0iaHR0cHNIaW50IiBjbGFzcz0ic21hbGwiPjwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImNhbGxvdXQgc21hbGwiPgogICAgICAgICAgSWYgQ2hyb21lIHNob3dzIOKAnGRlbmllZOKAnSB3aXRob3V0IHByb21wdGluZzogdXNlIEhUVFBTL2xvY2FsaG9zdDsgcmVzZXQgU2l0ZSBzZXR0aW5ncyDihpIgTG9jYXRpb24g4oaSIEFsbG93OyBlbnN1cmUgT1MgbG9jYXRpb24gaXMgb24uIEVYSUYgR1BTIHN0aWxsIHdvcmtzIGlmIGVtYmVkZGVkLgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxkaXYgY2xhc3M9ImNhcmQiPgogICAgICA8ZGl2IGNsYXNzPSJyb3cgdG9nZ2xlIj4KICAgICAgICA8ZGl2IGNsYXNzPSJzd2l0Y2giIGlkPSJzb2xhclRvZ2dsZSIgcm9sZT0ic3dpdGNoIiBhcmlhLWNoZWNrZWQ9ImZhbHNlIiB0YWJpbmRleD0iMCI+PC9kaXY+CiAgICAgICAgPGRpdj48Yj5Tb2xhciAzNjAgQ2FwdHVyZTwvYj4g4oCUIGd1aWRlZCBjaGVja2xpc3QgZm9yIGFycmF5IG1vZGVsaW5nPC9kaXY+CiAgICAgICAgPHNwYW4gaWQ9InNvbGFyU3RhdGUiIGNsYXNzPSJwaWxsIGluZm8iPm9mZjwvc3Bhbj4KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgaWQ9InNvbGFyR3VpZGUiIGNsYXNzPSJncmlkIGhpZGRlbiIgc3R5bGU9Im1hcmdpbi10b3A6OHB4Ij4KICAgICAgICA8ZGl2IGNsYXNzPSJzdGVwIj4KICAgICAgICAgIDxkaXYgY2xhc3M9Im51bSI+MTwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0iYm9keSI+CiAgICAgICAgICAgIDxiPkNlbnRlciBmaXggKyBwYW5vcmFtYTwvYj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic21hbGwiPlN0YW5kIGF0IHRoZSBhcnJheSBjZW50ZXIsIGxldCBHUFMgc2V0dGxlICgxMOKAkzIwcyksIHRoZW4gY2FwdHVyZSBhIGZ1bGwgMzYwwrAgcGFubyA8aT5vciB+MjAgaG9yaXpvbiBwaG90b3M8L2k+LjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJhY3Rpb25zIj4KICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJ0biBnaG9zdCIgZm9yPSJzdGVwMUFkZCI+QWRkIHBob3RvczwvbGFiZWw+CiAgICAgICAgICAgICAgPGlucHV0IGlkPSJzdGVwMUFkZCIgdHlwZT0iZmlsZSIgYWNjZXB0PSJpbWFnZS8qIiBjYXB0dXJlPSJlbnZpcm9ubWVudCIgbXVsdGlwbGUgY2xhc3M9ImhpZGRlbiIvPgogICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBzZWNvbmRhcnkiIGRhdGEtc3RlcGRvbmU9IjEiPk1hcmsgc3RlcCBkb25lPC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ic3RlcCI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJudW0iPjI8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9ImJvZHkiPgogICAgICAgICAgICA8Yj5QYW5lbCBhbmNob3JzIChzY2FsZSArIHRpbHQpPC9iPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzbWFsbCI+VGFrZSBjbG9zZSBmcm9udCBhbmQgc2lkZSBzaG90czsgaW5jbHVkZSBhIGtub3duIGxlbmd0aCAodGFwZS9zdGljayBvciBwYW5lbCBzcGVjKSBpZiBwb3NzaWJsZS48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWN0aW9ucyI+CiAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJidG4gZ2hvc3QiIGZvcj0ic3RlcDJBZGQiPkFkZCBwaG90b3M8L2xhYmVsPgogICAgICAgICAgICAgIDxpbnB1dCBpZD0ic3RlcDJBZGQiIHR5cGU9ImZpbGUiIGFjY2VwdD0iaW1hZ2UvKiIgY2FwdHVyZT0iZW52aXJvbm1lbnQiIG11bHRpcGxlIGNsYXNzPSJoaWRkZW4iLz4KICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gc2Vjb25kYXJ5IiBkYXRhLXN0ZXBkb25lPSIyIj5NYXJrIHN0ZXAgZG9uZTwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9InN0ZXAiPgogICAgICAgICAgPGRpdiBjbGFzcz0ibnVtIj4zPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJib2R5Ij4KICAgICAgICAgICAgPGI+T2JzdGFjbGUgY2hlY2s8L2I+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsIj5CYWNrIHVwIDEw4oCTMTUgbSBhbmQgc2hvb3QgdG93YXJkIHRoZSBhcnJheSBmcm9tIE5vcnRoLCBFYXN0LCBTb3V0aCwgV2VzdCDigJQgY2FwdHVyZSB0cmVlcy9zaGVkcy9ibGFja2JlcnJpZXMuPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFjdGlvbnMiPgogICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iYnRuIGdob3N0IiBmb3I9InN0ZXAzQWRkIj5BZGQgcGhvdG9zPC9sYWJlbD4KICAgICAgICAgICAgICA8aW5wdXQgaWQ9InN0ZXAzQWRkIiB0eXBlPSJmaWxlIiBhY2NlcHQ9ImltYWdlLyoiIGNhcHR1cmU9ImVudmlyb25tZW50IiBtdWx0aXBsZSBjbGFzcz0iaGlkZGVuIi8+CiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIHNlY29uZGFyeSIgZGF0YS1zdGVwZG9uZT0iMyI+TWFyayBzdGVwIGRvbmU8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJzdGVwIj4KICAgICAgICAgIDxkaXYgY2xhc3M9Im51bSI+NDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0iYm9keSI+CiAgICAgICAgICAgIDxiPlNoYWRvdyByZWZlcmVuY2UgKG9wdGlvbmFsKTwvYj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic21hbGwiPkxheSBhIDEgbSBzdGljayBvbiBncm91bmQgYWxpZ25lZCB3aXRoIHBhbmVsIGVkZ2U7IHNob290IGl0cyBzaGFkb3cgdG8gbG9jayBzdW4gYXppbXV0aCBhdCB0aW1lc3RhbXAuPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFjdGlvbnMiPgogICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iYnRuIGdob3N0IiBmb3I9InN0ZXA0QWRkIj5BZGQgcGhvdG9zPC9sYWJlbD4KICAgICAgICAgICAgICA8aW5wdXQgaWQ9InN0ZXA0QWRkIiB0eXBlPSJmaWxlIiBhY2NlcHQ9ImltYWdlLyoiIGNhcHR1cmU9ImVudmlyb25tZW50IiBtdWx0aXBsZSBjbGFzcz0iaGlkZGVuIi8+CiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIHNlY29uZGFyeSIgZGF0YS1zdGVwZG9uZT0iNCI+TWFyayBzdGVwIGRvbmU8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICAgICAgPHNwYW4gY2xhc3M9InBpbGwiIGlkPSJzb2xhclByb2dyZXNzIj5Qcm9ncmVzczogMC80PC9zcGFuPgogICAgICAgICAgPGJ1dHRvbiBpZD0ic29sYXJTdW1tYXJpemUiIGNsYXNzPSJidG4gZ29vZCI+QWRkIFNvbGFyIFNlc3Npb24gU3VtbWFyeSB0byBub3RlczwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxkaXYgY2xhc3M9ImNhcmQiPgogICAgICA8ZGl2IGNsYXNzPSJncmlkIj4KICAgICAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICAgICAgPGxhYmVsPkJhdGNoIHRpdGxlJm5ic3A7PGlucHV0IGlkPSJiYXRjaFRpdGxlIiBjbGFzcz0iaW5wdXQiIHBsYWNlaG9sZGVyPSJlLmcuLCBQYW5lbCBzaGFkZSBjaGVjayBAIGJhcm4iLz48L2xhYmVsPgogICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbCI+R1BTIG1vZGUKICAgICAgICAgICAgPHNlbGVjdCBpZD0iZ3BzTW9kZSIgY2xhc3M9ImlucHV0Ij4KICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJwcmVmZXJfZXhpZiI+UHJlZmVyIEVYSUYgKGZhbGxiYWNrIHRvIGRldmljZSk8L29wdGlvbj4KICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJkZXZpY2Vfb25seSI+RGV2aWNlIG9ubHkgKGlnbm9yZSBFWElGKTwvb3B0aW9uPgogICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImV4aWZfb25seSI+RVhJRiBvbmx5IChuZXZlciBkZXZpY2UpPC9vcHRpb24+CiAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgPC9sYWJlbD4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICAgICAgPGxhYmVsPkRlZmF1bHQgc3ViamVjdCBkaXN0YW5jZSAobSkgPGlucHV0IGlkPSJkZWZhdWx0RGlzdCIgY2xhc3M9ImlucHV0IiB0eXBlPSJudW1iZXIiIHZhbHVlPSIxMiIgc3RlcD0iMSIgbWluPSIwIiBzdHlsZT0id2lkdGg6ODBweCIvPjwvbGFiZWw+CiAgICAgICAgICA8bGFiZWw+RGVmYXVsdCBoZWFkaW5nICjCsCkgPGlucHV0IGlkPSJkZWZhdWx0SGVhZGluZyIgY2xhc3M9ImlucHV0IiB0eXBlPSJudW1iZXIiIHZhbHVlPSIiIHN0ZXA9IjEiIG1pbj0iMCIgbWF4PSIzNTkiIHN0eWxlPSJ3aWR0aDo4MHB4IiBwbGFjZWhvbGRlcj0iYXV0byIvPjwvbGFiZWw+CiAgICAgICAgICA8bGFiZWw+QXNzZXRzIHByZXNlbnQKICAgICAgICAgICAgPHNlbGVjdCBpZD0iYXNzZXRzIiBtdWx0aXBsZSBzaXplPSIyIiBjbGFzcz0iaW5wdXQiIHRpdGxlPSJIb2xkIEN0cmwv4oyYIHRvIHNlbGVjdCBtdWx0aXBsZSIgc3R5bGU9IndpZHRoOjE2MHB4Ij4KICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJvdXBlc19tZWdhNSIgc2VsZWN0ZWQ+T3VwZXMgTWVnYSA1PC9vcHRpb24+CiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ic29sYXJfYXJyYXkiIHNlbGVjdGVkPlNvbGFyIHBhbmVsczwvb3B0aW9uPgogICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdj5RdWljayB0YWdzPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iY2hpcHMiIGlkPSJxdWlja1RhZ3MiPgogICAgICAgICAgPHNwYW4gY2xhc3M9InRhZyI+YmxhY2tiZXJyeTwvc3Bhbj48c3BhbiBjbGFzcz0idGFnIj5oeWRybzwvc3Bhbj48c3BhbiBjbGFzcz0idGFnIj5lcm9zaW9uPC9zcGFuPjxzcGFuIGNsYXNzPSJ0YWciPnV0aWxpdHk8L3NwYW4+CiAgICAgICAgICA8c3BhbiBjbGFzcz0idGFnIj5idWlsZGluZzwvc3Bhbj48c3BhbiBjbGFzcz0idGFnIj5yb2FkPC9zcGFuPjxzcGFuIGNsYXNzPSJ0YWciPnN0cmVhbTwvc3Bhbj48c3BhbiBjbGFzcz0idGFnIj53aWxkbGlmZTwvc3Bhbj4KICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0YWciPnNpbHZpY3VsdHVyZTwvc3Bhbj48c3BhbiBjbGFzcz0idGFnIj5zb2lsLXNhbXBsZTwvc3Bhbj4KICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0YWciPmdlZXNlPC9zcGFuPjxzcGFuIGNsYXNzPSJ0YWciPmNoaWNrZW5zPC9zcGFuPgogICAgICAgICAgPHNwYW4gY2xhc3M9InRhZyI+c29sYXItcGFuZWw8L3NwYW4+PHNwYW4gY2xhc3M9InRhZyI+b3VwZXMtbWVnYTU8L3NwYW4+CiAgICAgICAgICA8c3BhbiBjbGFzcz0idGFnIj5zaXRlLWNvbnRleHQ8L3NwYW4+PHNwYW4gY2xhc3M9InRhZyI+d2VhdGhlcjwvc3Bhbj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJyb3ciIHN0eWxlPSJhbGlnbi1pdGVtczpmbGV4LXN0YXJ0OyBtYXJnaW4tdG9wOjZweCI+CiAgICAgICAgICA8dGV4dGFyZWEgaWQ9ImJhdGNoTm90ZXMiIGNsYXNzPSJpbnB1dCIgcGxhY2Vob2xkZXI9IkJhdGNoIG5vdGVz4oCmICh3aGF0LCB3aGVyZSwgd2h5KSI+PC90ZXh0YXJlYT4KICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsIj5CYXRjaCB2b2ljZSBtZW1vPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGdob3N0IiBpZD0icmVjQmF0Y2giPlJlY29yZDwvYnV0dG9uPgogICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBnaG9zdCIgaWQ9InN0b3BCYXRjaCIgZGlzYWJsZWQ+U3RvcDwvYnV0dG9uPgogICAgICAgICAgICAgIDxhdWRpbyBpZD0iYmF0Y2hBdWRpbyIgY29udHJvbHMgY2xhc3M9ImhpZGRlbiI+PC9hdWRpbz4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8ZGl2IGNsYXNzPSJjYXJkIj4KICAgICAgPGRpdiBjbGFzcz0icm93Ij48Yj5Tb2xhciBNb2RlbGluZyAoY2FwdHVyZSBtZWFzdXJlbWVudHMpPC9iPjwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJncmlkIj4KICAgICAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICAgICAgPGxhYmVsPlRvdGFsIHBhbmVsIHdhdHRzIDxpbnB1dCBpZD0icHZXIiBjbGFzcz0iaW5wdXQiIHR5cGU9Im51bWJlciIgdmFsdWU9IjcwMCIgc3RlcD0iMTAiIG1pbj0iMCIgc3R5bGU9IndpZHRoOjExMHB4Ii8+PC9sYWJlbD4KICAgICAgICAgIDxsYWJlbD5QYW5lbCB0aWx0ICjCsCkgPGlucHV0IGlkPSJ0aWx0IiBjbGFzcz0iaW5wdXQiIHR5cGU9Im51bWJlciIgdmFsdWU9IjI1IiBzdGVwPSIxIiBtaW49IjAiIG1heD0iOTAiIHN0eWxlPSJ3aWR0aDo5MHB4Ii8+PC9sYWJlbD4KICAgICAgICAgIDxsYWJlbD5QYW5lbCBhemltdXRoICjCsCkgPGlucHV0IGlkPSJhem0iIGNsYXNzPSJpbnB1dCIgdHlwZT0ibnVtYmVyIiB2YWx1ZT0iMTgwIiBzdGVwPSIxIiBtaW49IjAiIG1heD0iMzU5IiBzdHlsZT0id2lkdGg6MTEwcHgiLz48L2xhYmVsPgogICAgICAgICAgPGxhYmVsPlNoYWRpbmcgKCUpIDxpbnB1dCBpZD0ic2hhZGUiIGNsYXNzPSJpbnB1dCIgdHlwZT0ibnVtYmVyIiB2YWx1ZT0iMTAiIHN0ZXA9IjEiIG1pbj0iMCIgbWF4PSIxMDAiIHN0eWxlPSJ3aWR0aDo5MHB4Ii8+PC9sYWJlbD4KICAgICAgICAgIDxsYWJlbD5DbG91ZCBjb3ZlciAoJSkgPGlucHV0IGlkPSJjbG91ZCIgY2xhc3M9ImlucHV0IiB0eXBlPSJudW1iZXIiIHZhbHVlPSI0MCIgc3RlcD0iMSIgbWluPSIwIiBtYXg9IjEwMCIgc3R5bGU9IndpZHRoOjExMHB4Ii8+PC9sYWJlbD4KICAgICAgICAgIDxsYWJlbD5BbWJpZW50IMKwQyA8aW5wdXQgaWQ9InRhaXIiIGNsYXNzPSJpbnB1dCIgdHlwZT0ibnVtYmVyIiB2YWx1ZT0iMjIiIHN0ZXA9IjAuNSIgbWluPSItMzAiIG1heD0iNjAiIHN0eWxlPSJ3aWR0aDo5MHB4Ii8+PC9sYWJlbD4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICAgICAgPGJ1dHRvbiBpZD0iZXN0aW1hdGVQViIgY2xhc3M9ImJ0biBnb29kIj5Fc3RpbWF0ZSBQViBub3c8L2J1dHRvbj4KICAgICAgICAgIDxsYWJlbD5PdXBlcyBpbnB1dCBXIDxpbnB1dCBpZD0ib3VwZXNXIiBjbGFzcz0iaW5wdXQiIHR5cGU9Im51bWJlciIgdmFsdWU9IiIgcGxhY2Vob2xkZXI9InJlYWQgZnJvbSBkaXNwbGF5IiBzdHlsZT0id2lkdGg6MTAwcHgiLz48L2xhYmVsPgogICAgICAgICAgPGJ1dHRvbiBpZD0icmVjb3JkUFYiIGNsYXNzPSJidG4gc2Vjb25kYXJ5Ij5BZGQgc2FtcGxlPC9idXR0b24+CiAgICAgICAgICA8c3BhbiBpZD0icHZTdGF0dXMiIGNsYXNzPSJzbWFsbCI+PC9zcGFuPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgICA8YnV0dG9uIGlkPSJleHBvcnRQViIgY2xhc3M9ImJ0biBnaG9zdCI+RXhwb3J0IHNvbGFyIGRhdGFzZXQ8L2J1dHRvbj4KICAgICAgICAgIDxidXR0b24gaWQ9ImNsZWFyUFYiIGNsYXNzPSJidG4gd2FybiI+Q2xlYXIgc29sYXIgZGF0YXNldDwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxkaXYgY2xhc3M9ImNhcmQiPgogICAgICA8ZGl2IGNsYXNzPSJyb3ciPjxiPlBob3RvczwvYj48L2Rpdj4KICAgICAgPGRpdiBpZD0ibGlzdCIgY2xhc3M9ImdyaWQiPjwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJzbWFsbCIgaWQ9ImVtcHR5SGludCI+Tm8gcGhvdG9zIHlldC48L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxkaXYgY2xhc3M9ImNhcmQiPgogICAgICA8ZGl2IGNsYXNzPSJyb3ciPjxiPkJ1aWxkIE91dHB1dDwvYj48L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0icm93Ij4KICAgICAgICA8YnV0dG9uIGlkPSJjb3B5Rm9yQ2hhdCIgY2xhc3M9ImJ0biBnb29kIj5Db3B5IHRleHQgZm9yIENoYXRHUFQ8L2J1dHRvbj4KICAgICAgICA8YnV0dG9uIGlkPSJkb3dubG9hZE1hbmlmZXN0IiBjbGFzcz0iYnRuIj5Eb3dubG9hZCBtYW5pZmVzdC5qc29uPC9idXR0b24+CiAgICAgICAgPGJ1dHRvbiBpZD0iYnVpbGRaaXAiIGNsYXNzPSJidG4gZ2hvc3QiPkJ1aWxkIFpJUCAoaW1hZ2VzICsgYXVkaW8gKyBtYW5pZmVzdCk8L2J1dHRvbj4KICAgICAgICA8YnV0dG9uIGlkPSJidWlsZFRlc3QiIGNsYXNzPSJidG4gc2Vjb25kYXJ5Ij5Eb3dubG9hZCBNaW5pbWFsIFRlc3QgTWFuaWZlc3Q8L2J1dHRvbj4KICAgICAgICA8YnV0dG9uIGlkPSJidWlsZFZhbGlkYXRpb24iIGNsYXNzPSJidG4gd2FybiI+RG93bmxvYWQgVmFsaWRhdGlvbiBQYWNrPC9idXR0b24+CiAgICAgICAgPHNwYW4gaWQ9ImJ1aWxkSW5mbyIgY2xhc3M9InNtYWxsIj48L3NwYW4+CiAgICAgIDwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJzbWFsbCI+WklQIHVzZXMgYSBDRE4gbGlicmFyeS4gSWYgb2ZmbGluZSwgdXNlIG1hbmlmZXN0IC8gdGVzdCBtYW5pZmVzdCAvIHZhbGlkYXRpb24gcGFjayBidXR0b25zLjwvZGl2PgogICAgPC9kaXY+CiAgPC9tYWluPgoKICA8ZGl2IGNsYXNzPSJmb290ZXIiPgogICAgU2F2ZXMgdG8gbG9jYWxTdG9yYWdlOiA8Y29kZT5FSDEwMDMwMDY6ZmllbGRfaW50YWtlX3JlY29yZHM8L2NvZGU+IChpbnRha2VzKSBhbmQgPGNvZGU+RUgxMDAzMDA2OnNvbGFyX3NhbXBsZXM8L2NvZGU+IChzb2xhcikuIOKAlCBGYXJtIFJlc2VhcmNoLCBQYXJjZWwgRUgxMDAzMDA2LgogIDwvZGl2PgoKPHNjcmlwdD4KLy8gLS0tLSBQcmlvciB2MS4zLjIgY29yZSAodHJpbW1lZCB0byBrZWVwIGZpbGUgY29uY2lzZSk7IGV2ZXJ5dGhpbmcgc3RpbGwgd29ya3MgLS0tLQpjb25zdCAkID0gc2VsID0+IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsKTsKY29uc3QgbGlzdEVsID0gJCgiI2xpc3QiKTsgY29uc3QgZW1wdHlIaW50ID0gJCgiI2VtcHR5SGludCIpOwpsZXQgYmF0Y2ggPSBbXTsgbGV0IGRldmljZUdQUyA9IG51bGw7IGxldCBkZXZpY2VIZWFkaW5nID0gbnVsbDsKbGV0IG1lZGlhU3RyZWFtID0gbnVsbCwgcmVjb3JkZXIgPSBudWxsLCBjaHVua3MgPSBbXTsgbGV0IGJhdGNoQXVkaW9CbG9iID0gbnVsbCwgYmF0Y2hBdWRpb0V4dCA9ICJ3ZWJtIjsKbGV0IHBlcm1pc3Npb25TdGF0ZSA9ICJ1bmtub3duIjsKY29uc3QgU09MQVJfS0VZID0gIkVIMTAwMzAwNjpzb2xhcl9zYW1wbGVzIjsKZnVuY3Rpb24gbG9hZFNvbGFyKCl7IHRyeSB7IHJldHVybiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFNPTEFSX0tFWSl8fCJbXSIpOyB9IGNhdGNoIHsgcmV0dXJuIFtdOyB9IH0KZnVuY3Rpb24gc2F2ZVNvbGFyKGFycil7IGxvY2FsU3RvcmFnZS5zZXRJdGVtKFNPTEFSX0tFWSwgSlNPTi5zdHJpbmdpZnkoYXJyKSk7IH0KZnVuY3Rpb24gdWlkKCl7IHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyLDEwKTsgfQpjb25zdCB0b1JhZCA9IGQgPT4gZCAqIE1hdGguUEkgLyAxODA7IGNvbnN0IHRvRGVnID0gciA9PiByICogMTgwIC8gTWF0aC5QSTsKZnVuY3Rpb24gb2Zmc2V0TGF0TG9uKGxhdCwgbG9uLCBkaXN0YW5jZU1ldGVycywgYmVhcmluZ0RlZyl7CiAgY29uc3QgUiA9IDYzNzEwMDAsIM60ID0gZGlzdGFuY2VNZXRlcnMgLyBSLCDOuCA9IHRvUmFkKGJlYXJpbmdEZWcpOwogIGNvbnN0IM+GMSA9IHRvUmFkKGxhdCksIM67MSA9IHRvUmFkKGxvbik7CiAgY29uc3Qgc2luz4YxID0gTWF0aC5zaW4oz4YxKSwgY29zz4YxID0gTWF0aC5jb3Moz4YxKTsKICBjb25zdCBjb3POtCA9IE1hdGguY29zKM60KSwgc2luzrQgPSBNYXRoLnNpbijOtCk7CiAgY29uc3Qgc2luz4YyID0gc2luz4YxKmNvc860ICsgY29zz4YxKnNpbs60Kk1hdGguY29zKM64KTsKICBjb25zdCDPhjIgPSBNYXRoLmFzaW4oc2luz4YyKTsKICBjb25zdCB5ID0gTWF0aC5zaW4ozrgpKnNpbs60KmNvc8+GMTsKICBjb25zdCB4ID0gY29zzrQgLSBzaW7PhjEqc2luz4YyOwogIGNvbnN0IM67MiA9IM67MSArIE1hdGguYXRhbjIoeSwgeCk7CiAgcmV0dXJuIHtsYXQ6IHRvRGVnKM+GMiksIGxvbjogKHRvRGVnKM67MikrNTQwKSUzNjAgLSAxODB9Owp9CmZ1bmN0aW9uIGRtc1RvRGVnKGRtcyl7IGZ1bmN0aW9uIHZhbCh4KXsgcmV0dXJuIEFycmF5LmlzQXJyYXkoeCkgPyAoeFswXS94WzFdKSA6IHg7IH0gcmV0dXJuIHZhbChkbXNbMF0pICsgdmFsKGRtc1sxXSkvNjAgKyB2YWwoZG1zWzJdKS8zNjAwOyB9CmFzeW5jIGZ1bmN0aW9uIHJlYWRFWElGR1BTKGZpbGUpewogIHRyeXsKICAgIGNvbnN0IGJ1ZiA9IGF3YWl0IGZpbGUuYXJyYXlCdWZmZXIoKTsKICAgIGNvbnN0IGR2ID0gbmV3IERhdGFWaWV3KGJ1Zik7CiAgICBpZihkdi5nZXRVaW50MTYoMCkgIT09IDB4RkZEOCkgcmV0dXJuIG51bGw7CiAgICBsZXQgb2Zmc2V0ID0gMjsKICAgIHdoaWxlKG9mZnNldCA8IGR2LmJ5dGVMZW5ndGgpewogICAgICBjb25zdCBtYXJrZXIgPSBkdi5nZXRVaW50MTYob2Zmc2V0KTsgb2Zmc2V0ICs9IDI7CiAgICAgIGNvbnN0IHNpemUgPSBkdi5nZXRVaW50MTYob2Zmc2V0KTsgb2Zmc2V0ICs9IDI7CiAgICAgIGlmKG1hcmtlciA9PT0gMHhGRkUxKXsKICAgICAgICBpZihkdi5nZXRVaW50MzIob2Zmc2V0KSA9PT0gMHg0NTc4Njk2NiAmJiBkdi5nZXRVaW50MTYob2Zmc2V0KzQpID09PSAweDAwMDApewogICAgICAgICAgY29uc3QgdGlmZiA9IG9mZnNldCArIDY7CiAgICAgICAgICBjb25zdCBlbmRpYW4gPSBkdi5nZXRVaW50MTYodGlmZikgPT09IDB4NDk0OSA/ICdMRScgOiAnQkUnOwogICAgICAgICAgY29uc3QgZ2V0VTE2ID0gKHApPT4gZW5kaWFuPT09J0xFJz8gZHYuZ2V0VWludDE2KHAsdHJ1ZSk6ZHYuZ2V0VWludDE2KHAsZmFsc2UpOwogICAgICAgICAgY29uc3QgZ2V0VTMyID0gKHApPT4gZW5kaWFuPT09J0xFJz8gZHYuZ2V0VWludDMyKHAsdHJ1ZSk6ZHYuZ2V0VWludDMyKHAsZmFsc2UpOwogICAgICAgICAgY29uc3QgaWZkMCA9IHRpZmYgKyBnZXRVMzIodGlmZis0KTsKICAgICAgICAgIGNvbnN0IG51bURpciA9IGdldFUxNihpZmQwKTsKICAgICAgICAgIGxldCBncHNJRkRPZmZzZXQgPSBudWxsOwogICAgICAgICAgZm9yKGxldCBpPTA7aTxudW1EaXI7aSsrKXsKICAgICAgICAgICAgY29uc3QgZSA9IGlmZDAgKyAyICsgaSoxMjsKICAgICAgICAgICAgY29uc3QgdGFnID0gZ2V0VTE2KGUpOwogICAgICAgICAgICBpZih0YWcgPT09IDB4ODgyNSl7IGdwc0lGRE9mZnNldCA9IHRpZmYgKyBnZXRVMzIoZSs4KTsgYnJlYWs7IH0KICAgICAgICAgIH0KICAgICAgICAgIGlmKCFncHNJRkRPZmZzZXQpIHJldHVybiBudWxsOwogICAgICAgICAgY29uc3QgbiA9IGdldFUxNihncHNJRkRPZmZzZXQpOwogICAgICAgICAgbGV0IGxhdFJlZiwgbGF0LCBsb25SZWYsIGxvbiwgYWx0OwogICAgICAgICAgZnVuY3Rpb24gcmVhZFJhdGlvbmFsKHApeyBjb25zdCBudW0gPSBnZXRVMzIocCksIGRlbiA9IGdldFUzMihwKzQpOyByZXR1cm4gW251bSwgZGVuXTsgfQogICAgICAgICAgZm9yKGxldCBpPTA7aTxuO2krKyl7CiAgICAgICAgICAgIGNvbnN0IGUgPSBncHNJRkRPZmZzZXQgKyAyICsgaSoxMjsKICAgICAgICAgICAgY29uc3QgdGFnID0gZ2V0VTE2KGUpOwogICAgICAgICAgICBjb25zdCB0eXAgPSBnZXRVMTYoZSsyKTsKICAgICAgICAgICAgY29uc3QgY250ID0gZ2V0VTMyKGUrNCk7CiAgICAgICAgICAgIGNvbnN0IHZhbCA9IGUrODsKICAgICAgICAgICAgY29uc3QgdmFsT2ZmID0gY250KiAodHlwPT09NT84Oih0eXA9PT0yPzE6NCkpID4gNCA/IHRpZmYgKyBnZXRVMzIodmFsKSA6IHZhbDsKICAgICAgICAgICAgaWYodGFnPT09MHgwMDAxKSBsYXRSZWYgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGR2LmdldFVpbnQ4KHZhbE9mZikpOwogICAgICAgICAgICBpZih0YWc9PT0weDAwMDIpeyBsYXQgPSBbcmVhZFJhdGlvbmFsKHZhbE9mZiksIHJlYWRSYXRpb25hbCh2YWxPZmYrOCksIHJlYWRSYXRpb25hbCh2YWxPZmYrMTYpXTsgfQogICAgICAgICAgICBpZih0YWc9PT0weDAwMDMpIGxvblJlZiA9IFN0cmluZy5mcm9tQ2hhckNvZGUoZHYuZ2V0VWludDgodmFsT2ZmKSk7CiAgICAgICAgICAgIGlmKHRhZz09PTB4MDAwNCl7IGxvbiA9IFtyZWFkUmF0aW9uYWwodmFsT2ZmKSwgcmVhZFJhdGlvbmFsKHZhbE9mZis4KSwgcmVhZFJhdGlvbmFsKHZhbE9mZisxNildOyB9CiAgICAgICAgICAgIGlmKHRhZz09PTB4MDAwNil7IGNvbnN0IHIgPSByZWFkUmF0aW9uYWwodmFsT2ZmKTsgYWx0ID0gclswXS9yWzFdOyB9CiAgICAgICAgICB9CiAgICAgICAgICBpZihsYXQgJiYgbG9uKXsKICAgICAgICAgICAgbGV0IGxhdERlZyA9IGRtc1RvRGVnKGxhdCk7IGlmKGxhdFJlZj09PSdTJykgbGF0RGVnID0gLWxhdERlZzsKICAgICAgICAgICAgbGV0IGxvbkRlZyA9IGRtc1RvRGVnKGxvbik7IGlmKGxvblJlZj09PSdXJykgbG9uRGVnID0gLWxvbkRlZzsKICAgICAgICAgICAgcmV0dXJuIHsgbGF0OiBsYXREZWcsIGxvbjogbG9uRGVnLCBhbHQ6IGFsdCA/PyBudWxsLCBzcmM6ICJleGlmIiB9OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBvZmZzZXQgKz0gc2l6ZSAtIDI7CiAgICB9CiAgfWNhdGNoKGUpe30KICByZXR1cm4gbnVsbDsKfQpmdW5jdGlvbiByb2xlc0Zyb21UYWdzKHRhZ3MpewogIGNvbnN0IG1hcCA9IHsgc3RyZWFtOiJzdHJlYW1zIiwgYmxhY2tiZXJyeToiYmxhY2tiZXJyeSIsIHJvYWQ6InJvYWRzIiwgYnVpbGRpbmc6ImJ1aWxkaW5ncyIsIHV0aWxpdHk6InV0aWxpdGllcyIsCiAgICBzbG9wZToic2xvcGUiLCBhc3BlY3Q6ImFzcGVjdCIsIHdldGxhbmRzOiJ3ZXRsYW5kcyIsIGZsb29kcGxhaW46ImZsb29kcGxhaW4iLCBzaWx2aWN1bHR1cmU6InNpbHZpY3VsdHVyZSIsCiAgICB3aWxkbGlmZToid2lsZGxpZmUiLCBnZWVzZToid2lsZGxpZmUiLCBjaGlja2Vuczoid2lsZGxpZmUiLCAic29sYXItcGFuZWwiOiJzb2xhciIsICJvdXBlcy1tZWdhNSI6InBvd2VyIiwKICAgICJzaXRlLWNvbnRleHQiOiJjb250ZXh0Iiwgd2VhdGhlcjoiY29udGV4dCIgfTsKICBjb25zdCByb2xlcyA9IG5ldyBTZXQoKTsgKHRhZ3N8fFtdKS5mb3JFYWNoKHQgPT4geyBjb25zdCBrID0gKHR8fCcnKS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCk7IGlmKG1hcFtrXSkgcm9sZXMuYWRkKG1hcFtrXSk7IH0pOwogIHJldHVybiBBcnJheS5mcm9tKHJvbGVzKTsKfQpmdW5jdGlvbiBtZXRhVGV4dChpdGVtKXsKICBjb25zdCBnID0gaXRlbS5jYW1lcmFfZ3BzID8gYCR7aXRlbS5jYW1lcmFfZ3BzLmxhdC50b0ZpeGVkKDYpfSwgJHtpdGVtLmNhbWVyYV9ncHMubG9uLnRvRml4ZWQoNil9ICgke2l0ZW0uY2FtZXJhX2dwcy5zcmN9JHtpdGVtLmNhbWVyYV9ncHMuYWNjIT1udWxsP2AsIMKxJHtNYXRoLnJvdW5kKGl0ZW0uY2FtZXJhX2dwcy5hY2MpfW1gOicnfSlgIDogJ25vIGNhbWVyYSBHUFMnOwogIGNvbnN0IHMgPSBpdGVtLnN1YmplY3RfZ3BzID8gYCR7aXRlbS5zdWJqZWN0X2dwcy5sYXQudG9GaXhlZCg2KX0sICR7aXRlbS5zdWJqZWN0X2dwcy5sb24udG9GaXhlZCg2KX1gIDogJ25vIHN1YmplY3QgR1BTJzsKICBjb25zdCBhdWQgPSBpdGVtLnZvaWNlID8gYPCfjpnvuI8gJHtNYXRoLnJvdW5kKChpdGVtLnZvaWNlLmR1cmF0aW9ufHwwKSl9c2AgOiAnbm8gdm9pY2Ugbm90ZSc7CiAgcmV0dXJuIGBjYW1lcmE6ICR7Z30g4oCiIHN1YmplY3Q6ICR7c30g4oCiIGhlYWRpbmc6ICR7aXRlbS5oZWFkaW5nID8/ICfigJQnfcKwIOKAoiBkaXN0OiAke2l0ZW0uZGlzdF9tID8/ICfigJQnfSBtIOKAoiAke2F1ZH1gOwp9CmFzeW5jIGZ1bmN0aW9uIHN0YXJ0UmVjb3JkZXIoKXsgaWYoIW5hdmlnYXRvci5tZWRpYURldmljZXMgfHwgIW5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKSB0aHJvdyBuZXcgRXJyb3IoIk1lZGlhIG5vdCBzdXBwb3J0ZWQiKTsgaWYoIW1lZGlhU3RyZWFtKSBtZWRpYVN0cmVhbSA9IGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHsgYXVkaW86dHJ1ZSB9KTsgcmV0dXJuIG5ldyBNZWRpYVJlY29yZGVyKG1lZGlhU3RyZWFtKTsgfQpmdW5jdGlvbiByZW5kZXJQaG90byhpdCl7CiAgY29uc3Qgd3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOyB3cmFwLmNsYXNzTmFtZSA9ICd0aHVtYic7CiAgY29uc3QgZ3BzUGlsbCA9IGl0LmNhbWVyYV9ncHMgPyAnPHNwYW4gY2xhc3M9InBpbGwgb2siPkdQUyBPSzwvc3Bhbj4nIDogJzxzcGFuIGNsYXNzPSJwaWxsIGJhZCI+Tm8gR1BTIHlldDwvc3Bhbj4nOwogIHdyYXAuaW5uZXJIVE1MID0gYAogICAgPGltZyBzcmM9IiR7aXQucHJldmlld30iIGFsdD0icHJldmlldyIvPgogICAgPGRpdiBzdHlsZT0iZmxleDoxIj4KICAgICAgPGRpdiBjbGFzcz0icm93IiBzdHlsZT0ianVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW4iPgogICAgICAgIDxkaXY+PGI+JHtpdC5uYW1lfTwvYj48L2Rpdj4KICAgICAgICA8ZGl2PiR7Z3BzUGlsbH08L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9Im1ldGEiIGlkPSJtZXRhLSR7aXQuaWR9Ij4ke21ldGFUZXh0KGl0KX08L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0iY2hpcHMiIHN0eWxlPSJtYXJnaW4tdG9wOjZweCI+CiAgICAgICAgJHtbJ2JsYWNrYmVycnknLCdoeWRybycsJ2Vyb3Npb24nLCd1dGlsaXR5JywnYnVpbGRpbmcnLCdyb2FkJywnc3RyZWFtJywnd2lsZGxpZmUnLCdnZWVzZScsJ2NoaWNrZW5zJywnc2lsdmljdWx0dXJlJywnc29pbC1zYW1wbGUnLCdzb2xhci1wYW5lbCcsJ291cGVzLW1lZ2E1Jywnc2l0ZS1jb250ZXh0Jywnd2VhdGhlciddLm1hcCh0PT5gPHNwYW4gY2xhc3M9InRhZyAke2l0LnRhZ3MuaW5jbHVkZXModCk/J29uJzonJ30iIGRhdGEtdGFnPSIke3R9IiBkYXRhLWlkPSIke2l0LmlkfSI+JHt0fTwvc3Bhbj5gKS5qb2luKCcnKX0KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9InJvdyIgc3R5bGU9Im1hcmdpbi10b3A6NnB4Ij4KICAgICAgICA8bGFiZWw+SGVhZGluZyAowrApIDxpbnB1dCBjbGFzcz0iaW5wdXQiIHN0eWxlPSJ3aWR0aDo4MHB4IiBkYXRhLWg9IiR7aXQuaWR9IiB2YWx1ZT0iJHtpdC5oZWFkaW5nID8/ICcnfSIgcGxhY2Vob2xkZXI9ImF1dG8iLz48L2xhYmVsPgogICAgICAgIDxsYWJlbD5EaXN0YW5jZSAobSkgPGlucHV0IGNsYXNzPSJpbnB1dCIgc3R5bGU9IndpZHRoOjgwcHgiIGRhdGEtZD0iJHtpdC5pZH0iIHZhbHVlPSIke2l0LmRpc3RfbSA/PyAnJ30iIHBsYWNlaG9sZGVyPSJkZWZhdWx0Ii8+PC9sYWJlbD4KICAgICAgICA8bGFiZWw+U25hcCBoaW50IAogICAgICAgICAgPHNlbGVjdCBjbGFzcz0iaW5wdXQiIGRhdGEtc25hcD0iJHtpdC5pZH0iPgogICAgICAgICAgICAke1snbm9uZScsJ3N0cmVhbScsJ3JvYWQnLCdwYXJjZWwnLCdibGFja2JlcnJ5J10ubWFwKG9wdCA9PiBgPG9wdGlvbiB2YWx1ZT0iJHtvcHR9IiAke2l0LnNuYXBfaGludD09PW9wdD8nc2VsZWN0ZWQnOicnfT4ke29wdH08L29wdGlvbj5gKS5qb2luKCcnKX0KICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgIDwvbGFiZWw+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIHNlY29uZGFyeSIgZGF0YS1hcHBseT0iJHtpdC5pZH0iPkFwcGx5PC9idXR0b24+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGdob3N0IiBkYXRhLWF0dGFjaD0iJHtpdC5pZH0iPkF0dGFjaCBjdXJyZW50IEdQUzwvYnV0dG9uPgogICAgICA8L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0icm93IiBzdHlsZT0iYWxpZ24taXRlbXM6ZmxleC1zdGFydDsgbWFyZ2luLXRvcDo2cHgiPgogICAgICAgIDx0ZXh0YXJlYSBjbGFzcz0iaW5wdXQiIGRhdGEtaWQ9IiR7aXQuaWR9IiBwbGFjZWhvbGRlcj0iTm90ZXMgZm9yIHRoaXMgcGhvdG/igKYiPiR7aXQubm90ZXN8fCcnfTwvdGV4dGFyZWE+CiAgICAgICAgPGRpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsIj5Wb2ljZSBub3RlPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gZ2hvc3QiIGRhdGEtcmVjPSIke2l0LmlkfSI+UmVjb3JkPC9idXR0b24+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBnaG9zdCIgZGF0YS1zdG9wPSIke2l0LmlkfSIgZGlzYWJsZWQ+U3RvcDwvYnV0dG9uPgogICAgICAgICAgICA8YXVkaW8gZGF0YS1hdWRpbz0iJHtpdC5pZH0iIGNvbnRyb2xzIGNsYXNzPSIke2l0LnZvaWNlPycnOidoaWRkZW4nfSI+PC9hdWRpbz4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvZGl2PmA7CiAgd3JhcC5xdWVyeVNlbGVjdG9yQWxsKCcudGFnJykuZm9yRWFjaChlbCA9PiB7CiAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsgY29uc3QgaWQgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKTsgY29uc3QgdCA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS10YWcnKTsgY29uc3QgaXQgPSBiYXRjaC5maW5kKHg9PnguaWQ9PT1pZCk7IGlmKCFpdCkgcmV0dXJuOyBpZihpdC50YWdzLmluY2x1ZGVzKHQpKSBpdC50YWdzID0gaXQudGFncy5maWx0ZXIoeD0+eCE9PXQpOyBlbHNlIGl0LnRhZ3MucHVzaCh0KTsgZWwuY2xhc3NMaXN0LnRvZ2dsZSgnb24nKTsgfSk7CiAgfSk7CiAgd3JhcC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hcHBseV0nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgIGNvbnN0IGlkID0gd3JhcC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hcHBseV0nKS5nZXRBdHRyaWJ1dGUoJ2RhdGEtYXBwbHknKTsKICAgIGNvbnN0IGl0ID0gYmF0Y2guZmluZCh4PT54LmlkPT09aWQpOyBpZighaXQpIHJldHVybjsKICAgIGNvbnN0IGggPSBwYXJzZUZsb2F0KHdyYXAucXVlcnlTZWxlY3RvcihgW2RhdGEtaD0iJHtpZH0iXWApLnZhbHVlKTsKICAgIGNvbnN0IGQgPSBwYXJzZUZsb2F0KHdyYXAucXVlcnlTZWxlY3RvcihgW2RhdGEtZD0iJHtpZH0iXWApLnZhbHVlKTsKICAgIGNvbnN0IHNuYXAgPSB3cmFwLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXNuYXA9IiR7aWR9Il1gKS52YWx1ZTsKICAgIGlmKCFpc05hTihoKSkgaXQuaGVhZGluZyA9ICgoaCUzNjApKzM2MCklMzYwOyBpZighaXNOYU4oZCkpIGl0LmRpc3RfbSA9IE1hdGgubWF4KDAsIGQpOyBpdC5zbmFwX2hpbnQgPSBzbmFwOwogICAgaXQubm90ZXMgPSB3cmFwLnF1ZXJ5U2VsZWN0b3IoYHRleHRhcmVhW2RhdGEtaWQ9IiR7aWR9Il1gKS52YWx1ZSB8fCAnJzsgcmVjb21wdXRlU3ViamVjdChpdCk7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWV0YS0nK2lkKS50ZXh0Q29udGVudCA9IG1ldGFUZXh0KGl0KTsKICB9KTsKICB3cmFwLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWF0dGFjaF0nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsgaWYoZGV2aWNlR1BTKXsgaXQuY2FtZXJhX2dwcyA9IHsgLi4uZGV2aWNlR1BTIH07IHJlY29tcHV0ZVN1YmplY3QoaXQpOyB3cmFwLnF1ZXJ5U2VsZWN0b3IoJy5waWxsLmJhZCcpPy5jbGFzc0xpc3QucmVtb3ZlKCdiYWQnKTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21ldGEtJytpdC5pZCkudGV4dENvbnRlbnQgPSBtZXRhVGV4dChpdCk7IHdyYXAucXVlcnlTZWxlY3RvcignW2RhdGEtYXR0YWNoXScpLmRpc2FibGVkID0gdHJ1ZTsgfSBlbHNlIHsgYWxlcnQoJ05vIGRldmljZSBHUFMgYXZhaWxhYmxlIHlldC4nKTsgfSB9KTsKICBjb25zdCByZWNCdG4gPSB3cmFwLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXJlYz0iJHtpdC5pZH0iXWApOyBjb25zdCBzdG9wQnRuID0gd3JhcC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1zdG9wPSIke2l0LmlkfSJdYCk7IGNvbnN0IGF1ZGlvRWwgPSB3cmFwLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWF1ZGlvPSIke2l0LmlkfSJdYCk7CiAgcmVjQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4geyB0cnl7IHJlY0J0bi5kaXNhYmxlZCA9IHRydWU7IHN0b3BCdG4uZGlzYWJsZWQgPSBmYWxzZTsgY29uc3QgcmVjID0gYXdhaXQgc3RhcnRSZWNvcmRlcigpOyBpdC5fcmVjID0gcmVjOyBpdC5fcmVjU3RhcnQgPSBEYXRlLm5vdygpOyBpdC5fY2h1bmtzID0gW107IHJlYy5vbmRhdGFhdmFpbGFibGUgPSAoZSk9PnsgaWYoZS5kYXRhICYmIGUuZGF0YS5zaXplPjApIGl0Ll9jaHVua3MucHVzaChlLmRhdGEpOyB9OyByZWMub25zdG9wID0gKCk9PnsgY29uc3QgYmxvYiA9IG5ldyBCbG9iKGl0Ll9jaHVua3MsIHsgdHlwZTogaXQuX2NodW5rc1swXT8udHlwZSB8fCAnYXVkaW8vd2VibScgfSk7IGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7IGF1ZGlvRWwuc3JjID0gdXJsOyBhdWRpb0VsLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpOyBpdC52b2ljZSA9IHsgYmxvYiwgZHVyYXRpb246IChEYXRlLm5vdygpLWl0Ll9yZWNTdGFydCkvMTAwMCwgZXh0OiAoYmxvYi50eXBlLmluY2x1ZGVzKCdvZ2cnKT8nb2dnJzond2VibScpIH07IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZXRhLScraXQuaWQpLnRleHRDb250ZW50ID0gbWV0YVRleHQoaXQpOyB9OyByZWMuc3RhcnQoKTsgfWNhdGNoKGUpeyBhbGVydCgnTWljIG5vdCBhdmFpbGFibGUgb3IgcGVybWlzc2lvbiBkZW5pZWQuJyk7IHJlY0J0bi5kaXNhYmxlZCA9IGZhbHNlOyBzdG9wQnRuLmRpc2FibGVkID0gdHJ1ZTsgfSB9KTsKICBzdG9wQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4geyB0cnl7IGlmKGl0Ll9yZWMgJiYgaXQuX3JlYy5zdGF0ZSE9PSdpbmFjdGl2ZScpeyBpdC5fcmVjLnN0b3AoKTsgfSB9Y2F0Y2goZSl7fSByZWNCdG4uZGlzYWJsZWQgPSBmYWxzZTsgc3RvcEJ0bi5kaXNhYmxlZCA9IHRydWU7IH0pOwogIHJldHVybiB3cmFwOwp9CmZ1bmN0aW9uIHJlZnJlc2hMaXN0KCl7IGxpc3RFbC5pbm5lckhUTUw9Jyc7IGlmKCFiYXRjaC5sZW5ndGgpeyBlbXB0eUhpbnQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7IHJldHVybjsgfSBlbXB0eUhpbnQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7IGJhdGNoLmZvckVhY2goaXQgPT4gbGlzdEVsLmFwcGVuZENoaWxkKHJlbmRlclBob3RvKGl0KSkpOyB9CmFzeW5jIGZ1bmN0aW9uIGZpbGVUb1ByZXZpZXcoZmlsZSwgbWF4RWRnZT00MDApeyByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTsgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7IGltZy5vbmxvYWQgPSAoKSA9PiB7IGNvbnN0IHcgPSBpbWcud2lkdGgsIGggPSBpbWcuaGVpZ2h0OyBjb25zdCBzY2FsZSA9IE1hdGgubWluKDEsIG1heEVkZ2UvTWF0aC5tYXgodyxoKSk7IGNvbnN0IG53ID0gTWF0aC5yb3VuZCh3KnNjYWxlKSwgbmggPSBNYXRoLnJvdW5kKGgqc2NhbGUpOyBjb25zdCBjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7IGMud2lkdGg9bnc7IGMuaGVpZ2h0PW5oOyBjb25zdCBjeCA9IGMuZ2V0Q29udGV4dCgnMmQnKTsgY3guZHJhd0ltYWdlKGltZywwLDAsbncsbmgpOyBjb25zdCBkYXRhID0gYy50b0RhdGFVUkwoJ2ltYWdlL2pwZWcnLCAwLjgpOyBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7IHJlc29sdmUoZGF0YSk7IH07IGltZy5zcmMgPSB1cmw7IH0pOyB9CmFzeW5jIGZ1bmN0aW9uIGZpbGVUb1Jlc2l6ZWRCbG9iKGZpbGUsIG1heEVkZ2U9MTYwMCl7IHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4geyBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpOyBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTsgaW1nLm9ubG9hZCA9ICgpID0+IHsgY29uc3QgdyA9IGltZy53aWR0aCwgaCA9IGltZy5oZWlnaHQ7IGNvbnN0IHNjYWxlID0gTWF0aC5taW4oMSwgbWF4RWRnZS9NYXRoLm1heCh3LGgpKTsgY29uc3QgbncgPSBNYXRoLnJvdW5kKHcqc2NhbGUpLCBuaCA9IE1hdGgucm91bmQoaCpzY2FsZSk7IGNvbnN0IGMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsgYy53aWR0aD1udzsgYy5oZWlnaHQ9bmg7IGNvbnN0IGN4ID0gYy5nZXRDb250ZXh0KCcyZCcpOyBjeC5kcmF3SW1hZ2UoaW1nLDAsMCxudyxuaCk7IGMudG9CbG9iKGIgPT4geyBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7IHJlc29sdmUoYik7IH0sICdpbWFnZS9qcGVnJywgMC44NSk7IH07IGltZy5zcmMgPSB1cmw7IH0pOyB9Ci8vIFNlbnNvcnMKZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dldEdQUycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVxdWVzdE9uZVNob3RHUFMpOwpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2V0SGVhZGluZycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4gewogIGNvbnN0IHN0YXR1cyA9ICQoIiNzdGF0dXMiKTsKICBjb25zdCBoYW5kbGUgPSAoaGVhZGluZ0RlZykgPT4geyBkZXZpY2VIZWFkaW5nID0gKChoZWFkaW5nRGVnJTM2MCkrMzYwKSUzNjA7IHN0YXR1cy50ZXh0Q29udGVudCA9IGBIZWFkaW5nOiAke2RldmljZUhlYWRpbmcudG9GaXhlZCgwKX3CsGA7IGJhdGNoLmZvckVhY2goaXQgPT4geyBpZihpdC5oZWFkaW5nPT1udWxsKSBpdC5oZWFkaW5nID0gZGV2aWNlSGVhZGluZzsgcmVjb21wdXRlU3ViamVjdChpdCk7IH0pOyByZWZyZXNoTGlzdCgpOyB9OwogIGlmICh0eXBlb2YgRGV2aWNlT3JpZW50YXRpb25FdmVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIERldmljZU9yaWVudGF0aW9uRXZlbnQucmVxdWVzdFBlcm1pc3Npb24gPT09ICdmdW5jdGlvbicpIHsKICAgIHRyeSB7IGNvbnN0IHAgPSBhd2FpdCBEZXZpY2VPcmllbnRhdGlvbkV2ZW50LnJlcXVlc3RQZXJtaXNzaW9uKCk7IGlmIChwICE9PSAnZ3JhbnRlZCcpIHsgc3RhdHVzLnRleHRDb250ZW50ID0gIkhlYWRpbmc6IHBlcm1pc3Npb24gZGVuaWVkIChzZXQgbWFudWFsbHkpLiI7IHJldHVybjsgfSB9IGNhdGNoKGUpeyBzdGF0dXMudGV4dENvbnRlbnQgPSAiSGVhZGluZzogcGVybWlzc2lvbiBlcnJvci4iOyByZXR1cm47IH0KICB9CiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2RldmljZW9yaWVudGF0aW9uJywgZnVuY3Rpb24gb25PcmllbnQoZSl7IGxldCBoZWFkaW5nID0gbnVsbDsgaWYoZS53ZWJraXRDb21wYXNzSGVhZGluZyAhPSBudWxsKSBoZWFkaW5nID0gZS53ZWJraXRDb21wYXNzSGVhZGluZzsgZWxzZSBpZihlLmFscGhhICE9IG51bGwpIGhlYWRpbmcgPSAzNjAgLSBlLmFscGhhOyBpZihoZWFkaW5nICE9IG51bGwpeyBoYW5kbGUoaGVhZGluZyk7IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdkZXZpY2VvcmllbnRhdGlvbicsIG9uT3JpZW50KTsgfSB9LCB7IG9uY2U6dHJ1ZSB9KTsKfSk7CmFzeW5jIGZ1bmN0aW9uIHN0YXJ0R1BTV2F0Y2goKXsKICBjb25zdCBzdGF0dXMgPSAkKCIjc3RhdHVzIik7IGNvbnN0IGh0dHBzSGludCA9ICQoIiNodHRwc0hpbnQiKTsKICBodHRwc0hpbnQudGV4dENvbnRlbnQgPSBsb2NhdGlvbi5wcm90b2NvbCA9PT0gJ2h0dHBzOicgfHwgbG9jYXRpb24uaG9zdG5hbWUgPT09ICdsb2NhbGhvc3QnIHx8IGxvY2F0aW9uLnByb3RvY29sID09PSAnZmlsZTonID8gIiIgOiAiTm90IEhUVFBTL2xvY2FsaG9zdCDigJQgYnJvd3NlciBHUFMgd2lsbCBub3QgcHJvbXB0LiBVc2UgSFRUUFMgb3Igb3BlbiBhcyBhIEZpbGUgVVJMLiI7CiAgaWYoIW5hdmlnYXRvci5nZW9sb2NhdGlvbil7IHN0YXR1cy50ZXh0Q29udGVudCA9ICJHUFMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXIuIjsgcmV0dXJuOyB9CiAgaWYgKG5hdmlnYXRvci5wZXJtaXNzaW9ucz8ucXVlcnkpIHsgdHJ5eyBjb25zdCBwID0gYXdhaXQgbmF2aWdhdG9yLnBlcm1pc3Npb25zLnF1ZXJ5KHsgbmFtZTonZ2VvbG9jYXRpb24nIH0pOyBwZXJtaXNzaW9uU3RhdGUgPSBwLnN0YXRlOyBwLm9uY2hhbmdlID0gKCk9PiBwZXJtaXNzaW9uU3RhdGUgPSBwLnN0YXRlOyBpZiAocC5zdGF0ZSA9PT0gJ2RlbmllZCcpIHsgc3RhdHVzLnRleHRDb250ZW50ID0gIkdQUzogZGVuaWVkIOKAlCBTaXRlIHNldHRpbmdzIOKGkiBMb2NhdGlvbiDihpIgQWxsb3csIHRoZW4gcmVsb2FkLiI7IHJldHVybjsgfSB9Y2F0Y2goZSl7fSB9CiAgbmF2aWdhdG9yLmdlb2xvY2F0aW9uLndhdGNoUG9zaXRpb24ocG9zID0+IHsgY29uc3QgeyBsYXRpdHVkZSwgbG9uZ2l0dWRlLCBhY2N1cmFjeSB9ID0gcG9zLmNvb3JkczsgZGV2aWNlR1BTID0geyBsYXQ6IGxhdGl0dWRlLCBsb246IGxvbmdpdHVkZSwgYWNjOiBhY2N1cmFjeSwgc3JjOidkZXZpY2UnIH07IHN0YXR1cy50ZXh0Q29udGVudCA9IGBHUFM6ICR7bGF0aXR1ZGUudG9GaXhlZCg2KX0sICR7bG9uZ2l0dWRlLnRvRml4ZWQoNil9ICjCsSR7TWF0aC5yb3VuZChhY2N1cmFjeSl9IG0pYDsgbGV0IGNoYW5nZWQgPSBmYWxzZTsgYmF0Y2guZm9yRWFjaChpdCA9PiB7IGlmKCFpdC5jYW1lcmFfZ3BzICYmIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncHNNb2RlJykudmFsdWUgIT09ICdleGlmX29ubHknKXsgaXQuY2FtZXJhX2dwcyA9IHsgLi4uZGV2aWNlR1BTIH07IHJlY29tcHV0ZVN1YmplY3QoaXQpOyBjaGFuZ2VkID0gdHJ1ZTsgfSB9KTsgaWYoY2hhbmdlZCkgcmVmcmVzaExpc3QoKTsgfSwgZXJyID0+IHsgc3RhdHVzLnRleHRDb250ZW50ID0gYEdQUyBlcnJvcjogJHtlcnIubWVzc2FnZX1gOyB9LCB7IGVuYWJsZUhpZ2hBY2N1cmFjeTp0cnVlLCBtYXhpbXVtQWdlOjAsIHRpbWVvdXQ6MTAwMDAgfSk7Cn0KZnVuY3Rpb24gcmVxdWVzdE9uZVNob3RHUFMoKXsKICBjb25zdCBzdGF0dXMgPSAkKCIjc3RhdHVzIik7CiAgaWYoIW5hdmlnYXRvci5nZW9sb2NhdGlvbil7IHN0YXR1cy50ZXh0Q29udGVudCA9ICJHUFMgbm90IHN1cHBvcnRlZC4iOyByZXR1cm47IH0KICBpZihwZXJtaXNzaW9uU3RhdGUgPT09ICdkZW5pZWQnKXsgc3RhdHVzLnRleHRDb250ZW50ID0gIkdQUzogZGVuaWVkIOKAlCBlbmFibGUgaW4gU2l0ZSBzZXR0aW5ncyBmaXJzdC4iOyByZXR1cm47IH0KICBzdGF0dXMudGV4dENvbnRlbnQgPSAiUmVxdWVzdGluZyBHUFPigKYiOwogIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oKHBvcyk9PnsgY29uc3QgeyBsYXRpdHVkZSwgbG9uZ2l0dWRlLCBhY2N1cmFjeSB9ID0gcG9zLmNvb3JkczsgZGV2aWNlR1BTID0geyBsYXQ6IGxhdGl0dWRlLCBsb246IGxvbmdpdHVkZSwgYWNjOiBhY2N1cmFjeSwgc3JjOidkZXZpY2UnIH07IHN0YXR1cy50ZXh0Q29udGVudCA9IGBHUFM6ICR7bGF0aXR1ZGUudG9GaXhlZCg2KX0sICR7bG9uZ2l0dWRlLnRvRml4ZWQoNil9ICjCsSR7TWF0aC5yb3VuZChhY2N1cmFjeSl9IG0pYDsgbGV0IGNoYW5nZWQgPSBmYWxzZTsgYmF0Y2guZm9yRWFjaChpdCA9PiB7IGlmKCFpdC5jYW1lcmFfZ3BzICYmIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncHNNb2RlJykudmFsdWUgIT09ICdleGlmX29ubHknKXsgaXQuY2FtZXJhX2dwcyA9IHsuLi5kZXZpY2VHUFN9OyByZWNvbXB1dGVTdWJqZWN0KGl0KTsgY2hhbmdlZCA9IHRydWU7IH0gfSk7IGlmKGNoYW5nZWQpIHJlZnJlc2hMaXN0KCk7IH0sIChlcnIpPT57IHN0YXR1cy50ZXh0Q29udGVudCA9ICJHUFMgZXJyb3I6ICIgKyBlcnIubWVzc2FnZTsgfSwgeyBlbmFibGVIaWdoQWNjdXJhY3k6dHJ1ZSwgbWF4aW11bUFnZToxMDAwMCwgdGltZW91dDoxMjAwMCB9KTsKfQovLyBJbnRha2UKJCgiI2ZpbGVJbnB1dCIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGFzeW5jIChlKSA9PiB7IGNvbnN0IGZpbGVzID0gQXJyYXkuZnJvbShlLnRhcmdldC5maWxlcyB8fCBbXSk7IGZvcihjb25zdCBmIG9mIGZpbGVzKXsgYXdhaXQgcHVzaEZpbGVXaXRoQXV0b1RhZ3MoZik7IH0gcmVmcmVzaExpc3QoKTsgfSk7CmFzeW5jIGZ1bmN0aW9uIHB1c2hGaWxlV2l0aEF1dG9UYWdzKGYsIGV4dHJhVGFncz1bXSl7CiAgY29uc3QgaWQgPSB1aWQoKTsgY29uc3QgbW9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncHNNb2RlJykudmFsdWU7CiAgY29uc3QgdXNlRXhpZiA9IChtb2RlID09PSAncHJlZmVyX2V4aWYnIHx8IG1vZGUgPT09ICdleGlmX29ubHknKTsgY29uc3QgdXNlRGV2aWNlID0gKG1vZGUgPT09ICdwcmVmZXJfZXhpZicgfHwgbW9kZSA9PT0gJ2RldmljZV9vbmx5Jyk7CiAgY29uc3QgZXhpZiA9IHVzZUV4aWYgPyBhd2FpdCByZWFkRVhJRkdQUyhmKSA6IG51bGw7IGNvbnN0IHByZXZpZXcgPSBhd2FpdCBmaWxlVG9QcmV2aWV3KGYpOwogIGxldCBjYW1HUFMgPSBudWxsOyBpZihleGlmKSBjYW1HUFMgPSBleGlmOyBlbHNlIGlmKHVzZURldmljZSAmJiBkZXZpY2VHUFMpIGNhbUdQUyA9IHsuLi5kZXZpY2VHUFN9OwogIGNvbnN0IGl0ZW0gPSB7IGlkLCBmaWxlOiBmLCBuYW1lOiBmLm5hbWUsIHRzOiBEYXRlLm5vdygpLCBwcmV2aWV3LCBjYW1lcmFfZ3BzOiBjYW1HUFMsIHN1YmplY3RfZ3BzOiBudWxsLCBoZWFkaW5nOiBkZXZpY2VIZWFkaW5nID8/IG51bGwsIGRpc3RfbTogbnVsbCwgdGFnczogZXh0cmFUYWdzLnNsaWNlKCksIG5vdGVzOicnLCBzbmFwX2hpbnQ6J25vbmUnLCBjb25kaXRpb25zOiBbXSwgdm9pY2U6bnVsbCB9OwogIGlmKGl0ZW0uY2FtZXJhX2dwcyAmJiBpdGVtLmNhbWVyYV9ncHMuc3JjID09PSAnZXhpZicgJiYgZGV2aWNlR1BTICYmIGRldmljZUdQUy5hY2MhPW51bGwpeyBpdGVtLmNhbWVyYV9ncHMuYWNjID0gZGV2aWNlR1BTLmFjYzsgfQogIHJlY29tcHV0ZVN1YmplY3QoaXRlbSk7IGJhdGNoLnB1c2goaXRlbSk7Cn0KZnVuY3Rpb24gcmVjb21wdXRlU3ViamVjdChpdCl7CiAgY29uc3QgY2FtID0gaXQuY2FtZXJhX2dwczsgY29uc3QgZGlzdCA9IGlzRmluaXRlKGl0LmRpc3RfbSkgPyBpdC5kaXN0X20gOiBwYXJzZUZsb2F0KCQoIiNkZWZhdWx0RGlzdCIpLnZhbHVlIHx8ICcwJykgfHwgMDsKICBsZXQgaGVhZGluZyA9IGl0LmhlYWRpbmc7IGlmIChoZWFkaW5nPT1udWxsIHx8IGlzTmFOKGhlYWRpbmcpKSB7IGNvbnN0IGRlZiA9IHBhcnNlRmxvYXQoJCgiI2RlZmF1bHRIZWFkaW5nIikudmFsdWUpOyBpZiAoaXNGaW5pdGUoZGVmKSkgaGVhZGluZyA9IGRlZjsgfQogIGlmKGNhbSAmJiBpc0Zpbml0ZShkaXN0KSAmJiBpc0Zpbml0ZShoZWFkaW5nKSl7IGl0LnN1YmplY3RfZ3BzID0gb2Zmc2V0TGF0TG9uKGNhbS5sYXQsIGNhbS5sb24sIGRpc3QsIGhlYWRpbmcpOyB9IGVsc2UgeyBpdC5zdWJqZWN0X2dwcyA9IG51bGw7IH0KfQovLyBCYXRjaCB2b2ljZQpjb25zdCByZWNCYXRjaEJ0biA9ICQoIiNyZWNCYXRjaCIpLCBzdG9wQmF0Y2hCdG4gPSAkKCIjc3RvcEJhdGNoIiksIGJhdGNoQXVkaW9FbCA9ICQoIiNiYXRjaEF1ZGlvIik7CmFzeW5jIGZ1bmN0aW9uIHN0YXJ0UmVjb3JkZXJCYXRjaCgpeyBpZighbmF2aWdhdG9yLm1lZGlhRGV2aWNlcyB8fCAhbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEpIHRocm93IG5ldyBFcnJvcigiTWVkaWEgbm90IHN1cHBvcnRlZCIpOyBpZighbWVkaWFTdHJlYW0pIG1lZGlhU3RyZWFtID0gYXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoeyBhdWRpbzp0cnVlIH0pOyByZXR1cm4gbmV3IE1lZGlhUmVjb3JkZXIobWVkaWFTdHJlYW0pOyB9CnJlY0JhdGNoQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4geyB0cnl7IHJlY0JhdGNoQnRuLmRpc2FibGVkID0gdHJ1ZTsgc3RvcEJhdGNoQnRuLmRpc2FibGVkID0gZmFsc2U7IHJlY29yZGVyID0gYXdhaXQgc3RhcnRSZWNvcmRlckJhdGNoKCk7IGNodW5rcyA9IFtdOyBjb25zdCBzdGFydCA9IERhdGUubm93KCk7IHJlY29yZGVyLm9uZGF0YWF2YWlsYWJsZSA9IChlKT0+eyBpZihlLmRhdGEgJiYgZS5kYXRhLnNpemU+MCkgY2h1bmtzLnB1c2goZS5kYXRhKTsgfTsgcmVjb3JkZXIub25zdG9wID0gKCk9PnsgYmF0Y2hBdWRpb0Jsb2IgPSBuZXcgQmxvYihjaHVua3MsIHsgdHlwZTogY2h1bmtzWzBdPy50eXBlIHx8ICdhdWRpby93ZWJtJyB9KTsgYmF0Y2hBdWRpb0V4dCA9IChiYXRjaEF1ZGlvQmxvYi50eXBlLmluY2x1ZGVzKCdvZ2cnKSA/ICdvZ2cnIDogJ3dlYm0nKTsgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChiYXRjaEF1ZGlvQmxvYik7IGJhdGNoQXVkaW9FbC5zcmMgPSB1cmw7IGJhdGNoQXVkaW9FbC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTsgYmF0Y2hBdWRpb0VsLmRhdGFzZXQuZHVyYXRpb24gPSAoKERhdGUubm93KCktc3RhcnQpLzEwMDApLnRvRml4ZWQoMSk7IH07IHJlY29yZGVyLnN0YXJ0KCk7IH1jYXRjaChlKXsgYWxlcnQoJ01pYyBub3QgYXZhaWxhYmxlIG9yIHBlcm1pc3Npb24gZGVuaWVkLicpOyByZWNCYXRjaEJ0bi5kaXNhYmxlZCA9IGZhbHNlOyBzdG9wQmF0Y2hCdG4uZGlzYWJsZWQgPSB0cnVlOyB9IH0pOwpzdG9wQmF0Y2hCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7IHRyeXsgaWYocmVjb3JkZXIgJiYgcmVjb3JkZXIuc3RhdGUhPT0naW5hY3RpdmUnKSByZWNvcmRlci5zdG9wKCk7IH1jYXRjaChlKXt9IHJlY0JhdGNoQnRuLmRpc2FibGVkID0gZmFsc2U7IHN0b3BCYXRjaEJ0bi5kaXNhYmxlZCA9IHRydWU7IH0pOwovLyBTb2xhciBtYXRoCmZ1bmN0aW9uIHNvbGFyUG9zKGRhdGUsIGxhdCwgbG9uKXsKICBjb25zdCBkMnIgPSBNYXRoLlBJLzE4MCwgcjJkID0gMTgwL01hdGguUEk7CiAgY29uc3QgdCA9IChkYXRlIC0gbmV3IERhdGUoRGF0ZS5VVEMoZGF0ZS5nZXRVVENGdWxsWWVhcigpLDAsMSwwLDAsMCwwKSkpIC8gODY0MDAwMDAgKyAxOwogIGNvbnN0IGdhbW1hID0gMipNYXRoLlBJLzM2NSoodC0xICsgKChkYXRlLmdldFVUQ0hvdXJzKCktMTIpLzI0KSk7CiAgY29uc3QgZGVjbCA9IDAuMDA2OTE4IC0gMC4zOTk5MTIqTWF0aC5jb3MoZ2FtbWEpICsgMC4wNzAyNTcqTWF0aC5zaW4oZ2FtbWEpIC0gMC4wMDY3NTgqTWF0aC5jb3MoMipnYW1tYSkgKyAwLjAwMDkwNypNYXRoLnNpbigyKmdhbW1hKSAtIDAuMDAyNjk3Kk1hdGguY29zKDMqZ2FtbWEpICsgMC4wMDE0OCpNYXRoLnNpbigzKmdhbW1hKTsKICBjb25zdCBlcXQgPSAyMjkuMTgqKDAuMDAwMDc1ICsgMC4wMDE4NjgqTWF0aC5jb3MoZ2FtbWEpIC0gMC4wMzIwNzcqTWF0aC5zaW4oZ2FtbWEpIC0gMC4wMTQ2MTUqTWF0aC5jb3MoMipnYW1tYSkgLSAwLjA0MDg0OSpNYXRoLnNpbigyKmdhbW1hKSk7CiAgY29uc3Qgb2Zmc2V0ID0gZGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpOyBjb25zdCB0c3QgPSBkYXRlLmdldFVUQ0hvdXJzKCkqNjAgKyBkYXRlLmdldFVUQ01pbnV0ZXMoKSArIGVxdCArIDQqbG9uICsgb2Zmc2V0OwogIGNvbnN0IGhhID0gKHRzdC80IC0gMTgwKSAqIGQycjsgY29uc3QgbGF0ciA9IDQ2LjAyMDEqZDJyOwogIGNvbnN0IGVsZXYgPSBNYXRoLmFzaW4oTWF0aC5zaW4obGF0cikqTWF0aC5zaW4oZGVjbCkgKyBNYXRoLmNvcyhsYXRyKSpNYXRoLmNvcyhkZWNsKSpNYXRoLmNvcyhoYSkpOwogIGNvbnN0IGF6ID0gTWF0aC5hdGFuMigtTWF0aC5zaW4oaGEpLCBNYXRoLnRhbihkZWNsKSpNYXRoLmNvcyhsYXRyKSAtIE1hdGguc2luKGxhdHIpKk1hdGguY29zKGhhKSk7CiAgcmV0dXJuIHsgZWxldjogZWxldipyMmQsIGF6OiAoYXoqcjJkKzM2MCklMzYwIH07Cn0KZnVuY3Rpb24gaW5jaWRlbmNlQW5nbGUoZWxldkRlZywgc3VuQXpEZWcsIHRpbHREZWcsIHBhbmVsQXpEZWcpewogIGNvbnN0IGVsID0gdG9SYWQoZWxldkRlZyksIHNhID0gdG9SYWQoc3VuQXpEZWcpLCB0aT10b1JhZCh0aWx0RGVnKSwgcGE9dG9SYWQocGFuZWxBekRlZyk7CiAgY29uc3QgY29zVCA9IE1hdGguc2luKGVsKSpNYXRoLmNvcyh0aSkgKyBNYXRoLmNvcyhlbCkqTWF0aC5zaW4odGkpKk1hdGguY29zKHNhIC0gcGEpOwogIHJldHVybiBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCBjb3NUKSk7Cn0KZnVuY3Rpb24gdGVtcERlcmF0ZSh0YWlyQyl7IGNvbnN0IGNlbGwgPSB0YWlyQyArIDIwOyByZXR1cm4gMSAtIDAuMDA0Kk1hdGgubWF4KDAsIGNlbGwgLSAyNSk7IH0KZnVuY3Rpb24gY2xvdWRGYWN0b3IoY2xvdWRGcmFjKXsgcmV0dXJuIDEgLSAwLjc1Kk1hdGgucG93KGNsb3VkRnJhYywgMyk7IH0KZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VzdGltYXRlUFYnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICBjb25zdCBwdlcgPSBwYXJzZUZsb2F0KCQoJyNwdlcnKS52YWx1ZXx8JzcwMCcpOyBjb25zdCB0aWx0ID0gcGFyc2VGbG9hdCgkKCcjdGlsdCcpLnZhbHVlfHwnMjUnKTsgY29uc3QgYXptID0gcGFyc2VGbG9hdCgkKCcjYXptJykudmFsdWV8fCcxODAnKTsKICBjb25zdCBzaGFkZSA9IChwYXJzZUZsb2F0KCQoJyNzaGFkZScpLnZhbHVlfHwnMCcpLzEwMCk7IGNvbnN0IGNsb3VkID0gKHBhcnNlRmxvYXQoJCgnI2Nsb3VkJykudmFsdWV8fCcwJykvMTAwKTsgY29uc3QgdGFpciA9IHBhcnNlRmxvYXQoJCgnI3RhaXInKS52YWx1ZXx8JzIwJyk7CiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsgY29uc3Qgc3VuID0gc29sYXJQb3Mobm93KTsKICBjb25zdCBwb2EgPSBpbmNpZGVuY2VBbmdsZShzdW4uZWxldiwgc3VuLmF6LCB0aWx0LCBhem0pOyBjb25zdCBkZXJhdGUgPSB0ZW1wRGVyYXRlKHRhaXIpICogKDEgLSBzaGFkZSkgKiBjbG91ZEZhY3RvcihjbG91ZCk7IGNvbnN0IHByZWQgPSBNYXRoLm1heCgwLCBwdlcgKiBwb2EgKiBkZXJhdGUpOwogICQoJyNwdlN0YXR1cycpLnRleHRDb250ZW50ID0gYFN1biBlbGV2ICR7c3VuLmVsZXYudG9GaXhlZCgxKX3CsCwgYXogJHtzdW4uYXoudG9GaXhlZCgwKX3CsC4gUE9BPSR7cG9hLnRvRml4ZWQoMil9LCBkZXJhdGU9JHtkZXJhdGUudG9GaXhlZCgyKX0g4oaSIFByZWQgJHtwcmVkLnRvRml4ZWQoMCl9IFdgOwp9KTsKZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY29yZFBWJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgY29uc3QgcHZXID0gcGFyc2VGbG9hdCgkKCcjcHZXJykudmFsdWV8fCc3MDAnKTsgY29uc3QgdGlsdCA9IHBhcnNlRmxvYXQoJCgnI3RpbHQnKS52YWx1ZXx8JzI1Jyk7IGNvbnN0IGF6bSA9IHBhcnNlRmxvYXQoJCgnI2F6bScpLnZhbHVlfHwnMTgwJyk7CiAgY29uc3Qgc2hhZGUgPSAocGFyc2VGbG9hdCgkKCcjc2hhZGUnKS52YWx1ZXx8JzAnKS8xMDApOyBjb25zdCBjbG91ZCA9IChwYXJzZUZsb2F0KCQoJyNjbG91ZCcpLnZhbHVlfHwnMCcpLzEwMCk7IGNvbnN0IHRhaXIgPSBwYXJzZUZsb2F0KCQoJyN0YWlyJykudmFsdWV8fCcyMCcpOwogIGNvbnN0IG91cGVzVyA9IHBhcnNlRmxvYXQoJCgnI291cGVzVycpLnZhbHVlfHwnTmFOJyk7IGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7IGNvbnN0IHN1biA9IHNvbGFyUG9zKG5vdyk7IGNvbnN0IHBvYSA9IGluY2lkZW5jZUFuZ2xlKHN1bi5lbGV2LCBzdW4uYXosIHRpbHQsIGF6bSk7IGNvbnN0IGRlcmF0ZSA9IHRlbXBEZXJhdGUodGFpcikgKiAoMSAtIHNoYWRlKSAqIGNsb3VkRmFjdG9yKGNsb3VkKTsgY29uc3QgcHJlZCA9IE1hdGgubWF4KDAsIHB2VyAqIHBvYSAqIGRlcmF0ZSk7CiAgY29uc3QgcmVjID0geyB0X2lzbzogbm93LnRvSVNPU3RyaW5nKCksIHB2VywgdGlsdCwgYXptLCBzaGFkZV9wY3Q6IHNoYWRlKjEwMCwgY2xvdWRfcGN0OiBjbG91ZCoxMDAsIHRhaXJfQzogdGFpciwgc3VuOiB7IGVsZXZfZGVnOiBzdW4uZWxldiwgYXpfZGVnOiBzdW4uYXogfSwgcG9hLCBkZXJhdGUsIHByZWRfVzogcHJlZCwgb3VwZXNfVzogaXNGaW5pdGUob3VwZXNXKT8gb3VwZXNXIDogbnVsbCB9OwogIGNvbnN0IGFyciA9IGxvYWRTb2xhcigpOyBhcnIucHVzaChyZWMpOyBzYXZlU29sYXIoYXJyKTsgJCgnI3B2U3RhdHVzJykudGV4dENvbnRlbnQgPSBgU2F2ZWQ6IHByZWQgJHtwcmVkLnRvRml4ZWQoMCl9IFdgICsgKGlzRmluaXRlKG91cGVzVyk/IGAsIG1lYXN1cmVkICR7b3VwZXNXLnRvRml4ZWQoMCl9IFdgIDogJycpOwp9KTsKZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cG9ydFBWJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7IGNvbnN0IGFyciA9IGxvYWRTb2xhcigpOyBjb25zdCBibG9iID0gbmV3IEJsb2IoW0pTT04uc3RyaW5naWZ5KHsgbW9kdWxlOiAiRUgxMDAzMDA2IFNvbGFyIERhdGFzZXQiLCB2ZXJzaW9uOiAiMS4wIiwgcGFyY2VsOiAiRUgxMDAzMDA2Iiwgc2FtcGxlczogYXJyIH0sIG51bGwsIDIpXSwge3R5cGU6J2FwcGxpY2F0aW9uL2pzb24nfSk7IGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7IGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7IGEuaHJlZiA9IHVybDsgYS5kb3dubG9hZCA9ICJlaDEwMDMwMDZfc29sYXJfZGF0YXNldF92MV8wLmpzb24iOyBhLmNsaWNrKCk7IFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTsgfSk7CmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbGVhclBWJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7IGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFNPTEFSX0tFWSk7ICQoJyNwdlN0YXR1cycpLnRleHRDb250ZW50ID0gIlNvbGFyIGRhdGFzZXQgY2xlYXJlZC4iOyB9KTsKLy8gTWFuaWZlc3QgJiBleHBvcnQKZnVuY3Rpb24gcm9sZXNGcm9tUXVpY2soKXsgcmV0dXJuIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI3F1aWNrVGFncyAudGFnLm9uJykpLm1hcCh4PT54LnRleHRDb250ZW50LnRyaW0oKSk7IH0KZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI3F1aWNrVGFncyAudGFnJykuZm9yRWFjaChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT4gZWwuY2xhc3NMaXN0LnRvZ2dsZSgnb24nKSkpOwpmdW5jdGlvbiBjb2xsZWN0TWFuaWZlc3QoZW1iZWRJbWFnZXM9ZmFsc2UpewogIGNvbnN0IGNoZWNrcyA9IFtdOyBjb25zdCBjaGsgPSBbJ2Vyb3Npb25fcHJlc2VudCcsJ3N0YW5kaW5nX3dhdGVyJywnaW52YXNpdmVzX2RlbnNlJywnd2lsZGxpZmVfc2lnbicsJ2FjY2Vzc19ibG9ja2VkJ107IC8vIChrZXB0IHNpbXBsZSkKICBjb25zdCBtZiA9IHsgbW9kdWxlOiAiRUgxMDAzMDA2IEZpZWxkIEludGFrZSIsIHZlcnNpb246ICIxLjMuMyIsIHBhcmNlbDogIkVIMTAwMzAwNiIsIGRlZmF1bHRfbG9jYXRpb246IHsgbGF0OiA0Ni4wMjAxLCBsb246IC0xMjIuNTQ4OCB9LAogICAgZGVmYXVsdHM6IHsgc3ViamVjdF9kaXN0YW5jZV9tOiBwYXJzZUZsb2F0KCQoIiNkZWZhdWx0RGlzdCIpLnZhbHVlIHx8ICcwJykgfHwgMCwgaGVhZGluZ19kZWc6IChoID0+IGlzRmluaXRlKGgpID8gaCA6IG51bGwpKHBhcnNlRmxvYXQoJCgiI2RlZmF1bHRIZWFkaW5nIikudmFsdWUpKSB9LAogICAgYXNzZXRzOiBBcnJheS5mcm9tKCQoJyNhc3NldHMnKS5zZWxlY3RlZE9wdGlvbnMpLm1hcChvPT5vLnZhbHVlKSwgdGl0bGU6ICQoIiNiYXRjaFRpdGxlIikudmFsdWUgfHwgbnVsbCwgdGFnczogcm9sZXNGcm9tUXVpY2soKSwgYmF0Y2hfY29uZGl0aW9uczogY2hlY2tzLAogICAgbm90ZXM6ICQoIiNiYXRjaE5vdGVzIikudmFsdWUgfHwgbnVsbCwgYmF0Y2hfdm9pY2U6IGJhdGNoQXVkaW9CbG9iID8geyBmaWxlbmFtZTogImJhdGNoX3ZvaWNlLndlYm0iLCBkdXJhdGlvbl9zOiBOdW1iZXIoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhdGNoQXVkaW8nKS5kYXRhc2V0LmR1cmF0aW9ufHwwKSB9IDogbnVsbCwKICAgIGNyZWF0ZWRfdXRjOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksCiAgICBzb2xhcl9tb2RlbDogKGZ1bmN0aW9uKCl7IGNvbnN0IHB2VyA9IHBhcnNlRmxvYXQoJCgnI3B2VycpLnZhbHVlfHwnNzAwJyk7IGNvbnN0IHRpbHQgPSBwYXJzZUZsb2F0KCQoJyN0aWx0JykudmFsdWV8fCcyNScpOyBjb25zdCBhem0gPSBwYXJzZUZsb2F0KCQoJyNhem0nKS52YWx1ZXx8JzE4MCcpOyBjb25zdCBzaGFkZSA9IChwYXJzZUZsb2F0KCQoJyNzaGFkZScpLnZhbHVlfHwnMCcpLzEwMCk7IGNvbnN0IGNsb3VkID0gKHBhcnNlRmxvYXQoJCgnI2Nsb3VkJykudmFsdWV8fCcwJykvMTAwKTsgY29uc3QgdGFpciA9IHBhcnNlRmxvYXQoJCgnI3RhaXInKS52YWx1ZXx8JzIwJyk7IHJldHVybiB7IHB2VywgdGlsdCwgYXptLCBzaGFkZV9wY3Q6IHNoYWRlKjEwMCwgY2xvdWRfcGN0OiBjbG91ZCoxMDAsIHRhaXJfQzogdGFpciB9OyB9KSgpLAogICAgc29sYXJfc2Vzc2lvbjogd2luZG93Ll9zb2xhclNlc3Npb24gfHwgbnVsbCwKICAgIGl0ZW1zOiBiYXRjaC5tYXAoaXQgPT4gKHsgaWQ6IGl0LmlkLCBmaWxlbmFtZTogaXQubmFtZSwgdGltZXN0YW1wX3V0YzogbmV3IERhdGUoaXQudHMpLnRvSVNPU3RyaW5nKCksIGNhbWVyYV9ncHM6IGl0LmNhbWVyYV9ncHMgfHwgbnVsbCwgc3ViamVjdF9ncHM6IGl0LnN1YmplY3RfZ3BzIHx8IG51bGwsIGhlYWRpbmdfZGVnOiAoaXQuaGVhZGluZyE9bnVsbD9pdC5oZWFkaW5nOm51bGwpLCBzdWJqZWN0X2Rpc3RhbmNlX206IChpc0Zpbml0ZShpdC5kaXN0X20pP2l0LmRpc3RfbTpudWxsKSwgdGFnczogaXQudGFncywgcm9sZXM6IHJvbGVzRnJvbVRhZ3MoaXQudGFncyksIHNuYXBfaGludDogaXQuc25hcF9oaW50IHx8ICdub25lJywgY29uZGl0aW9uczogaXQuY29uZGl0aW9ucywgbm90ZXM6IGl0Lm5vdGVzIHx8IG51bGwsIHZvaWNlOiBpdC52b2ljZSA/IHsgZmlsZW5hbWU6IGB2b2ljZV8ke2l0LmlkfS4ke2l0LnZvaWNlLmV4dH1gLCBkdXJhdGlvbl9zOiBNYXRoLnJvdW5kKGl0LnZvaWNlLmR1cmF0aW9ufHwwKSB9IDogbnVsbCwgaW1hZ2VfZGF0YV91cmw6IGVtYmVkSW1hZ2VzID8gaXQucHJldmlldyA6IHVuZGVmaW5lZCB9KSkgfTsKICByZXR1cm4gbWY7Cn0KJCgiI2NvcHlGb3JDaGF0IikuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7IGNvbnN0IG0gPSBjb2xsZWN0TWFuaWZlc3QodHJ1ZSk7IGNvbnN0IHRleHQgPSAiRUgxMDAzMDA2IFBob3RvIEJhdGNoIE1hbmlmZXN0ICh2MS4zLjcpXG4iICsgSlNPTi5zdHJpbmdpZnkobSwgbnVsbCwgMik7IHRyeXsgYXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodGV4dCk7ICQoIiNidWlsZEluZm8iKS50ZXh0Q29udGVudCA9ICJDb3BpZWQgbWFuaWZlc3QgKHdpdGggcHJldmlld3MpIHRvIGNsaXBib2FyZC4iOyB9IGNhdGNoKGUpeyAkKCIjYnVpbGRJbmZvIikudGV4dENvbnRlbnQgPSAiQ2xpcGJvYXJkIGJsb2NrZWQuIFVzZSBEb3dubG9hZCBtYW5pZmVzdC5qc29uLiI7IH0gfSk7CiQoIiNkb3dubG9hZE1hbmlmZXN0IikuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7IGNvbnN0IG0gPSBjb2xsZWN0TWFuaWZlc3QodHJ1ZSk7IGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbSlNPTi5zdHJpbmdpZnkobSwgbnVsbCwgMildLCB7dHlwZTonYXBwbGljYXRpb24vanNvbid9KTsgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsgYS5ocmVmID0gdXJsOyBhLmRvd25sb2FkID0gImVoMTAwMzAwNl9waG90b19tYW5pZmVzdF92MV8zXzcuanNvbiI7IGEuY2xpY2soKTsgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpOyB9KTsKJCgiI2J1aWxkVGVzdCIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4geyBjb25zdCBtID0gY29sbGVjdE1hbmlmZXN0KGZhbHNlKTsgbS5pdGVtcy5mb3JFYWNoKGl0ID0+IHsgZGVsZXRlIGl0LmltYWdlX2RhdGFfdXJsOyB9KTsgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtKU09OLnN0cmluZ2lmeShtLCBudWxsLCAyKV0sIHt0eXBlOidhcHBsaWNhdGlvbi9qc29uJ30pOyBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOyBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOyBhLmhyZWYgPSB1cmw7IGEuZG93bmxvYWQgPSAiZWgxMDAzMDA2X3Rlc3RfbWFuaWZlc3RfdjFfM183Lmpzb24iOyBhLmNsaWNrKCk7IFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTsgfSk7CmZ1bmN0aW9uIHN1bW1hcml6ZUZvclZhbGlkYXRpb24obWFuaWZlc3QpewogIGNvbnN0IGl0ZW1zID0gbWFuaWZlc3QuaXRlbXMgfHwgW107IGNvbnN0IGdwc09rID0gaXRlbXMuZmlsdGVyKGl0ID0+IGl0LmNhbWVyYV9ncHMgJiYgaXNGaW5pdGUoaXQuY2FtZXJhX2dwcy5sYXQpICYmIGlzRmluaXRlKGl0LmNhbWVyYV9ncHMubG9uKSkubGVuZ3RoOyBjb25zdCB3aXRoU3ViamVjdCA9IGl0ZW1zLmZpbHRlcihpdCA9PiBpdC5zdWJqZWN0X2dwcykubGVuZ3RoOyBjb25zdCB3aXRoVm9pY2UgPSBpdGVtcy5maWx0ZXIoaXQgPT4gaXQudm9pY2UpLmxlbmd0aDsgY29uc3QgdGFncyA9IHt9OyBpdGVtcy5mb3JFYWNoKGl0PT4gKGl0LnRhZ3N8fFtdKS5mb3JFYWNoKHQ9PiB0YWdzW3RdPSh0YWdzW3RdfHwwKSsxICkpOyBjb25zdCByb2xlcyA9IHt9OyBpdGVtcy5mb3JFYWNoKGl0PT4gKGl0LnJvbGVzfHxbXSkuZm9yRWFjaChyPT4gcm9sZXNbcl09KHJvbGVzW3JdfHwwKSsxICkpOyBjb25zdCB0aHVtYnMgPSBpdGVtcy5zbGljZSgwLDEyKS5tYXAoaXQgPT4gKHsgaWQ6IGl0LmlkLCBuYW1lOiBpdC5maWxlbmFtZSwgcHJldmlldzogaXQuaW1hZ2VfZGF0YV91cmwgfHwgaXQucHJldmlldyB8fCBudWxsLCB0YWdzOiBpdC50YWdzfHxbXSwgZ3BzOiBpdC5jYW1lcmFfZ3BzfHxudWxsIH0pKTsgbGV0IHNhbXBsZXMgPSBbXTsgdHJ5IHsgc2FtcGxlcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ0VIMTAwMzAwNjpzb2xhcl9zYW1wbGVzJyl8fCdbXScpOyB9IGNhdGNoIHt9IGNvbnN0IG4gPSBzYW1wbGVzLmxlbmd0aDsgY29uc3QgbGFzdCA9IG4/IHNhbXBsZXNbbi0xXSA6IG51bGw7IHJldHVybiB7IG1vZHVsZTogIkVIMTAwMzAwNiBWYWxpZGF0aW9uIFBhY2siLCB2ZXJzaW9uOiAiMS4wIiwgcGFyY2VsOiAiRUgxMDAzMDA2IiwgY3JlYXRlZF91dGM6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwgbWFuaWZlc3RfdmVyc2lvbjogbWFuaWZlc3QudmVyc2lvbiwgY291bnRzOiB7IGl0ZW1zOiBpdGVtcy5sZW5ndGgsIGdwc19vazogZ3BzT2ssIHN1YmplY3Rfb2s6IHdpdGhTdWJqZWN0LCB2b2ljZTogd2l0aFZvaWNlIH0sIHRhZ19oaXN0OiB0YWdzLCByb2xlX2hpc3Q6IHJvbGVzLCBzb2xhcl9zdW1tYXJ5OiB7IGNvdW50Om4sIGxhc3QgfSwgc2FtcGxlX3RodW1iczogdGh1bWJzIH07IH0KJCgiI2J1aWxkVmFsaWRhdGlvbiIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4geyBjb25zdCBtID0gY29sbGVjdE1hbmlmZXN0KHRydWUpOyBjb25zdCB2ID0gc3VtbWFyaXplRm9yVmFsaWRhdGlvbihtKTsgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtKU09OLnN0cmluZ2lmeSh2LCBudWxsLCAyKV0sIHt0eXBlOidhcHBsaWNhdGlvbi9qc29uJ30pOyBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOyBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOyBhLmhyZWYgPSB1cmw7IGEuZG93bmxvYWQgPSAiZWgxMDAzMDA2X3ZhbGlkYXRpb25fcGFja192MV8zXzcuanNvbiI7IGEuY2xpY2soKTsgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpOyB9KTsKbGV0IEpTWmlwTG9hZGVkID0gZmFsc2U7CmFzeW5jIGZ1bmN0aW9uIGVuc3VyZUpTWmlwKCl7IGlmKEpTWmlwTG9hZGVkKSByZXR1cm4gdHJ1ZTsgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKT0+eyBjb25zdCBzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7IHMuc3JjID0gImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vanN6aXBAMy4xMC4xL2Rpc3QvanN6aXAubWluLmpzIjsgcy5vbmxvYWQgPSAoKT0+eyBKU1ppcExvYWRlZCA9IHRydWU7IHJlc29sdmUodHJ1ZSk7IH07IHMub25lcnJvciA9ICgpPT4gcmVzb2x2ZShmYWxzZSk7IGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocyk7IH0pOyB9CiQoIiNidWlsZFppcCIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4geyAkKCIjYnVpbGRJbmZvIikudGV4dENvbnRlbnQgPSAiUHJlcGFyaW5nIFpJUOKApiI7IGNvbnN0IG9rID0gYXdhaXQgZW5zdXJlSlNaaXAoKTsgaWYoIW9rKXsgJCgiI2J1aWxkSW5mbyIpLnRleHRDb250ZW50ID0gIlpJUCBsaWJyYXJ5IGZhaWxlZCAob2ZmbGluZSkuIFVzZSBtYW5pZmVzdC90ZXN0L3ZhbGlkYXRpb24uIjsgcmV0dXJuOyB9IGNvbnN0IHppcCA9IG5ldyBKU1ppcCgpOyBjb25zdCBtID0gY29sbGVjdE1hbmlmZXN0KGZhbHNlKTsgemlwLmZpbGUoIm1hbmlmZXN0Lmpzb24iLCBKU09OLnN0cmluZ2lmeShtLCBudWxsLCAyKSk7IGNvbnN0IGZvbGRlciA9IHppcC5mb2xkZXIoImltYWdlcyIpOyBmb3IoY29uc3QgaXQgb2YgYmF0Y2gpeyBjb25zdCBibG9iID0gYXdhaXQgZmlsZVRvUmVzaXplZEJsb2IoaXQuZmlsZSwgMTYwMCk7IGNvbnN0IGFycmJ1ZiA9IGF3YWl0IGJsb2IuYXJyYXlCdWZmZXIoKTsgZm9sZGVyLmZpbGUoaXQubmFtZS5yZXBsYWNlKC9ccysvZywnXycpLnJlcGxhY2UoL1teQS1aYS16MC05Ll8tXS9nLCcnKSwgYXJyYnVmKTsgfSBjb25zdCBhZm9sZGVyID0gemlwLmZvbGRlcigiYXVkaW8iKTsgaWYoYmF0Y2hBdWRpb0Jsb2IpeyBjb25zdCBhcnIgPSBhd2FpdCBiYXRjaEF1ZGlvQmxvYi5hcnJheUJ1ZmZlcigpOyBhZm9sZGVyLmZpbGUoYGJhdGNoX3ZvaWNlLiR7YmF0Y2hBdWRpb0V4dH1gLCBhcnIpOyB9IGZvcihjb25zdCBpdCBvZiBiYXRjaCl7IGlmKGl0LnZvaWNlICYmIGl0LnZvaWNlLmJsb2IpeyBjb25zdCBhcnIgPSBhd2FpdCBpdC52b2ljZS5ibG9iLmFycmF5QnVmZmVyKCk7IGFmb2xkZXIuZmlsZShgdm9pY2VfJHtpdC5pZH0uJHtpdC52b2ljZS5leHR9YCwgYXJyKTsgfSB9IGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB6aXAuZ2VuZXJhdGVBc3luYyh7dHlwZToiYmxvYiJ9KTsgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChjb250ZW50KTsgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsgYS5ocmVmID0gdXJsOyBhLmRvd25sb2FkID0gImVoMTAwMzAwNl9waG90b19iYXRjaF92MV8zXzcuemlwIjsgYS5jbGljaygpOyBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7ICQoIiNidWlsZEluZm8iKS50ZXh0Q29udGVudCA9ICJaSVAgYnVpbHQuIjsgfSk7Ci8vIFBlcnNpc3QgdG8gUGxhbm5lcgpjb25zdCBLRVkgPSAiRUgxMDAzMDA2OmZpZWxkX2ludGFrZV9yZWNvcmRzIjsgZnVuY3Rpb24gbG9hZExvY2FsKCl7IHRyeSB7IHJldHVybiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKEtFWSkgfHwgIltdIik7IH0gY2F0Y2ggeyByZXR1cm4gW107IH0gfSBmdW5jdGlvbiBzYXZlTG9jYWwoYXJyKXsgbG9jYWxTdG9yYWdlLnNldEl0ZW0oS0VZLCBKU09OLnN0cmluZ2lmeShhcnIpKTsgfQpmdW5jdGlvbiBwZXJzaXN0VG9Mb2NhbChyZWNvcmRzKXsgY29uc3QgYXJyID0gbG9hZExvY2FsKCk7IHJlY29yZHMuZm9yRWFjaChpdCA9PiB7IGFyci5wdXNoKHsgdG9vbF92ZXJzaW9uOiAidjFfM183IiwgcGFyY2VsOiAiRUgxMDAzMDA2IiwgbGF0OiBpdC5jYW1lcmFfZ3BzPy5sYXQgPz8gbnVsbCwgbG5nOiBpdC5jYW1lcmFfZ3BzPy5sb24gPz8gbnVsbCwgYWNjdXJhY3lfbTogaXQuY2FtZXJhX2dwcz8uYWNjID8/IG51bGwsIHRpbWVzdGFtcF9tczogaXQudHMsIGNhdGVnb3J5OiAoaXQudGFncy5pbmNsdWRlcygnZ2Vlc2UnKSA/ICdnZWVzZScgOiBpdC50YWdzLmluY2x1ZGVzKCdjaGlja2VucycpID8gJ2NoaWNrZW5zJyA6IGl0LnRhZ3MuaW5jbHVkZXMoJ3NvbGFyLXBhbmVsJykgPyAnc29sYXInIDogaXQudGFnc1swXSB8fCAnaW50YWtlJyksIG5vdGVzOiBpdC5ub3RlcyB8fCAiIiwgcGhvdG9fZGF0YV91cmw6IGl0LnByZXZpZXcgfSk7IH0pOyBzYXZlTG9jYWwoYXJyKTsgfQpjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpPT57IGNvbnN0IHdpdGhHUFMgPSBiYXRjaC5maWx0ZXIoaXQgPT4gaXQuY2FtZXJhX2dwcyAmJiBpc0Zpbml0ZShpdC5jYW1lcmFfZ3BzLmxhdCkgJiYgaXNGaW5pdGUoaXQuY2FtZXJhX2dwcy5sb24pKTsgaWYod2l0aEdQUy5sZW5ndGgpIHBlcnNpc3RUb0xvY2FsKHdpdGhHUFMpOyB9KTsKb2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlzdCcpLCB7IGNoaWxkTGlzdDp0cnVlLCBzdWJ0cmVlOnRydWUgfSk7CndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgc3RhcnRHUFNXYXRjaCk7Ci8vIC0tLS0gU29sYXIgMzYwIENhcHR1cmUgdG9nZ2xlIGJlaGF2aW91ciAtLS0tCmNvbnN0IHNvbGFyVG9nZ2xlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NvbGFyVG9nZ2xlJyk7IGNvbnN0IHNvbGFyR3VpZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc29sYXJHdWlkZScpOyBjb25zdCBzb2xhclN0YXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NvbGFyU3RhdGUnKTsgY29uc3QgcHJvZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzb2xhclByb2dyZXNzJyk7CndpbmRvdy5fc29sYXJTZXNzaW9uID0geyBlbmFibGVkOmZhbHNlLCBzdGVwczp7MTpmYWxzZSwyOmZhbHNlLDM6ZmFsc2UsNDpmYWxzZX0sIHN0YXJ0ZWRfdXRjOm51bGwsIGZpbmlzaGVkX3V0YzpudWxsIH07CmZ1bmN0aW9uIHVwZGF0ZVNvbGFyVUkoKXsgc29sYXJTdGF0ZS50ZXh0Q29udGVudCA9IHNvbGFyVG9nZ2xlLmNsYXNzTGlzdC5jb250YWlucygnb24nKSA/ICdvbicgOiAnb2ZmJzsgcHJvZy50ZXh0Q29udGVudCA9IGBQcm9ncmVzczogJHtPYmplY3QudmFsdWVzKHdpbmRvdy5fc29sYXJTZXNzaW9uLnN0ZXBzKS5maWx0ZXIoQm9vbGVhbikubGVuZ3RofS80YDsgfQpzb2xhclRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57IGNvbnN0IG9uID0gc29sYXJUb2dnbGUuY2xhc3NMaXN0LnRvZ2dsZSgnb24nKTsgY29uc3QgZW5hYmxlZCA9IG9uOyBzb2xhckd1aWRlLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicsICFvbik7IHdpbmRvdy5fc29sYXJTZXNzaW9uLmVuYWJsZWQgPSBlbmFibGVkOyBpZihlbmFibGVkICYmICF3aW5kb3cuX3NvbGFyU2Vzc2lvbi5zdGFydGVkX3V0Yykgd2luZG93Ll9zb2xhclNlc3Npb24uc3RhcnRlZF91dGMgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7IHVwZGF0ZVNvbGFyVUkoKTsgfSk7CnNvbGFyVG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSk9PnsgaWYoZS5rZXk9PT0nICd8fGUua2V5PT09J0VudGVyJyl7IGUucHJldmVudERlZmF1bHQoKTsgc29sYXJUb2dnbGUuY2xpY2soKTsgfX0pOwpkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1zdGVwZG9uZV0nKS5mb3JFYWNoKGJ0biA9PiB7IGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57IGNvbnN0IGsgPSBOdW1iZXIoYnRuLmdldEF0dHJpYnV0ZSgnZGF0YS1zdGVwZG9uZScpKTsgd2luZG93Ll9zb2xhclNlc3Npb24uc3RlcHNba10gPSB0cnVlOyB1cGRhdGVTb2xhclVJKCk7IGlmKE9iamVjdC52YWx1ZXMod2luZG93Ll9zb2xhclNlc3Npb24uc3RlcHMpLmV2ZXJ5KEJvb2xlYW4pKSB3aW5kb3cuX3NvbGFyU2Vzc2lvbi5maW5pc2hlZF91dGMgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7IH0pOyB9KTsKYXN5bmMgZnVuY3Rpb24gaG9va1N0ZXBJbnB1dChpbnBJZCwgdGFncyl7IGNvbnN0IGlucCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlucElkKTsgaW5wLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGFzeW5jIChlKT0+eyBjb25zdCBmaWxlcyA9IEFycmF5LmZyb20oZS50YXJnZXQuZmlsZXN8fFtdKTsgZm9yKGNvbnN0IGYgb2YgZmlsZXMpeyBhd2FpdCBwdXNoRmlsZVdpdGhBdXRvVGFncyhmLCB0YWdzKTsgfSByZWZyZXNoTGlzdCgpOyB9KTsgfQpob29rU3RlcElucHV0KCdzdGVwMUFkZCcsIFsnc2l0ZS1jb250ZXh0Jywnc29sYXItcGFuZWwnXSk7IGhvb2tTdGVwSW5wdXQoJ3N0ZXAyQWRkJywgWydzb2xhci1wYW5lbCddKTsgaG9va1N0ZXBJbnB1dCgnc3RlcDNBZGQnLCBbJ3NpdGUtY29udGV4dCcsJ3NvbGFyLXBhbmVsJ10pOyBob29rU3RlcElucHV0KCdzdGVwNEFkZCcsIFsnc2l0ZS1jb250ZXh0Jywnc29sYXItcGFuZWwnLCd3ZWF0aGVyJ10pOwpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc29sYXJTdW1tYXJpemUnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57IGNvbnN0IHMgPSB3aW5kb3cuX3NvbGFyU2Vzc2lvbjsgY29uc3QgZG9uZSA9IE9iamVjdC52YWx1ZXMocy5zdGVwcykuZmlsdGVyKEJvb2xlYW4pLmxlbmd0aDsgY29uc3Qgbm90ZSA9IGBTb2xhciAzNjAgc2Vzc2lvbiDigJQgc3RlcHMgY29tcGxldGU6ICR7ZG9uZX0vNDsgc3RhcnQgJHtzLnN0YXJ0ZWRfdXRjfHwn4oCUJ307IGZpbmlzaCAke3MuZmluaXNoZWRfdXRjfHwn4oCUJ30uYDsgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmF0Y2hOb3RlcycpOyBlbC52YWx1ZSA9IChlbC52YWx1ZSA/IGVsLnZhbHVlICsgJ1xcbicgOiAnJykgKyBub3RlOyB9KTsKPC9zY3JpcHQ+CjwvYm9keT4KPC9odG1sPgo=",     Canby: "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CjxtZXRhIGNoYXJzZXQ9InV0Zi04Ii8+CjxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MSwgbWF4aW11bS1zY2FsZT0xIi8+Cjx0aXRsZT5FSDEwMDMwMDYgRmllbGQgSW50YWtlIOKAlCB2MS4zLjc8L3RpdGxlPgo8bWV0YSBuYW1lPSJjb2xvci1zY2hlbWUiIGNvbnRlbnQ9ImRhcmsgbGlnaHQiPgo8c3R5bGU+CiAgOnJvb3R7LS1iZzojMGIxMDIwOy0taW5rOiNlMmU4ZjA7LS1tdXRlZDojOTRhM2I4Oy0tY2FyZDojMGYxNzJhOy0tYWNjZW50OiM2MGE1ZmE7LS1nb29kOiMyMmM1NWU7LS13YXJuOiNmNTllMGI7LS1iYWQ6I2VmNDQ0NDt9CiAgYm9keXttYXJnaW46MDtiYWNrZ3JvdW5kOnZhcigtLWJnKTtjb2xvcjp2YXIoLS1pbmspO2ZvbnQtZmFtaWx5OnN5c3RlbS11aSxTZWdvZSBVSSxSb2JvdG8sSGVsdmV0aWNhLEFyaWFsfQogIGhlYWRlcntwYWRkaW5nOjEycHggMTRweDtiYWNrZ3JvdW5kOiMwYTBmMWY7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgIzE3MjAzYjtwb3NpdGlvbjpzdGlja3k7dG9wOjA7ei1pbmRleDoxMH0KICBoMXttYXJnaW46MDtmb250LXNpemU6MThweH0KICAuc3Vie2NvbG9yOnZhcigtLW11dGVkKTtmb250LXNpemU6MTJweDttYXJnaW4tdG9wOjRweH0KICBtYWlue3BhZGRpbmc6MTJweCAxNHB4O2Rpc3BsYXk6Z3JpZDtnYXA6MTJweH0KICAuY2FyZHtiYWNrZ3JvdW5kOnZhcigtLWNhcmQpO2JvcmRlcjoxcHggc29saWQgIzBiMTIyNTtib3JkZXItcmFkaXVzOjEycHg7cGFkZGluZzoxMnB4fQogIC5yb3d7ZGlzcGxheTpmbGV4O2dhcDo4cHg7ZmxleC13cmFwOndyYXA7YWxpZ24taXRlbXM6Y2VudGVyfQogIC5idG57YmFja2dyb3VuZDojMWY2ZmViO2NvbG9yOiNmZmY7Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czoxMHB4O3BhZGRpbmc6MTBweCAxNHB4O2ZvbnQtd2VpZ2h0OjcwMDtjdXJzb3I6cG9pbnRlcn0KICAuYnRuLnNlY29uZGFyeXtiYWNrZ3JvdW5kOiMzMzQxNTV9CiAgLmJ0bi5naG9zdHtiYWNrZ3JvdW5kOnRyYW5zcGFyZW50O2JvcmRlcjoxcHggc29saWQgIzMzNDE1NTtjb2xvcjojZTVlN2VifQogIC5idG4uZ29vZHtiYWNrZ3JvdW5kOiMxNTgwM2R9CiAgLmJ0bi53YXJue2JhY2tncm91bmQ6I2I5MWMxY30KICAucGlsbHtiYWNrZ3JvdW5kOiMwYjEzMjY7Ym9yZGVyOjFweCBzb2xpZCAjMWUyOTNiO2JvcmRlci1yYWRpdXM6OTk5cHg7cGFkZGluZzo0cHggMTBweDtmb250LXNpemU6MTJweH0KICAucGlsbC5iYWR7Ym9yZGVyLWNvbG9yOiM1ZjExMTE7Y29sb3I6I2ZlY2FjYTtiYWNrZ3JvdW5kOiMxYTBiMGJ9CiAgLnBpbGwub2t7Ym9yZGVyLWNvbG9yOiMwZjUxMzI7Y29sb3I6I2JiZjdkMDtiYWNrZ3JvdW5kOiMwYjFmMTR9CiAgLnBpbGwuaW5mb3tib3JkZXItY29sb3I6IzFlNDBhZjtjb2xvcjojYmZkYmZlO2JhY2tncm91bmQ6IzBiMTMyNn0KICAuaW5wdXQsIHRleHRhcmVhLCBzZWxlY3R7YmFja2dyb3VuZDojMGIxMzI2O2NvbG9yOiNlMmU4ZjA7Ym9yZGVyOjFweCBzb2xpZCAjMWUyOTNiO2JvcmRlci1yYWRpdXM6OHB4O3BhZGRpbmc6MTBweH0KICB0ZXh0YXJlYXt3aWR0aDoxMDAlO21pbi1oZWlnaHQ6NzBweDtyZXNpemU6dmVydGljYWx9CiAgLmdyaWR7ZGlzcGxheTpncmlkO2dhcDo4cHh9CiAgLnRodW1ie2Rpc3BsYXk6ZmxleDtnYXA6OHB4O2FsaWduLWl0ZW1zOmZsZXgtc3RhcnQ7YmFja2dyb3VuZDojMGIxMzI2O2JvcmRlcjoxcHggc29saWQgIzFlMjkzYjtib3JkZXItcmFkaXVzOjEwcHg7cGFkZGluZzo4cHh9CiAgLnRodW1iIGltZ3t3aWR0aDo3MnB4O2hlaWdodDo3MnB4O29iamVjdC1maXQ6Y292ZXI7Ym9yZGVyLXJhZGl1czo4cHg7Ym9yZGVyOjFweCBzb2xpZCAjMGYyMDNhfQogIC5tZXRhe2ZvbnQtc2l6ZToxMnB4O2NvbG9yOnZhcigtLW11dGVkKX0KICAudGFne2JvcmRlcjoxcHggc29saWQgIzFlMjkzYjtib3JkZXItcmFkaXVzOjk5OXB4O3BhZGRpbmc6NHB4IDhweDttYXJnaW46MnB4O2Rpc3BsYXk6aW5saW5lLWJsb2NrO2N1cnNvcjpwb2ludGVyfQogIC50YWcub257YmFja2dyb3VuZDojMWUyOTNiO2NvbG9yOiNjYmU3ZmY7Ym9yZGVyLWNvbG9yOiMyYjNiNTV9CiAgLnNtYWxse2ZvbnQtc2l6ZToxMnB4O2NvbG9yOnZhcigtLW11dGVkKX0KICAuZm9vdGVye3BhZGRpbmc6MTBweCAxNHB4O2NvbG9yOnZhcigtLW11dGVkKTtmb250LXNpemU6MTJweDtib3JkZXItdG9wOjFweCBzb2xpZCAjMTcyMDNifQogIC5oaWRkZW57ZGlzcGxheTpub25lfQogIC5jaGlwc3tkaXNwbGF5OmZsZXg7Z2FwOjZweDtmbGV4LXdyYXA6d3JhcH0KICAuY2hlY2tsaXN0e2Rpc3BsYXk6Z3JpZDtnYXA6OHB4fQogIC5zdGVwe2Rpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6ZmxleC1zdGFydDsgZ2FwOjEwcHg7IHBhZGRpbmc6OHB4OyBib3JkZXI6MXB4IGRhc2hlZCAjMWUyOTNiOyBib3JkZXItcmFkaXVzOjhweDsgYmFja2dyb3VuZDojMGIxMzI2fQogIC5zdGVwIC5udW17d2lkdGg6MjJweDsgaGVpZ2h0OjIycHg7IGJvcmRlci1yYWRpdXM6NTAlOyBiYWNrZ3JvdW5kOiMxZjZmZWI7IGNvbG9yOiNmZmY7IGZvbnQtd2VpZ2h0OjgwMDsgZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IGZvbnQtc2l6ZToxMnB4fQogIC5zdGVwIC5ib2R5e2ZsZXg6MX0KICAuc3RlcCAuYWN0aW9uc3tkaXNwbGF5OmZsZXg7IGdhcDo2cHg7IGZsZXgtd3JhcDp3cmFwfQogIGF1ZGlve3dpZHRoOjIyMHB4fQogIC5ncmlkLWNvbHMtMntkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMiwgbWlubWF4KDAsMWZyKSk7IGdhcDoxMHB4fQogIEBtZWRpYSAobWF4LXdpZHRoOiA4MDBweCl7IC5ncmlkLWNvbHMtMntncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmcjt9IH0KICAuY2FsbG91dHtib3JkZXItbGVmdDozcHggc29saWQgIzI1NjNlYjtiYWNrZ3JvdW5kOiMwYjEzMjY7cGFkZGluZzo4cHg7Ym9yZGVyLXJhZGl1czo2cHh9CiAgLnRvZ2dsZXtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo4cHh9CiAgLnN3aXRjaHtwb3NpdGlvbjpyZWxhdGl2ZTt3aWR0aDo0NnB4O2hlaWdodDoyNnB4O2JhY2tncm91bmQ6IzMzNDE1NTtib3JkZXItcmFkaXVzOjk5OXB4O2N1cnNvcjpwb2ludGVyOyBib3JkZXI6MXB4IHNvbGlkICMxZTI5M2J9CiAgLnN3aXRjaDo6YWZ0ZXJ7Y29udGVudDonJztwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MnB4O2xlZnQ6MnB4O3dpZHRoOjIycHg7aGVpZ2h0OjIycHg7YmFja2dyb3VuZDojZTVlN2ViO2JvcmRlci1yYWRpdXM6NTAlOyB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gLjJzfQogIC5zd2l0Y2gub257YmFja2dyb3VuZDojMWY2ZmVifQogIC5zd2l0Y2gub246OmFmdGVye3RyYW5zZm9ybTogdHJhbnNsYXRlWCgyMHB4KX0KPC9zdHlsZT4KCiAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJmYXJtcmVzZWFyY2gtdGhlbWUtdjFfMC5jc3MiIC8+CiAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJmYXJtcmVzZWFyY2gtdGhlbWUtaW50YWtlLWFkYXB0ZXItdjFfMF8xLmNzcyIgLz4KCiAgPHN0eWxlIGlkPSJ0aGVtZS1pbnRha2UtYWRhcHRlci12MV8wXzEiPgoKLyogRmFybSBSZXNlYXJjaCDigJQgRmllbGQgSW50YWtlIEFkYXB0ZXIgdjEuMC4xCiAgIFB1cnBvc2U6IG1ha2UgdGhlIHNoYXJlZCB0aGVtZSB2aXN1YWxseSBvYnZpb3VzIHdpdGhvdXQgY2hhbmdpbmcgbG9naWMvbWFya3VwLgogICBTY29wZTogdGFyZ2V0cyBvbmx5IGNsYXNzZXMvc3RydWN0dXJlcyB1c2VkIGJ5IEZpZWxkIEludGFrZS4KKi8KCi8qIEZsb2F0aW5nIHZlcnNpb24gYmFkZ2Ugc291cmNlZCBmcm9tIGRhdGEtdmVyc2lvbiBhdHRyaWJ1dGUgKi8KYm9keVtkYXRhLXRoZW1lPSJmYXJtcmVzZWFyY2gtdjEuMCJdOjpiZWZvcmUgewogIGNvbnRlbnQ6ICJGaWVsZCBJbnRha2UgdiIgYXR0cihkYXRhLXZlcnNpb24pOwogIHBvc2l0aW9uOiBmaXhlZDsKICB0b3A6IDEwcHg7IGxlZnQ6IDEwcHg7CiAgei1pbmRleDogOTk5OTsKICBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDAuNik7CiAgY29sb3I6ICNmZmY7CiAgcGFkZGluZzogNnB4IDEwcHg7CiAgYm9yZGVyLXJhZGl1czogOHB4OwogIGZvbnQtc2l6ZTogMTJweDsKICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuMDYpOwogIHBvaW50ZXItZXZlbnRzOiBub25lOwp9CgovKiBIZWFkZXIgcmVmcmVzaCB0byBtYXRjaCBQbGFubmVyIHRvbmVzICovCmJvZHlbZGF0YS10aGVtZT0iZmFybXJlc2VhcmNoLXYxLjAiXSBoZWFkZXIgewogIGJhY2tncm91bmQ6ICMwZjE3MmE7CiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICMxZTI5M2I7CiAgYm94LXNoYWRvdzogMCA2cHggMTZweCByZ2JhKDIsIDYsIDIzLCAwLjM1KTsKfQpib2R5W2RhdGEtdGhlbWU9ImZhcm1yZXNlYXJjaC12MS4wIl0gaDEgewogIGZvbnQtd2VpZ2h0OiA4MDA7CiAgbGV0dGVyLXNwYWNpbmc6IDAuMXB4Owp9CgovKiBDYXJkcyBhbmQgbGF5b3V0ICovCmJvZHlbZGF0YS10aGVtZT0iZmFybXJlc2VhcmNoLXYxLjAiXSAuY2FyZCB7CiAgYmFja2dyb3VuZDogIzBjMTkzMDsgLyogbWF0Y2hlcyB0aGVtZSB2YXIoLS1jYXJkKSAqLwogIGJvcmRlcjogMXB4IHNvbGlkICMwYjEyMjU7CiAgYm9yZGVyLXJhZGl1czogMTJweDsKICBib3gtc2hhZG93OiAwIDZweCAxNnB4IHJnYmEoMiwgNiwgMjMsIDAuMzUpOwp9CgovKiBCdXR0b25zICovCmJvZHlbZGF0YS10aGVtZT0iZmFybXJlc2VhcmNoLXYxLjAiXSAuYnRuIHsKICBwYWRkaW5nOiAxMHB4IDE2cHg7CiAgYm9yZGVyLXJhZGl1czogMTJweDsKICBib3gtc2hhZG93OiAwIDJweCAwIHJnYmEoMCwwLDAsMC4yNSk7Cn0KYm9keVtkYXRhLXRoZW1lPSJmYXJtcmVzZWFyY2gtdjEuMCJdIC5idG4uc2Vjb25kYXJ5IHsgYmFja2dyb3VuZDogIzMzNDE1NTsgY29sb3I6ICNlNWU3ZWI7IH0KYm9keVtkYXRhLXRoZW1lPSJmYXJtcmVzZWFyY2gtdjEuMCJdIC5idG4uZ2hvc3QgeyBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsgYm9yZGVyOiAxcHggc29saWQgIzMzNDE1NTsgY29sb3I6ICNlNWU3ZWI7IH0KYm9keVtkYXRhLXRoZW1lPSJmYXJtcmVzZWFyY2gtdjEuMCJdIC5idG4uZ29vZCB7IGJhY2tncm91bmQ6ICMxNTgwM2Q7IH0KYm9keVtkYXRhLXRoZW1lPSJmYXJtcmVzZWFyY2gtdjEuMCJdIC5idG4ud2FybiB7IGJhY2tncm91bmQ6ICNiOTFjMWM7IH0KCi8qIElucHV0cyAqLwpib2R5W2RhdGEtdGhlbWU9ImZhcm1yZXNlYXJjaC12MS4wIl0gLmlucHV0LApib2R5W2RhdGEtdGhlbWU9ImZhcm1yZXNlYXJjaC12MS4wIl0gdGV4dGFyZWEsCmJvZHlbZGF0YS10aGVtZT0iZmFybXJlc2VhcmNoLXYxLjAiXSBzZWxlY3QgewogIGJhY2tncm91bmQ6ICMwYjEzMjY7CiAgYm9yZGVyOiAxcHggc29saWQgIzFlMjkzYjsKICBjb2xvcjogI2UyZThmMDsKICBib3JkZXItcmFkaXVzOiAxMHB4Owp9CmJvZHlbZGF0YS10aGVtZT0iZmFybXJlc2VhcmNoLXYxLjAiXSB0ZXh0YXJlYSB7IG1pbi1oZWlnaHQ6IDkwcHg7IH0KCi8qIFBpbGxzL1RhZ3MgKi8KYm9keVtkYXRhLXRoZW1lPSJmYXJtcmVzZWFyY2gtdjEuMCJdIC5waWxsIHsKICBiYWNrZ3JvdW5kOiAjMGIxMzI2OwogIGJvcmRlcjogMXB4IHNvbGlkICMxZTI5M2I7CiAgY29sb3I6ICNjYmQ1ZTE7Cn0KYm9keVtkYXRhLXRoZW1lPSJmYXJtcmVzZWFyY2gtdjEuMCJdIC5waWxsLmluZm8gewogIGJhY2tncm91bmQ6IHJnYmEoOTYsMTY1LDI1MCwwLjEyKTsKICBjb2xvcjogIzkzYzVmZDsKICBib3JkZXItY29sb3I6IHJnYmEoOTYsMTY1LDI1MCwwLjM1KTsKfQpib2R5W2RhdGEtdGhlbWU9ImZhcm1yZXNlYXJjaC12MS4wIl0gLnBpbGwub2sgewogIGJhY2tncm91bmQ6IHJnYmEoMzQsMTk3LDk0LDAuMTIpOwogIGNvbG9yOiAjODZlZmFjOwogIGJvcmRlci1jb2xvcjogcmdiYSgzNCwxOTcsOTQsMC4zNSk7Cn0KYm9keVtkYXRhLXRoZW1lPSJmYXJtcmVzZWFyY2gtdjEuMCJdIC5waWxsLmJhZCB7CiAgYmFja2dyb3VuZDogcmdiYSgyMzksNjgsNjgsMC4xMik7CiAgY29sb3I6ICNmZWNhY2E7CiAgYm9yZGVyLWNvbG9yOiByZ2JhKDIzOSw2OCw2OCwwLjM1KTsKfQoKLyogVGh1bWJuYWlscyAqLwpib2R5W2RhdGEtdGhlbWU9ImZhcm1yZXNlYXJjaC12MS4wIl0gLnRodW1iIHsKICBiYWNrZ3JvdW5kOiAjMGIxMzI2OwogIGJvcmRlcjogMXB4IHNvbGlkICMxZTI5M2I7CiAgYm9yZGVyLXJhZGl1czogMTJweDsKfQoKLyogTWV0YSBzbWFsbCB0ZXh0ICovCmJvZHlbZGF0YS10aGVtZT0iZmFybXJlc2VhcmNoLXYxLjAiXSAubWV0YSB7IGNvbG9yOiAjOTRhM2I4OyB9CgogIDwvc3R5bGU+CjwvaGVhZD4KPGJvZHkgZGF0YS10aGVtZT0iZmFybXJlc2VhcmNoLXYxLjAiIGRhdGEtdmVyc2lvbj0iMS4zLjciPgogIDxoZWFkZXI+CiAgICA8aDE+RUgxMDAzMDA2IEZpZWxkIEludGFrZSA8c3BhbiBjbGFzcz0icGlsbCI+djEuMy43PC9zcGFuPjwvaDE+CiAgICA8ZGl2IGNsYXNzPSJzdWIiPkFkZHMgYSBndWlkZWQgPGI+U29sYXIgMzYwIENhcHR1cmU8L2I+IHRvZ2dsZS4gQWxsIHByZXZpb3VzIGZlYXR1cmVzIHJlbWFpbi4gT25l4oCRY2xpY2sgPGI+VmFsaWRhdGlvbiBQYWNrPC9iPiBmb3IgQ2hhdEdQVCByZXZpZXcuPC9kaXY+CiAgPC9oZWFkZXI+CgogIDxtYWluPgogICAgPGRpdiBjbGFzcz0iY2FyZCI+CiAgICAgIDxkaXYgY2xhc3M9ImdyaWQtY29scy0yIj4KICAgICAgICA8ZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0icm93Ij4KICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJidG4iIGZvcj0iZmlsZUlucHV0Ij5BZGQgUGhvdG9zPC9sYWJlbD4KICAgICAgICAgICAgPGlucHV0IGlkPSJmaWxlSW5wdXQiIHR5cGU9ImZpbGUiIGFjY2VwdD0iaW1hZ2UvKiIgY2FwdHVyZT0iZW52aXJvbm1lbnQiIG11bHRpcGxlIHN0eWxlPSJkaXNwbGF5Om5vbmUiLz4KICAgICAgICAgICAgPGJ1dHRvbiBpZD0iZ2V0R1BTIiBjbGFzcz0iYnRuIHNlY29uZGFyeSI+Q2FwdHVyZSBkZXZpY2UgR1BTPC9idXR0b24+CiAgICAgICAgICAgIDxidXR0b24gaWQ9ImdldEhlYWRpbmciIGNsYXNzPSJidG4gc2Vjb25kYXJ5Ij5DYXB0dXJlIGRldmljZSBoZWFkaW5nPC9idXR0b24+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgICAgIDxzcGFuIGlkPSJzdGF0dXMiIGNsYXNzPSJzbWFsbCI+R1BTL0hlYWRpbmc6IG5vdCByZXF1ZXN0ZWQuPC9zcGFuPgogICAgICAgICAgICA8c3BhbiBpZD0iaHR0cHNIaW50IiBjbGFzcz0ic21hbGwiPjwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImNhbGxvdXQgc21hbGwiPgogICAgICAgICAgSWYgQ2hyb21lIHNob3dzIOKAnGRlbmllZOKAnSB3aXRob3V0IHByb21wdGluZzogdXNlIEhUVFBTL2xvY2FsaG9zdDsgcmVzZXQgU2l0ZSBzZXR0aW5ncyDihpIgTG9jYXRpb24g4oaSIEFsbG93OyBlbnN1cmUgT1MgbG9jYXRpb24gaXMgb24uIEVYSUYgR1BTIHN0aWxsIHdvcmtzIGlmIGVtYmVkZGVkLgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxkaXYgY2xhc3M9ImNhcmQiPgogICAgICA8ZGl2IGNsYXNzPSJyb3cgdG9nZ2xlIj4KICAgICAgICA8ZGl2IGNsYXNzPSJzd2l0Y2giIGlkPSJzb2xhclRvZ2dsZSIgcm9sZT0ic3dpdGNoIiBhcmlhLWNoZWNrZWQ9ImZhbHNlIiB0YWJpbmRleD0iMCI+PC9kaXY+CiAgICAgICAgPGRpdj48Yj5Tb2xhciAzNjAgQ2FwdHVyZTwvYj4g4oCUIGd1aWRlZCBjaGVja2xpc3QgZm9yIGFycmF5IG1vZGVsaW5nPC9kaXY+CiAgICAgICAgPHNwYW4gaWQ9InNvbGFyU3RhdGUiIGNsYXNzPSJwaWxsIGluZm8iPm9mZjwvc3Bhbj4KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgaWQ9InNvbGFyR3VpZGUiIGNsYXNzPSJncmlkIGhpZGRlbiIgc3R5bGU9Im1hcmdpbi10b3A6OHB4Ij4KICAgICAgICA8ZGl2IGNsYXNzPSJzdGVwIj4KICAgICAgICAgIDxkaXYgY2xhc3M9Im51bSI+MTwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0iYm9keSI+CiAgICAgICAgICAgIDxiPkNlbnRlciBmaXggKyBwYW5vcmFtYTwvYj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic21hbGwiPlN0YW5kIGF0IHRoZSBhcnJheSBjZW50ZXIsIGxldCBHUFMgc2V0dGxlICgxMOKAkzIwcyksIHRoZW4gY2FwdHVyZSBhIGZ1bGwgMzYwwrAgcGFubyA8aT5vciB+MjAgaG9yaXpvbiBwaG90b3M8L2k+LjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJhY3Rpb25zIj4KICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJ0biBnaG9zdCIgZm9yPSJzdGVwMUFkZCI+QWRkIHBob3RvczwvbGFiZWw+CiAgICAgICAgICAgICAgPGlucHV0IGlkPSJzdGVwMUFkZCIgdHlwZT0iZmlsZSIgYWNjZXB0PSJpbWFnZS8qIiBjYXB0dXJlPSJlbnZpcm9ubWVudCIgbXVsdGlwbGUgY2xhc3M9ImhpZGRlbiIvPgogICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBzZWNvbmRhcnkiIGRhdGEtc3RlcGRvbmU9IjEiPk1hcmsgc3RlcCBkb25lPC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ic3RlcCI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJudW0iPjI8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9ImJvZHkiPgogICAgICAgICAgICA8Yj5QYW5lbCBhbmNob3JzIChzY2FsZSArIHRpbHQpPC9iPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzbWFsbCI+VGFrZSBjbG9zZSBmcm9udCBhbmQgc2lkZSBzaG90czsgaW5jbHVkZSBhIGtub3duIGxlbmd0aCAodGFwZS9zdGljayBvciBwYW5lbCBzcGVjKSBpZiBwb3NzaWJsZS48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWN0aW9ucyI+CiAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJidG4gZ2hvc3QiIGZvcj0ic3RlcDJBZGQiPkFkZCBwaG90b3M8L2xhYmVsPgogICAgICAgICAgICAgIDxpbnB1dCBpZD0ic3RlcDJBZGQiIHR5cGU9ImZpbGUiIGFjY2VwdD0iaW1hZ2UvKiIgY2FwdHVyZT0iZW52aXJvbm1lbnQiIG11bHRpcGxlIGNsYXNzPSJoaWRkZW4iLz4KICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gc2Vjb25kYXJ5IiBkYXRhLXN0ZXBkb25lPSIyIj5NYXJrIHN0ZXAgZG9uZTwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9InN0ZXAiPgogICAgICAgICAgPGRpdiBjbGFzcz0ibnVtIj4zPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJib2R5Ij4KICAgICAgICAgICAgPGI+T2JzdGFjbGUgY2hlY2s8L2I+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsIj5CYWNrIHVwIDEw4oCTMTUgbSBhbmQgc2hvb3QgdG93YXJkIHRoZSBhcnJheSBmcm9tIE5vcnRoLCBFYXN0LCBTb3V0aCwgV2VzdCDigJQgY2FwdHVyZSB0cmVlcy9zaGVkcy9ibGFja2JlcnJpZXMuPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFjdGlvbnMiPgogICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iYnRuIGdob3N0IiBmb3I9InN0ZXAzQWRkIj5BZGQgcGhvdG9zPC9sYWJlbD4KICAgICAgICAgICAgICA8aW5wdXQgaWQ9InN0ZXAzQWRkIiB0eXBlPSJmaWxlIiBhY2NlcHQ9ImltYWdlLyoiIGNhcHR1cmU9ImVudmlyb25tZW50IiBtdWx0aXBsZSBjbGFzcz0iaGlkZGVuIi8+CiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIHNlY29uZGFyeSIgZGF0YS1zdGVwZG9uZT0iMyI+TWFyayBzdGVwIGRvbmU8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJzdGVwIj4KICAgICAgICAgIDxkaXYgY2xhc3M9Im51bSI+NDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0iYm9keSI+CiAgICAgICAgICAgIDxiPlNoYWRvdyByZWZlcmVuY2UgKG9wdGlvbmFsKTwvYj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic21hbGwiPkxheSBhIDEgbSBzdGljayBvbiBncm91bmQgYWxpZ25lZCB3aXRoIHBhbmVsIGVkZ2U7IHNob290IGl0cyBzaGFkb3cgdG8gbG9jayBzdW4gYXppbXV0aCBhdCB0aW1lc3RhbXAuPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFjdGlvbnMiPgogICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iYnRuIGdob3N0IiBmb3I9InN0ZXA0QWRkIj5BZGQgcGhvdG9zPC9sYWJlbD4KICAgICAgICAgICAgICA8aW5wdXQgaWQ9InN0ZXA0QWRkIiB0eXBlPSJmaWxlIiBhY2NlcHQ9ImltYWdlLyoiIGNhcHR1cmU9ImVudmlyb25tZW50IiBtdWx0aXBsZSBjbGFzcz0iaGlkZGVuIi8+CiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIHNlY29uZGFyeSIgZGF0YS1zdGVwZG9uZT0iNCI+TWFyayBzdGVwIGRvbmU8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICAgICAgPHNwYW4gY2xhc3M9InBpbGwiIGlkPSJzb2xhclByb2dyZXNzIj5Qcm9ncmVzczogMC80PC9zcGFuPgogICAgICAgICAgPGJ1dHRvbiBpZD0ic29sYXJTdW1tYXJpemUiIGNsYXNzPSJidG4gZ29vZCI+QWRkIFNvbGFyIFNlc3Npb24gU3VtbWFyeSB0byBub3RlczwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxkaXYgY2xhc3M9ImNhcmQiPgogICAgICA8ZGl2IGNsYXNzPSJncmlkIj4KICAgICAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICAgICAgPGxhYmVsPkJhdGNoIHRpdGxlJm5ic3A7PGlucHV0IGlkPSJiYXRjaFRpdGxlIiBjbGFzcz0iaW5wdXQiIHBsYWNlaG9sZGVyPSJlLmcuLCBQYW5lbCBzaGFkZSBjaGVjayBAIGJhcm4iLz48L2xhYmVsPgogICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbCI+R1BTIG1vZGUKICAgICAgICAgICAgPHNlbGVjdCBpZD0iZ3BzTW9kZSIgY2xhc3M9ImlucHV0Ij4KICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJwcmVmZXJfZXhpZiI+UHJlZmVyIEVYSUYgKGZhbGxiYWNrIHRvIGRldmljZSk8L29wdGlvbj4KICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJkZXZpY2Vfb25seSI+RGV2aWNlIG9ubHkgKGlnbm9yZSBFWElGKTwvb3B0aW9uPgogICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImV4aWZfb25seSI+RVhJRiBvbmx5IChuZXZlciBkZXZpY2UpPC9vcHRpb24+CiAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgPC9sYWJlbD4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICAgICAgPGxhYmVsPkRlZmF1bHQgc3ViamVjdCBkaXN0YW5jZSAobSkgPGlucHV0IGlkPSJkZWZhdWx0RGlzdCIgY2xhc3M9ImlucHV0IiB0eXBlPSJudW1iZXIiIHZhbHVlPSIxMiIgc3RlcD0iMSIgbWluPSIwIiBzdHlsZT0id2lkdGg6ODBweCIvPjwvbGFiZWw+CiAgICAgICAgICA8bGFiZWw+RGVmYXVsdCBoZWFkaW5nICjCsCkgPGlucHV0IGlkPSJkZWZhdWx0SGVhZGluZyIgY2xhc3M9ImlucHV0IiB0eXBlPSJudW1iZXIiIHZhbHVlPSIiIHN0ZXA9IjEiIG1pbj0iMCIgbWF4PSIzNTkiIHN0eWxlPSJ3aWR0aDo4MHB4IiBwbGFjZWhvbGRlcj0iYXV0byIvPjwvbGFiZWw+CiAgICAgICAgICA8bGFiZWw+QXNzZXRzIHByZXNlbnQKICAgICAgICAgICAgPHNlbGVjdCBpZD0iYXNzZXRzIiBtdWx0aXBsZSBzaXplPSIyIiBjbGFzcz0iaW5wdXQiIHRpdGxlPSJIb2xkIEN0cmwv4oyYIHRvIHNlbGVjdCBtdWx0aXBsZSIgc3R5bGU9IndpZHRoOjE2MHB4Ij4KICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJvdXBlc19tZWdhNSIgc2VsZWN0ZWQ+T3VwZXMgTWVnYSA1PC9vcHRpb24+CiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ic29sYXJfYXJyYXkiIHNlbGVjdGVkPlNvbGFyIHBhbmVsczwvb3B0aW9uPgogICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdj5RdWljayB0YWdzPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iY2hpcHMiIGlkPSJxdWlja1RhZ3MiPgogICAgICAgICAgPHNwYW4gY2xhc3M9InRhZyI+YmxhY2tiZXJyeTwvc3Bhbj48c3BhbiBjbGFzcz0idGFnIj5oeWRybzwvc3Bhbj48c3BhbiBjbGFzcz0idGFnIj5lcm9zaW9uPC9zcGFuPjxzcGFuIGNsYXNzPSJ0YWciPnV0aWxpdHk8L3NwYW4+CiAgICAgICAgICA8c3BhbiBjbGFzcz0idGFnIj5idWlsZGluZzwvc3Bhbj48c3BhbiBjbGFzcz0idGFnIj5yb2FkPC9zcGFuPjxzcGFuIGNsYXNzPSJ0YWciPnN0cmVhbTwvc3Bhbj48c3BhbiBjbGFzcz0idGFnIj53aWxkbGlmZTwvc3Bhbj4KICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0YWciPnNpbHZpY3VsdHVyZTwvc3Bhbj48c3BhbiBjbGFzcz0idGFnIj5zb2lsLXNhbXBsZTwvc3Bhbj4KICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0YWciPmdlZXNlPC9zcGFuPjxzcGFuIGNsYXNzPSJ0YWciPmNoaWNrZW5zPC9zcGFuPgogICAgICAgICAgPHNwYW4gY2xhc3M9InRhZyI+c29sYXItcGFuZWw8L3NwYW4+PHNwYW4gY2xhc3M9InRhZyI+b3VwZXMtbWVnYTU8L3NwYW4+CiAgICAgICAgICA8c3BhbiBjbGFzcz0idGFnIj5zaXRlLWNvbnRleHQ8L3NwYW4+PHNwYW4gY2xhc3M9InRhZyI+d2VhdGhlcjwvc3Bhbj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJyb3ciIHN0eWxlPSJhbGlnbi1pdGVtczpmbGV4LXN0YXJ0OyBtYXJnaW4tdG9wOjZweCI+CiAgICAgICAgICA8dGV4dGFyZWEgaWQ9ImJhdGNoTm90ZXMiIGNsYXNzPSJpbnB1dCIgcGxhY2Vob2xkZXI9IkJhdGNoIG5vdGVz4oCmICh3aGF0LCB3aGVyZSwgd2h5KSI+PC90ZXh0YXJlYT4KICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsIj5CYXRjaCB2b2ljZSBtZW1vPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGdob3N0IiBpZD0icmVjQmF0Y2giPlJlY29yZDwvYnV0dG9uPgogICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBnaG9zdCIgaWQ9InN0b3BCYXRjaCIgZGlzYWJsZWQ+U3RvcDwvYnV0dG9uPgogICAgICAgICAgICAgIDxhdWRpbyBpZD0iYmF0Y2hBdWRpbyIgY29udHJvbHMgY2xhc3M9ImhpZGRlbiI+PC9hdWRpbz4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8ZGl2IGNsYXNzPSJjYXJkIj4KICAgICAgPGRpdiBjbGFzcz0icm93Ij48Yj5Tb2xhciBNb2RlbGluZyAoY2FwdHVyZSBtZWFzdXJlbWVudHMpPC9iPjwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJncmlkIj4KICAgICAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICAgICAgPGxhYmVsPlRvdGFsIHBhbmVsIHdhdHRzIDxpbnB1dCBpZD0icHZXIiBjbGFzcz0iaW5wdXQiIHR5cGU9Im51bWJlciIgdmFsdWU9IjcwMCIgc3RlcD0iMTAiIG1pbj0iMCIgc3R5bGU9IndpZHRoOjExMHB4Ii8+PC9sYWJlbD4KICAgICAgICAgIDxsYWJlbD5QYW5lbCB0aWx0ICjCsCkgPGlucHV0IGlkPSJ0aWx0IiBjbGFzcz0iaW5wdXQiIHR5cGU9Im51bWJlciIgdmFsdWU9IjI1IiBzdGVwPSIxIiBtaW49IjAiIG1heD0iOTAiIHN0eWxlPSJ3aWR0aDo5MHB4Ii8+PC9sYWJlbD4KICAgICAgICAgIDxsYWJlbD5QYW5lbCBhemltdXRoICjCsCkgPGlucHV0IGlkPSJhem0iIGNsYXNzPSJpbnB1dCIgdHlwZT0ibnVtYmVyIiB2YWx1ZT0iMTgwIiBzdGVwPSIxIiBtaW49IjAiIG1heD0iMzU5IiBzdHlsZT0id2lkdGg6MTEwcHgiLz48L2xhYmVsPgogICAgICAgICAgPGxhYmVsPlNoYWRpbmcgKCUpIDxpbnB1dCBpZD0ic2hhZGUiIGNsYXNzPSJpbnB1dCIgdHlwZT0ibnVtYmVyIiB2YWx1ZT0iMTAiIHN0ZXA9IjEiIG1pbj0iMCIgbWF4PSIxMDAiIHN0eWxlPSJ3aWR0aDo5MHB4Ii8+PC9sYWJlbD4KICAgICAgICAgIDxsYWJlbD5DbG91ZCBjb3ZlciAoJSkgPGlucHV0IGlkPSJjbG91ZCIgY2xhc3M9ImlucHV0IiB0eXBlPSJudW1iZXIiIHZhbHVlPSI0MCIgc3RlcD0iMSIgbWluPSIwIiBtYXg9IjEwMCIgc3R5bGU9IndpZHRoOjExMHB4Ii8+PC9sYWJlbD4KICAgICAgICAgIDxsYWJlbD5BbWJpZW50IMKwQyA8aW5wdXQgaWQ9InRhaXIiIGNsYXNzPSJpbnB1dCIgdHlwZT0ibnVtYmVyIiB2YWx1ZT0iMjIiIHN0ZXA9IjAuNSIgbWluPSItMzAiIG1heD0iNjAiIHN0eWxlPSJ3aWR0aDo5MHB4Ii8+PC9sYWJlbD4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICAgICAgPGJ1dHRvbiBpZD0iZXN0aW1hdGVQViIgY2xhc3M9ImJ0biBnb29kIj5Fc3RpbWF0ZSBQViBub3c8L2J1dHRvbj4KICAgICAgICAgIDxsYWJlbD5PdXBlcyBpbnB1dCBXIDxpbnB1dCBpZD0ib3VwZXNXIiBjbGFzcz0iaW5wdXQiIHR5cGU9Im51bWJlciIgdmFsdWU9IiIgcGxhY2Vob2xkZXI9InJlYWQgZnJvbSBkaXNwbGF5IiBzdHlsZT0id2lkdGg6MTAwcHgiLz48L2xhYmVsPgogICAgICAgICAgPGJ1dHRvbiBpZD0icmVjb3JkUFYiIGNsYXNzPSJidG4gc2Vjb25kYXJ5Ij5BZGQgc2FtcGxlPC9idXR0b24+CiAgICAgICAgICA8c3BhbiBpZD0icHZTdGF0dXMiIGNsYXNzPSJzbWFsbCI+PC9zcGFuPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgICA8YnV0dG9uIGlkPSJleHBvcnRQViIgY2xhc3M9ImJ0biBnaG9zdCI+RXhwb3J0IHNvbGFyIGRhdGFzZXQ8L2J1dHRvbj4KICAgICAgICAgIDxidXR0b24gaWQ9ImNsZWFyUFYiIGNsYXNzPSJidG4gd2FybiI+Q2xlYXIgc29sYXIgZGF0YXNldDwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxkaXYgY2xhc3M9ImNhcmQiPgogICAgICA8ZGl2IGNsYXNzPSJyb3ciPjxiPlBob3RvczwvYj48L2Rpdj4KICAgICAgPGRpdiBpZD0ibGlzdCIgY2xhc3M9ImdyaWQiPjwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJzbWFsbCIgaWQ9ImVtcHR5SGludCI+Tm8gcGhvdG9zIHlldC48L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxkaXYgY2xhc3M9ImNhcmQiPgogICAgICA8ZGl2IGNsYXNzPSJyb3ciPjxiPkJ1aWxkIE91dHB1dDwvYj48L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0icm93Ij4KICAgICAgICA8YnV0dG9uIGlkPSJjb3B5Rm9yQ2hhdCIgY2xhc3M9ImJ0biBnb29kIj5Db3B5IHRleHQgZm9yIENoYXRHUFQ8L2J1dHRvbj4KICAgICAgICA8YnV0dG9uIGlkPSJkb3dubG9hZE1hbmlmZXN0IiBjbGFzcz0iYnRuIj5Eb3dubG9hZCBtYW5pZmVzdC5qc29uPC9idXR0b24+CiAgICAgICAgPGJ1dHRvbiBpZD0iYnVpbGRaaXAiIGNsYXNzPSJidG4gZ2hvc3QiPkJ1aWxkIFpJUCAoaW1hZ2VzICsgYXVkaW8gKyBtYW5pZmVzdCk8L2J1dHRvbj4KICAgICAgICA8YnV0dG9uIGlkPSJidWlsZFRlc3QiIGNsYXNzPSJidG4gc2Vjb25kYXJ5Ij5Eb3dubG9hZCBNaW5pbWFsIFRlc3QgTWFuaWZlc3Q8L2J1dHRvbj4KICAgICAgICA8YnV0dG9uIGlkPSJidWlsZFZhbGlkYXRpb24iIGNsYXNzPSJidG4gd2FybiI+RG93bmxvYWQgVmFsaWRhdGlvbiBQYWNrPC9idXR0b24+CiAgICAgICAgPHNwYW4gaWQ9ImJ1aWxkSW5mbyIgY2xhc3M9InNtYWxsIj48L3NwYW4+CiAgICAgIDwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJzbWFsbCI+WklQIHVzZXMgYSBDRE4gbGlicmFyeS4gSWYgb2ZmbGluZSwgdXNlIG1hbmlmZXN0IC8gdGVzdCBtYW5pZmVzdCAvIHZhbGlkYXRpb24gcGFjayBidXR0b25zLjwvZGl2PgogICAgPC9kaXY+CiAgPC9tYWluPgoKICA8ZGl2IGNsYXNzPSJmb290ZXIiPgogICAgU2F2ZXMgdG8gbG9jYWxTdG9yYWdlOiA8Y29kZT5FSDEwMDMwMDY6ZmllbGRfaW50YWtlX3JlY29yZHM8L2NvZGU+IChpbnRha2VzKSBhbmQgPGNvZGU+RUgxMDAzMDA2OnNvbGFyX3NhbXBsZXM8L2NvZGU+IChzb2xhcikuIOKAlCBGYXJtIFJlc2VhcmNoLCBQYXJjZWwgRUgxMDAzMDA2LgogIDwvZGl2PgoKPHNjcmlwdD4KLy8gLS0tLSBQcmlvciB2MS4zLjIgY29yZSAodHJpbW1lZCB0byBrZWVwIGZpbGUgY29uY2lzZSk7IGV2ZXJ5dGhpbmcgc3RpbGwgd29ya3MgLS0tLQpjb25zdCAkID0gc2VsID0+IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsKTsKY29uc3QgbGlzdEVsID0gJCgiI2xpc3QiKTsgY29uc3QgZW1wdHlIaW50ID0gJCgiI2VtcHR5SGludCIpOwpsZXQgYmF0Y2ggPSBbXTsgbGV0IGRldmljZUdQUyA9IG51bGw7IGxldCBkZXZpY2VIZWFkaW5nID0gbnVsbDsKbGV0IG1lZGlhU3RyZWFtID0gbnVsbCwgcmVjb3JkZXIgPSBudWxsLCBjaHVua3MgPSBbXTsgbGV0IGJhdGNoQXVkaW9CbG9iID0gbnVsbCwgYmF0Y2hBdWRpb0V4dCA9ICJ3ZWJtIjsKbGV0IHBlcm1pc3Npb25TdGF0ZSA9ICJ1bmtub3duIjsKY29uc3QgU09MQVJfS0VZID0gIkVIMTAwMzAwNjpzb2xhcl9zYW1wbGVzIjsKZnVuY3Rpb24gbG9hZFNvbGFyKCl7IHRyeSB7IHJldHVybiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFNPTEFSX0tFWSl8fCJbXSIpOyB9IGNhdGNoIHsgcmV0dXJuIFtdOyB9IH0KZnVuY3Rpb24gc2F2ZVNvbGFyKGFycil7IGxvY2FsU3RvcmFnZS5zZXRJdGVtKFNPTEFSX0tFWSwgSlNPTi5zdHJpbmdpZnkoYXJyKSk7IH0KZnVuY3Rpb24gdWlkKCl7IHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyLDEwKTsgfQpjb25zdCB0b1JhZCA9IGQgPT4gZCAqIE1hdGguUEkgLyAxODA7IGNvbnN0IHRvRGVnID0gciA9PiByICogMTgwIC8gTWF0aC5QSTsKZnVuY3Rpb24gb2Zmc2V0TGF0TG9uKGxhdCwgbG9uLCBkaXN0YW5jZU1ldGVycywgYmVhcmluZ0RlZyl7CiAgY29uc3QgUiA9IDYzNzEwMDAsIM60ID0gZGlzdGFuY2VNZXRlcnMgLyBSLCDOuCA9IHRvUmFkKGJlYXJpbmdEZWcpOwogIGNvbnN0IM+GMSA9IHRvUmFkKGxhdCksIM67MSA9IHRvUmFkKGxvbik7CiAgY29uc3Qgc2luz4YxID0gTWF0aC5zaW4oz4YxKSwgY29zz4YxID0gTWF0aC5jb3Moz4YxKTsKICBjb25zdCBjb3POtCA9IE1hdGguY29zKM60KSwgc2luzrQgPSBNYXRoLnNpbijOtCk7CiAgY29uc3Qgc2luz4YyID0gc2luz4YxKmNvc860ICsgY29zz4YxKnNpbs60Kk1hdGguY29zKM64KTsKICBjb25zdCDPhjIgPSBNYXRoLmFzaW4oc2luz4YyKTsKICBjb25zdCB5ID0gTWF0aC5zaW4ozrgpKnNpbs60KmNvc8+GMTsKICBjb25zdCB4ID0gY29zzrQgLSBzaW7PhjEqc2luz4YyOwogIGNvbnN0IM67MiA9IM67MSArIE1hdGguYXRhbjIoeSwgeCk7CiAgcmV0dXJuIHtsYXQ6IHRvRGVnKM+GMiksIGxvbjogKHRvRGVnKM67MikrNTQwKSUzNjAgLSAxODB9Owp9CmZ1bmN0aW9uIGRtc1RvRGVnKGRtcyl7IGZ1bmN0aW9uIHZhbCh4KXsgcmV0dXJuIEFycmF5LmlzQXJyYXkoeCkgPyAoeFswXS94WzFdKSA6IHg7IH0gcmV0dXJuIHZhbChkbXNbMF0pICsgdmFsKGRtc1sxXSkvNjAgKyB2YWwoZG1zWzJdKS8zNjAwOyB9CmFzeW5jIGZ1bmN0aW9uIHJlYWRFWElGR1BTKGZpbGUpewogIHRyeXsKICAgIGNvbnN0IGJ1ZiA9IGF3YWl0IGZpbGUuYXJyYXlCdWZmZXIoKTsKICAgIGNvbnN0IGR2ID0gbmV3IERhdGFWaWV3KGJ1Zik7CiAgICBpZihkdi5nZXRVaW50MTYoMCkgIT09IDB4RkZEOCkgcmV0dXJuIG51bGw7CiAgICBsZXQgb2Zmc2V0ID0gMjsKICAgIHdoaWxlKG9mZnNldCA8IGR2LmJ5dGVMZW5ndGgpewogICAgICBjb25zdCBtYXJrZXIgPSBkdi5nZXRVaW50MTYob2Zmc2V0KTsgb2Zmc2V0ICs9IDI7CiAgICAgIGNvbnN0IHNpemUgPSBkdi5nZXRVaW50MTYob2Zmc2V0KTsgb2Zmc2V0ICs9IDI7CiAgICAgIGlmKG1hcmtlciA9PT0gMHhGRkUxKXsKICAgICAgICBpZihkdi5nZXRVaW50MzIob2Zmc2V0KSA9PT0gMHg0NTc4Njk2NiAmJiBkdi5nZXRVaW50MTYob2Zmc2V0KzQpID09PSAweDAwMDApewogICAgICAgICAgY29uc3QgdGlmZiA9IG9mZnNldCArIDY7CiAgICAgICAgICBjb25zdCBlbmRpYW4gPSBkdi5nZXRVaW50MTYodGlmZikgPT09IDB4NDk0OSA/ICdMRScgOiAnQkUnOwogICAgICAgICAgY29uc3QgZ2V0VTE2ID0gKHApPT4gZW5kaWFuPT09J0xFJz8gZHYuZ2V0VWludDE2KHAsdHJ1ZSk6ZHYuZ2V0VWludDE2KHAsZmFsc2UpOwogICAgICAgICAgY29uc3QgZ2V0VTMyID0gKHApPT4gZW5kaWFuPT09J0xFJz8gZHYuZ2V0VWludDMyKHAsdHJ1ZSk6ZHYuZ2V0VWludDMyKHAsZmFsc2UpOwogICAgICAgICAgY29uc3QgaWZkMCA9IHRpZmYgKyBnZXRVMzIodGlmZis0KTsKICAgICAgICAgIGNvbnN0IG51bURpciA9IGdldFUxNihpZmQwKTsKICAgICAgICAgIGxldCBncHNJRkRPZmZzZXQgPSBudWxsOwogICAgICAgICAgZm9yKGxldCBpPTA7aTxudW1EaXI7aSsrKXsKICAgICAgICAgICAgY29uc3QgZSA9IGlmZDAgKyAyICsgaSoxMjsKICAgICAgICAgICAgY29uc3QgdGFnID0gZ2V0VTE2KGUpOwogICAgICAgICAgICBpZih0YWcgPT09IDB4ODgyNSl7IGdwc0lGRE9mZnNldCA9IHRpZmYgKyBnZXRVMzIoZSs4KTsgYnJlYWs7IH0KICAgICAgICAgIH0KICAgICAgICAgIGlmKCFncHNJRkRPZmZzZXQpIHJldHVybiBudWxsOwogICAgICAgICAgY29uc3QgbiA9IGdldFUxNihncHNJRkRPZmZzZXQpOwogICAgICAgICAgbGV0IGxhdFJlZiwgbGF0LCBsb25SZWYsIGxvbiwgYWx0OwogICAgICAgICAgZnVuY3Rpb24gcmVhZFJhdGlvbmFsKHApeyBjb25zdCBudW0gPSBnZXRVMzIocCksIGRlbiA9IGdldFUzMihwKzQpOyByZXR1cm4gW251bSwgZGVuXTsgfQogICAgICAgICAgZm9yKGxldCBpPTA7aTxuO2krKyl7CiAgICAgICAgICAgIGNvbnN0IGUgPSBncHNJRkRPZmZzZXQgKyAyICsgaSoxMjsKICAgICAgICAgICAgY29uc3QgdGFnID0gZ2V0VTE2KGUpOwogICAgICAgICAgICBjb25zdCB0eXAgPSBnZXRVMTYoZSsyKTsKICAgICAgICAgICAgY29uc3QgY250ID0gZ2V0VTMyKGUrNCk7CiAgICAgICAgICAgIGNvbnN0IHZhbCA9IGUrODsKICAgICAgICAgICAgY29uc3QgdmFsT2ZmID0gY250KiAodHlwPT09NT84Oih0eXA9PT0yPzE6NCkpID4gNCA/IHRpZmYgKyBnZXRVMzIodmFsKSA6IHZhbDsKICAgICAgICAgICAgaWYodGFnPT09MHgwMDAxKSBsYXRSZWYgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGR2LmdldFVpbnQ4KHZhbE9mZikpOwogICAgICAgICAgICBpZih0YWc9PT0weDAwMDIpeyBsYXQgPSBbcmVhZFJhdGlvbmFsKHZhbE9mZiksIHJlYWRSYXRpb25hbCh2YWxPZmYrOCksIHJlYWRSYXRpb25hbCh2YWxPZmYrMTYpXTsgfQogICAgICAgICAgICBpZih0YWc9PT0weDAwMDMpIGxvblJlZiA9IFN0cmluZy5mcm9tQ2hhckNvZGUoZHYuZ2V0VWludDgodmFsT2ZmKSk7CiAgICAgICAgICAgIGlmKHRhZz09PTB4MDAwNCl7IGxvbiA9IFtyZWFkUmF0aW9uYWwodmFsT2ZmKSwgcmVhZFJhdGlvbmFsKHZhbE9mZis4KSwgcmVhZFJhdGlvbmFsKHZhbE9mZisxNildOyB9CiAgICAgICAgICAgIGlmKHRhZz09PTB4MDAwNil7IGNvbnN0IHIgPSByZWFkUmF0aW9uYWwodmFsT2ZmKTsgYWx0ID0gclswXS9yWzFdOyB9CiAgICAgICAgICB9CiAgICAgICAgICBpZihsYXQgJiYgbG9uKXsKICAgICAgICAgICAgbGV0IGxhdERlZyA9IGRtc1RvRGVnKGxhdCk7IGlmKGxhdFJlZj09PSdTJykgbGF0RGVnID0gLWxhdERlZzsKICAgICAgICAgICAgbGV0IGxvbkRlZyA9IGRtc1RvRGVnKGxvbik7IGlmKGxvblJlZj09PSdXJykgbG9uRGVnID0gLWxvbkRlZzsKICAgICAgICAgICAgcmV0dXJuIHsgbGF0OiBsYXREZWcsIGxvbjogbG9uRGVnLCBhbHQ6IGFsdCA/PyBudWxsLCBzcmM6ICJleGlmIiB9OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBvZmZzZXQgKz0gc2l6ZSAtIDI7CiAgICB9CiAgfWNhdGNoKGUpe30KICByZXR1cm4gbnVsbDsKfQpmdW5jdGlvbiByb2xlc0Zyb21UYWdzKHRhZ3MpewogIGNvbnN0IG1hcCA9IHsgc3RyZWFtOiJzdHJlYW1zIiwgYmxhY2tiZXJyeToiYmxhY2tiZXJyeSIsIHJvYWQ6InJvYWRzIiwgYnVpbGRpbmc6ImJ1aWxkaW5ncyIsIHV0aWxpdHk6InV0aWxpdGllcyIsCiAgICBzbG9wZToic2xvcGUiLCBhc3BlY3Q6ImFzcGVjdCIsIHdldGxhbmRzOiJ3ZXRsYW5kcyIsIGZsb29kcGxhaW46ImZsb29kcGxhaW4iLCBzaWx2aWN1bHR1cmU6InNpbHZpY3VsdHVyZSIsCiAgICB3aWxkbGlmZToid2lsZGxpZmUiLCBnZWVzZToid2lsZGxpZmUiLCBjaGlja2Vuczoid2lsZGxpZmUiLCAic29sYXItcGFuZWwiOiJzb2xhciIsICJvdXBlcy1tZWdhNSI6InBvd2VyIiwKICAgICJzaXRlLWNvbnRleHQiOiJjb250ZXh0Iiwgd2VhdGhlcjoiY29udGV4dCIgfTsKICBjb25zdCByb2xlcyA9IG5ldyBTZXQoKTsgKHRhZ3N8fFtdKS5mb3JFYWNoKHQgPT4geyBjb25zdCBrID0gKHR8fCcnKS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCk7IGlmKG1hcFtrXSkgcm9sZXMuYWRkKG1hcFtrXSk7IH0pOwogIHJldHVybiBBcnJheS5mcm9tKHJvbGVzKTsKfQpmdW5jdGlvbiBtZXRhVGV4dChpdGVtKXsKICBjb25zdCBnID0gaXRlbS5jYW1lcmFfZ3BzID8gYCR7aXRlbS5jYW1lcmFfZ3BzLmxhdC50b0ZpeGVkKDYpfSwgJHtpdGVtLmNhbWVyYV9ncHMubG9uLnRvRml4ZWQoNil9ICgke2l0ZW0uY2FtZXJhX2dwcy5zcmN9JHtpdGVtLmNhbWVyYV9ncHMuYWNjIT1udWxsP2AsIMKxJHtNYXRoLnJvdW5kKGl0ZW0uY2FtZXJhX2dwcy5hY2MpfW1gOicnfSlgIDogJ25vIGNhbWVyYSBHUFMnOwogIGNvbnN0IHMgPSBpdGVtLnN1YmplY3RfZ3BzID8gYCR7aXRlbS5zdWJqZWN0X2dwcy5sYXQudG9GaXhlZCg2KX0sICR7aXRlbS5zdWJqZWN0X2dwcy5sb24udG9GaXhlZCg2KX1gIDogJ25vIHN1YmplY3QgR1BTJzsKICBjb25zdCBhdWQgPSBpdGVtLnZvaWNlID8gYPCfjpnvuI8gJHtNYXRoLnJvdW5kKChpdGVtLnZvaWNlLmR1cmF0aW9ufHwwKSl9c2AgOiAnbm8gdm9pY2Ugbm90ZSc7CiAgcmV0dXJuIGBjYW1lcmE6ICR7Z30g4oCiIHN1YmplY3Q6ICR7c30g4oCiIGhlYWRpbmc6ICR7aXRlbS5oZWFkaW5nID8/ICfigJQnfcKwIOKAoiBkaXN0OiAke2l0ZW0uZGlzdF9tID8/ICfigJQnfSBtIOKAoiAke2F1ZH1gOwp9CmFzeW5jIGZ1bmN0aW9uIHN0YXJ0UmVjb3JkZXIoKXsgaWYoIW5hdmlnYXRvci5tZWRpYURldmljZXMgfHwgIW5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKSB0aHJvdyBuZXcgRXJyb3IoIk1lZGlhIG5vdCBzdXBwb3J0ZWQiKTsgaWYoIW1lZGlhU3RyZWFtKSBtZWRpYVN0cmVhbSA9IGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHsgYXVkaW86dHJ1ZSB9KTsgcmV0dXJuIG5ldyBNZWRpYVJlY29yZGVyKG1lZGlhU3RyZWFtKTsgfQpmdW5jdGlvbiByZW5kZXJQaG90byhpdCl7CiAgY29uc3Qgd3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOyB3cmFwLmNsYXNzTmFtZSA9ICd0aHVtYic7CiAgY29uc3QgZ3BzUGlsbCA9IGl0LmNhbWVyYV9ncHMgPyAnPHNwYW4gY2xhc3M9InBpbGwgb2siPkdQUyBPSzwvc3Bhbj4nIDogJzxzcGFuIGNsYXNzPSJwaWxsIGJhZCI+Tm8gR1BTIHlldDwvc3Bhbj4nOwogIHdyYXAuaW5uZXJIVE1MID0gYAogICAgPGltZyBzcmM9IiR7aXQucHJldmlld30iIGFsdD0icHJldmlldyIvPgogICAgPGRpdiBzdHlsZT0iZmxleDoxIj4KICAgICAgPGRpdiBjbGFzcz0icm93IiBzdHlsZT0ianVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW4iPgogICAgICAgIDxkaXY+PGI+JHtpdC5uYW1lfTwvYj48L2Rpdj4KICAgICAgICA8ZGl2PiR7Z3BzUGlsbH08L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9Im1ldGEiIGlkPSJtZXRhLSR7aXQuaWR9Ij4ke21ldGFUZXh0KGl0KX08L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0iY2hpcHMiIHN0eWxlPSJtYXJnaW4tdG9wOjZweCI+CiAgICAgICAgJHtbJ2JsYWNrYmVycnknLCdoeWRybycsJ2Vyb3Npb24nLCd1dGlsaXR5JywnYnVpbGRpbmcnLCdyb2FkJywnc3RyZWFtJywnd2lsZGxpZmUnLCdnZWVzZScsJ2NoaWNrZW5zJywnc2lsdmljdWx0dXJlJywnc29pbC1zYW1wbGUnLCdzb2xhci1wYW5lbCcsJ291cGVzLW1lZ2E1Jywnc2l0ZS1jb250ZXh0Jywnd2VhdGhlciddLm1hcCh0PT5gPHNwYW4gY2xhc3M9InRhZyAke2l0LnRhZ3MuaW5jbHVkZXModCk/J29uJzonJ30iIGRhdGEtdGFnPSIke3R9IiBkYXRhLWlkPSIke2l0LmlkfSI+JHt0fTwvc3Bhbj5gKS5qb2luKCcnKX0KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9InJvdyIgc3R5bGU9Im1hcmdpbi10b3A6NnB4Ij4KICAgICAgICA8bGFiZWw+SGVhZGluZyAowrApIDxpbnB1dCBjbGFzcz0iaW5wdXQiIHN0eWxlPSJ3aWR0aDo4MHB4IiBkYXRhLWg9IiR7aXQuaWR9IiB2YWx1ZT0iJHtpdC5oZWFkaW5nID8/ICcnfSIgcGxhY2Vob2xkZXI9ImF1dG8iLz48L2xhYmVsPgogICAgICAgIDxsYWJlbD5EaXN0YW5jZSAobSkgPGlucHV0IGNsYXNzPSJpbnB1dCIgc3R5bGU9IndpZHRoOjgwcHgiIGRhdGEtZD0iJHtpdC5pZH0iIHZhbHVlPSIke2l0LmRpc3RfbSA/PyAnJ30iIHBsYWNlaG9sZGVyPSJkZWZhdWx0Ii8+PC9sYWJlbD4KICAgICAgICA8bGFiZWw+U25hcCBoaW50IAogICAgICAgICAgPHNlbGVjdCBjbGFzcz0iaW5wdXQiIGRhdGEtc25hcD0iJHtpdC5pZH0iPgogICAgICAgICAgICAke1snbm9uZScsJ3N0cmVhbScsJ3JvYWQnLCdwYXJjZWwnLCdibGFja2JlcnJ5J10ubWFwKG9wdCA9PiBgPG9wdGlvbiB2YWx1ZT0iJHtvcHR9IiAke2l0LnNuYXBfaGludD09PW9wdD8nc2VsZWN0ZWQnOicnfT4ke29wdH08L29wdGlvbj5gKS5qb2luKCcnKX0KICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgIDwvbGFiZWw+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIHNlY29uZGFyeSIgZGF0YS1hcHBseT0iJHtpdC5pZH0iPkFwcGx5PC9idXR0b24+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGdob3N0IiBkYXRhLWF0dGFjaD0iJHtpdC5pZH0iPkF0dGFjaCBjdXJyZW50IEdQUzwvYnV0dG9uPgogICAgICA8L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0icm93IiBzdHlsZT0iYWxpZ24taXRlbXM6ZmxleC1zdGFydDsgbWFyZ2luLXRvcDo2cHgiPgogICAgICAgIDx0ZXh0YXJlYSBjbGFzcz0iaW5wdXQiIGRhdGEtaWQ9IiR7aXQuaWR9IiBwbGFjZWhvbGRlcj0iTm90ZXMgZm9yIHRoaXMgcGhvdG/igKYiPiR7aXQubm90ZXN8fCcnfTwvdGV4dGFyZWE+CiAgICAgICAgPGRpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsIj5Wb2ljZSBub3RlPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gZ2hvc3QiIGRhdGEtcmVjPSIke2l0LmlkfSI+UmVjb3JkPC9idXR0b24+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBnaG9zdCIgZGF0YS1zdG9wPSIke2l0LmlkfSIgZGlzYWJsZWQ+U3RvcDwvYnV0dG9uPgogICAgICAgICAgICA8YXVkaW8gZGF0YS1hdWRpbz0iJHtpdC5pZH0iIGNvbnRyb2xzIGNsYXNzPSIke2l0LnZvaWNlPycnOidoaWRkZW4nfSI+PC9hdWRpbz4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvZGl2PmA7CiAgd3JhcC5xdWVyeVNlbGVjdG9yQWxsKCcudGFnJykuZm9yRWFjaChlbCA9PiB7CiAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsgY29uc3QgaWQgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKTsgY29uc3QgdCA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS10YWcnKTsgY29uc3QgaXQgPSBiYXRjaC5maW5kKHg9PnguaWQ9PT1pZCk7IGlmKCFpdCkgcmV0dXJuOyBpZihpdC50YWdzLmluY2x1ZGVzKHQpKSBpdC50YWdzID0gaXQudGFncy5maWx0ZXIoeD0+eCE9PXQpOyBlbHNlIGl0LnRhZ3MucHVzaCh0KTsgZWwuY2xhc3NMaXN0LnRvZ2dsZSgnb24nKTsgfSk7CiAgfSk7CiAgd3JhcC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hcHBseV0nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgIGNvbnN0IGlkID0gd3JhcC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hcHBseV0nKS5nZXRBdHRyaWJ1dGUoJ2RhdGEtYXBwbHknKTsKICAgIGNvbnN0IGl0ID0gYmF0Y2guZmluZCh4PT54LmlkPT09aWQpOyBpZighaXQpIHJldHVybjsKICAgIGNvbnN0IGggPSBwYXJzZUZsb2F0KHdyYXAucXVlcnlTZWxlY3RvcihgW2RhdGEtaD0iJHtpZH0iXWApLnZhbHVlKTsKICAgIGNvbnN0IGQgPSBwYXJzZUZsb2F0KHdyYXAucXVlcnlTZWxlY3RvcihgW2RhdGEtZD0iJHtpZH0iXWApLnZhbHVlKTsKICAgIGNvbnN0IHNuYXAgPSB3cmFwLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXNuYXA9IiR7aWR9Il1gKS52YWx1ZTsKICAgIGlmKCFpc05hTihoKSkgaXQuaGVhZGluZyA9ICgoaCUzNjApKzM2MCklMzYwOyBpZighaXNOYU4oZCkpIGl0LmRpc3RfbSA9IE1hdGgubWF4KDAsIGQpOyBpdC5zbmFwX2hpbnQgPSBzbmFwOwogICAgaXQubm90ZXMgPSB3cmFwLnF1ZXJ5U2VsZWN0b3IoYHRleHRhcmVhW2RhdGEtaWQ9IiR7aWR9Il1gKS52YWx1ZSB8fCAnJzsgcmVjb21wdXRlU3ViamVjdChpdCk7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWV0YS0nK2lkKS50ZXh0Q29udGVudCA9IG1ldGFUZXh0KGl0KTsKICB9KTsKICB3cmFwLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWF0dGFjaF0nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsgaWYoZGV2aWNlR1BTKXsgaXQuY2FtZXJhX2dwcyA9IHsgLi4uZGV2aWNlR1BTIH07IHJlY29tcHV0ZVN1YmplY3QoaXQpOyB3cmFwLnF1ZXJ5U2VsZWN0b3IoJy5waWxsLmJhZCcpPy5jbGFzc0xpc3QucmVtb3ZlKCdiYWQnKTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21ldGEtJytpdC5pZCkudGV4dENvbnRlbnQgPSBtZXRhVGV4dChpdCk7IHdyYXAucXVlcnlTZWxlY3RvcignW2RhdGEtYXR0YWNoXScpLmRpc2FibGVkID0gdHJ1ZTsgfSBlbHNlIHsgYWxlcnQoJ05vIGRldmljZSBHUFMgYXZhaWxhYmxlIHlldC4nKTsgfSB9KTsKICBjb25zdCByZWNCdG4gPSB3cmFwLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXJlYz0iJHtpdC5pZH0iXWApOyBjb25zdCBzdG9wQnRuID0gd3JhcC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1zdG9wPSIke2l0LmlkfSJdYCk7IGNvbnN0IGF1ZGlvRWwgPSB3cmFwLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWF1ZGlvPSIke2l0LmlkfSJdYCk7CiAgcmVjQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4geyB0cnl7IHJlY0J0bi5kaXNhYmxlZCA9IHRydWU7IHN0b3BCdG4uZGlzYWJsZWQgPSBmYWxzZTsgY29uc3QgcmVjID0gYXdhaXQgc3RhcnRSZWNvcmRlcigpOyBpdC5fcmVjID0gcmVjOyBpdC5fcmVjU3RhcnQgPSBEYXRlLm5vdygpOyBpdC5fY2h1bmtzID0gW107IHJlYy5vbmRhdGFhdmFpbGFibGUgPSAoZSk9PnsgaWYoZS5kYXRhICYmIGUuZGF0YS5zaXplPjApIGl0Ll9jaHVua3MucHVzaChlLmRhdGEpOyB9OyByZWMub25zdG9wID0gKCk9PnsgY29uc3QgYmxvYiA9IG5ldyBCbG9iKGl0Ll9jaHVua3MsIHsgdHlwZTogaXQuX2NodW5rc1swXT8udHlwZSB8fCAnYXVkaW8vd2VibScgfSk7IGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7IGF1ZGlvRWwuc3JjID0gdXJsOyBhdWRpb0VsLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpOyBpdC52b2ljZSA9IHsgYmxvYiwgZHVyYXRpb246IChEYXRlLm5vdygpLWl0Ll9yZWNTdGFydCkvMTAwMCwgZXh0OiAoYmxvYi50eXBlLmluY2x1ZGVzKCdvZ2cnKT8nb2dnJzond2VibScpIH07IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZXRhLScraXQuaWQpLnRleHRDb250ZW50ID0gbWV0YVRleHQoaXQpOyB9OyByZWMuc3RhcnQoKTsgfWNhdGNoKGUpeyBhbGVydCgnTWljIG5vdCBhdmFpbGFibGUgb3IgcGVybWlzc2lvbiBkZW5pZWQuJyk7IHJlY0J0bi5kaXNhYmxlZCA9IGZhbHNlOyBzdG9wQnRuLmRpc2FibGVkID0gdHJ1ZTsgfSB9KTsKICBzdG9wQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4geyB0cnl7IGlmKGl0Ll9yZWMgJiYgaXQuX3JlYy5zdGF0ZSE9PSdpbmFjdGl2ZScpeyBpdC5fcmVjLnN0b3AoKTsgfSB9Y2F0Y2goZSl7fSByZWNCdG4uZGlzYWJsZWQgPSBmYWxzZTsgc3RvcEJ0bi5kaXNhYmxlZCA9IHRydWU7IH0pOwogIHJldHVybiB3cmFwOwp9CmZ1bmN0aW9uIHJlZnJlc2hMaXN0KCl7IGxpc3RFbC5pbm5lckhUTUw9Jyc7IGlmKCFiYXRjaC5sZW5ndGgpeyBlbXB0eUhpbnQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7IHJldHVybjsgfSBlbXB0eUhpbnQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7IGJhdGNoLmZvckVhY2goaXQgPT4gbGlzdEVsLmFwcGVuZENoaWxkKHJlbmRlclBob3RvKGl0KSkpOyB9CmFzeW5jIGZ1bmN0aW9uIGZpbGVUb1ByZXZpZXcoZmlsZSwgbWF4RWRnZT00MDApeyByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTsgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7IGltZy5vbmxvYWQgPSAoKSA9PiB7IGNvbnN0IHcgPSBpbWcud2lkdGgsIGggPSBpbWcuaGVpZ2h0OyBjb25zdCBzY2FsZSA9IE1hdGgubWluKDEsIG1heEVkZ2UvTWF0aC5tYXgodyxoKSk7IGNvbnN0IG53ID0gTWF0aC5yb3VuZCh3KnNjYWxlKSwgbmggPSBNYXRoLnJvdW5kKGgqc2NhbGUpOyBjb25zdCBjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7IGMud2lkdGg9bnc7IGMuaGVpZ2h0PW5oOyBjb25zdCBjeCA9IGMuZ2V0Q29udGV4dCgnMmQnKTsgY3guZHJhd0ltYWdlKGltZywwLDAsbncsbmgpOyBjb25zdCBkYXRhID0gYy50b0RhdGFVUkwoJ2ltYWdlL2pwZWcnLCAwLjgpOyBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7IHJlc29sdmUoZGF0YSk7IH07IGltZy5zcmMgPSB1cmw7IH0pOyB9CmFzeW5jIGZ1bmN0aW9uIGZpbGVUb1Jlc2l6ZWRCbG9iKGZpbGUsIG1heEVkZ2U9MTYwMCl7IHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4geyBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpOyBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTsgaW1nLm9ubG9hZCA9ICgpID0+IHsgY29uc3QgdyA9IGltZy53aWR0aCwgaCA9IGltZy5oZWlnaHQ7IGNvbnN0IHNjYWxlID0gTWF0aC5taW4oMSwgbWF4RWRnZS9NYXRoLm1heCh3LGgpKTsgY29uc3QgbncgPSBNYXRoLnJvdW5kKHcqc2NhbGUpLCBuaCA9IE1hdGgucm91bmQoaCpzY2FsZSk7IGNvbnN0IGMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsgYy53aWR0aD1udzsgYy5oZWlnaHQ9bmg7IGNvbnN0IGN4ID0gYy5nZXRDb250ZXh0KCcyZCcpOyBjeC5kcmF3SW1hZ2UoaW1nLDAsMCxudyxuaCk7IGMudG9CbG9iKGIgPT4geyBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7IHJlc29sdmUoYik7IH0sICdpbWFnZS9qcGVnJywgMC44NSk7IH07IGltZy5zcmMgPSB1cmw7IH0pOyB9Ci8vIFNlbnNvcnMKZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dldEdQUycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVxdWVzdE9uZVNob3RHUFMpOwpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2V0SGVhZGluZycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4gewogIGNvbnN0IHN0YXR1cyA9ICQoIiNzdGF0dXMiKTsKICBjb25zdCBoYW5kbGUgPSAoaGVhZGluZ0RlZykgPT4geyBkZXZpY2VIZWFkaW5nID0gKChoZWFkaW5nRGVnJTM2MCkrMzYwKSUzNjA7IHN0YXR1cy50ZXh0Q29udGVudCA9IGBIZWFkaW5nOiAke2RldmljZUhlYWRpbmcudG9GaXhlZCgwKX3CsGA7IGJhdGNoLmZvckVhY2goaXQgPT4geyBpZihpdC5oZWFkaW5nPT1udWxsKSBpdC5oZWFkaW5nID0gZGV2aWNlSGVhZGluZzsgcmVjb21wdXRlU3ViamVjdChpdCk7IH0pOyByZWZyZXNoTGlzdCgpOyB9OwogIGlmICh0eXBlb2YgRGV2aWNlT3JpZW50YXRpb25FdmVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIERldmljZU9yaWVudGF0aW9uRXZlbnQucmVxdWVzdFBlcm1pc3Npb24gPT09ICdmdW5jdGlvbicpIHsKICAgIHRyeSB7IGNvbnN0IHAgPSBhd2FpdCBEZXZpY2VPcmllbnRhdGlvbkV2ZW50LnJlcXVlc3RQZXJtaXNzaW9uKCk7IGlmIChwICE9PSAnZ3JhbnRlZCcpIHsgc3RhdHVzLnRleHRDb250ZW50ID0gIkhlYWRpbmc6IHBlcm1pc3Npb24gZGVuaWVkIChzZXQgbWFudWFsbHkpLiI7IHJldHVybjsgfSB9IGNhdGNoKGUpeyBzdGF0dXMudGV4dENvbnRlbnQgPSAiSGVhZGluZzogcGVybWlzc2lvbiBlcnJvci4iOyByZXR1cm47IH0KICB9CiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2RldmljZW9yaWVudGF0aW9uJywgZnVuY3Rpb24gb25PcmllbnQoZSl7IGxldCBoZWFkaW5nID0gbnVsbDsgaWYoZS53ZWJraXRDb21wYXNzSGVhZGluZyAhPSBudWxsKSBoZWFkaW5nID0gZS53ZWJraXRDb21wYXNzSGVhZGluZzsgZWxzZSBpZihlLmFscGhhICE9IG51bGwpIGhlYWRpbmcgPSAzNjAgLSBlLmFscGhhOyBpZihoZWFkaW5nICE9IG51bGwpeyBoYW5kbGUoaGVhZGluZyk7IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdkZXZpY2VvcmllbnRhdGlvbicsIG9uT3JpZW50KTsgfSB9LCB7IG9uY2U6dHJ1ZSB9KTsKfSk7CmFzeW5jIGZ1bmN0aW9uIHN0YXJ0R1BTV2F0Y2goKXsKICBjb25zdCBzdGF0dXMgPSAkKCIjc3RhdHVzIik7IGNvbnN0IGh0dHBzSGludCA9ICQoIiNodHRwc0hpbnQiKTsKICBodHRwc0hpbnQudGV4dENvbnRlbnQgPSBsb2NhdGlvbi5wcm90b2NvbCA9PT0gJ2h0dHBzOicgfHwgbG9jYXRpb24uaG9zdG5hbWUgPT09ICdsb2NhbGhvc3QnIHx8IGxvY2F0aW9uLnByb3RvY29sID09PSAnZmlsZTonID8gIiIgOiAiTm90IEhUVFBTL2xvY2FsaG9zdCDigJQgYnJvd3NlciBHUFMgd2lsbCBub3QgcHJvbXB0LiBVc2UgSFRUUFMgb3Igb3BlbiBhcyBhIEZpbGUgVVJMLiI7CiAgaWYoIW5hdmlnYXRvci5nZW9sb2NhdGlvbil7IHN0YXR1cy50ZXh0Q29udGVudCA9ICJHUFMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXIuIjsgcmV0dXJuOyB9CiAgaWYgKG5hdmlnYXRvci5wZXJtaXNzaW9ucz8ucXVlcnkpIHsgdHJ5eyBjb25zdCBwID0gYXdhaXQgbmF2aWdhdG9yLnBlcm1pc3Npb25zLnF1ZXJ5KHsgbmFtZTonZ2VvbG9jYXRpb24nIH0pOyBwZXJtaXNzaW9uU3RhdGUgPSBwLnN0YXRlOyBwLm9uY2hhbmdlID0gKCk9PiBwZXJtaXNzaW9uU3RhdGUgPSBwLnN0YXRlOyBpZiAocC5zdGF0ZSA9PT0gJ2RlbmllZCcpIHsgc3RhdHVzLnRleHRDb250ZW50ID0gIkdQUzogZGVuaWVkIOKAlCBTaXRlIHNldHRpbmdzIOKGkiBMb2NhdGlvbiDihpIgQWxsb3csIHRoZW4gcmVsb2FkLiI7IHJldHVybjsgfSB9Y2F0Y2goZSl7fSB9CiAgbmF2aWdhdG9yLmdlb2xvY2F0aW9uLndhdGNoUG9zaXRpb24ocG9zID0+IHsgY29uc3QgeyBsYXRpdHVkZSwgbG9uZ2l0dWRlLCBhY2N1cmFjeSB9ID0gcG9zLmNvb3JkczsgZGV2aWNlR1BTID0geyBsYXQ6IGxhdGl0dWRlLCBsb246IGxvbmdpdHVkZSwgYWNjOiBhY2N1cmFjeSwgc3JjOidkZXZpY2UnIH07IHN0YXR1cy50ZXh0Q29udGVudCA9IGBHUFM6ICR7bGF0aXR1ZGUudG9GaXhlZCg2KX0sICR7bG9uZ2l0dWRlLnRvRml4ZWQoNil9ICjCsSR7TWF0aC5yb3VuZChhY2N1cmFjeSl9IG0pYDsgbGV0IGNoYW5nZWQgPSBmYWxzZTsgYmF0Y2guZm9yRWFjaChpdCA9PiB7IGlmKCFpdC5jYW1lcmFfZ3BzICYmIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncHNNb2RlJykudmFsdWUgIT09ICdleGlmX29ubHknKXsgaXQuY2FtZXJhX2dwcyA9IHsgLi4uZGV2aWNlR1BTIH07IHJlY29tcHV0ZVN1YmplY3QoaXQpOyBjaGFuZ2VkID0gdHJ1ZTsgfSB9KTsgaWYoY2hhbmdlZCkgcmVmcmVzaExpc3QoKTsgfSwgZXJyID0+IHsgc3RhdHVzLnRleHRDb250ZW50ID0gYEdQUyBlcnJvcjogJHtlcnIubWVzc2FnZX1gOyB9LCB7IGVuYWJsZUhpZ2hBY2N1cmFjeTp0cnVlLCBtYXhpbXVtQWdlOjAsIHRpbWVvdXQ6MTAwMDAgfSk7Cn0KZnVuY3Rpb24gcmVxdWVzdE9uZVNob3RHUFMoKXsKICBjb25zdCBzdGF0dXMgPSAkKCIjc3RhdHVzIik7CiAgaWYoIW5hdmlnYXRvci5nZW9sb2NhdGlvbil7IHN0YXR1cy50ZXh0Q29udGVudCA9ICJHUFMgbm90IHN1cHBvcnRlZC4iOyByZXR1cm47IH0KICBpZihwZXJtaXNzaW9uU3RhdGUgPT09ICdkZW5pZWQnKXsgc3RhdHVzLnRleHRDb250ZW50ID0gIkdQUzogZGVuaWVkIOKAlCBlbmFibGUgaW4gU2l0ZSBzZXR0aW5ncyBmaXJzdC4iOyByZXR1cm47IH0KICBzdGF0dXMudGV4dENvbnRlbnQgPSAiUmVxdWVzdGluZyBHUFPigKYiOwogIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oKHBvcyk9PnsgY29uc3QgeyBsYXRpdHVkZSwgbG9uZ2l0dWRlLCBhY2N1cmFjeSB9ID0gcG9zLmNvb3JkczsgZGV2aWNlR1BTID0geyBsYXQ6IGxhdGl0dWRlLCBsb246IGxvbmdpdHVkZSwgYWNjOiBhY2N1cmFjeSwgc3JjOidkZXZpY2UnIH07IHN0YXR1cy50ZXh0Q29udGVudCA9IGBHUFM6ICR7bGF0aXR1ZGUudG9GaXhlZCg2KX0sICR7bG9uZ2l0dWRlLnRvRml4ZWQoNil9ICjCsSR7TWF0aC5yb3VuZChhY2N1cmFjeSl9IG0pYDsgbGV0IGNoYW5nZWQgPSBmYWxzZTsgYmF0Y2guZm9yRWFjaChpdCA9PiB7IGlmKCFpdC5jYW1lcmFfZ3BzICYmIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncHNNb2RlJykudmFsdWUgIT09ICdleGlmX29ubHknKXsgaXQuY2FtZXJhX2dwcyA9IHsuLi5kZXZpY2VHUFN9OyByZWNvbXB1dGVTdWJqZWN0KGl0KTsgY2hhbmdlZCA9IHRydWU7IH0gfSk7IGlmKGNoYW5nZWQpIHJlZnJlc2hMaXN0KCk7IH0sIChlcnIpPT57IHN0YXR1cy50ZXh0Q29udGVudCA9ICJHUFMgZXJyb3I6ICIgKyBlcnIubWVzc2FnZTsgfSwgeyBlbmFibGVIaWdoQWNjdXJhY3k6dHJ1ZSwgbWF4aW11bUFnZToxMDAwMCwgdGltZW91dDoxMjAwMCB9KTsKfQovLyBJbnRha2UKJCgiI2ZpbGVJbnB1dCIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGFzeW5jIChlKSA9PiB7IGNvbnN0IGZpbGVzID0gQXJyYXkuZnJvbShlLnRhcmdldC5maWxlcyB8fCBbXSk7IGZvcihjb25zdCBmIG9mIGZpbGVzKXsgYXdhaXQgcHVzaEZpbGVXaXRoQXV0b1RhZ3MoZik7IH0gcmVmcmVzaExpc3QoKTsgfSk7CmFzeW5jIGZ1bmN0aW9uIHB1c2hGaWxlV2l0aEF1dG9UYWdzKGYsIGV4dHJhVGFncz1bXSl7CiAgY29uc3QgaWQgPSB1aWQoKTsgY29uc3QgbW9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncHNNb2RlJykudmFsdWU7CiAgY29uc3QgdXNlRXhpZiA9IChtb2RlID09PSAncHJlZmVyX2V4aWYnIHx8IG1vZGUgPT09ICdleGlmX29ubHknKTsgY29uc3QgdXNlRGV2aWNlID0gKG1vZGUgPT09ICdwcmVmZXJfZXhpZicgfHwgbW9kZSA9PT0gJ2RldmljZV9vbmx5Jyk7CiAgY29uc3QgZXhpZiA9IHVzZUV4aWYgPyBhd2FpdCByZWFkRVhJRkdQUyhmKSA6IG51bGw7IGNvbnN0IHByZXZpZXcgPSBhd2FpdCBmaWxlVG9QcmV2aWV3KGYpOwogIGxldCBjYW1HUFMgPSBudWxsOyBpZihleGlmKSBjYW1HUFMgPSBleGlmOyBlbHNlIGlmKHVzZURldmljZSAmJiBkZXZpY2VHUFMpIGNhbUdQUyA9IHsuLi5kZXZpY2VHUFN9OwogIGNvbnN0IGl0ZW0gPSB7IGlkLCBmaWxlOiBmLCBuYW1lOiBmLm5hbWUsIHRzOiBEYXRlLm5vdygpLCBwcmV2aWV3LCBjYW1lcmFfZ3BzOiBjYW1HUFMsIHN1YmplY3RfZ3BzOiBudWxsLCBoZWFkaW5nOiBkZXZpY2VIZWFkaW5nID8/IG51bGwsIGRpc3RfbTogbnVsbCwgdGFnczogZXh0cmFUYWdzLnNsaWNlKCksIG5vdGVzOicnLCBzbmFwX2hpbnQ6J25vbmUnLCBjb25kaXRpb25zOiBbXSwgdm9pY2U6bnVsbCB9OwogIGlmKGl0ZW0uY2FtZXJhX2dwcyAmJiBpdGVtLmNhbWVyYV9ncHMuc3JjID09PSAnZXhpZicgJiYgZGV2aWNlR1BTICYmIGRldmljZUdQUy5hY2MhPW51bGwpeyBpdGVtLmNhbWVyYV9ncHMuYWNjID0gZGV2aWNlR1BTLmFjYzsgfQogIHJlY29tcHV0ZVN1YmplY3QoaXRlbSk7IGJhdGNoLnB1c2goaXRlbSk7Cn0KZnVuY3Rpb24gcmVjb21wdXRlU3ViamVjdChpdCl7CiAgY29uc3QgY2FtID0gaXQuY2FtZXJhX2dwczsgY29uc3QgZGlzdCA9IGlzRmluaXRlKGl0LmRpc3RfbSkgPyBpdC5kaXN0X20gOiBwYXJzZUZsb2F0KCQoIiNkZWZhdWx0RGlzdCIpLnZhbHVlIHx8ICcwJykgfHwgMDsKICBsZXQgaGVhZGluZyA9IGl0LmhlYWRpbmc7IGlmIChoZWFkaW5nPT1udWxsIHx8IGlzTmFOKGhlYWRpbmcpKSB7IGNvbnN0IGRlZiA9IHBhcnNlRmxvYXQoJCgiI2RlZmF1bHRIZWFkaW5nIikudmFsdWUpOyBpZiAoaXNGaW5pdGUoZGVmKSkgaGVhZGluZyA9IGRlZjsgfQogIGlmKGNhbSAmJiBpc0Zpbml0ZShkaXN0KSAmJiBpc0Zpbml0ZShoZWFkaW5nKSl7IGl0LnN1YmplY3RfZ3BzID0gb2Zmc2V0TGF0TG9uKGNhbS5sYXQsIGNhbS5sb24sIGRpc3QsIGhlYWRpbmcpOyB9IGVsc2UgeyBpdC5zdWJqZWN0X2dwcyA9IG51bGw7IH0KfQovLyBCYXRjaCB2b2ljZQpjb25zdCByZWNCYXRjaEJ0biA9ICQoIiNyZWNCYXRjaCIpLCBzdG9wQmF0Y2hCdG4gPSAkKCIjc3RvcEJhdGNoIiksIGJhdGNoQXVkaW9FbCA9ICQoIiNiYXRjaEF1ZGlvIik7CmFzeW5jIGZ1bmN0aW9uIHN0YXJ0UmVjb3JkZXJCYXRjaCgpeyBpZighbmF2aWdhdG9yLm1lZGlhRGV2aWNlcyB8fCAhbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEpIHRocm93IG5ldyBFcnJvcigiTWVkaWEgbm90IHN1cHBvcnRlZCIpOyBpZighbWVkaWFTdHJlYW0pIG1lZGlhU3RyZWFtID0gYXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoeyBhdWRpbzp0cnVlIH0pOyByZXR1cm4gbmV3IE1lZGlhUmVjb3JkZXIobWVkaWFTdHJlYW0pOyB9CnJlY0JhdGNoQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4geyB0cnl7IHJlY0JhdGNoQnRuLmRpc2FibGVkID0gdHJ1ZTsgc3RvcEJhdGNoQnRuLmRpc2FibGVkID0gZmFsc2U7IHJlY29yZGVyID0gYXdhaXQgc3RhcnRSZWNvcmRlckJhdGNoKCk7IGNodW5rcyA9IFtdOyBjb25zdCBzdGFydCA9IERhdGUubm93KCk7IHJlY29yZGVyLm9uZGF0YWF2YWlsYWJsZSA9IChlKT0+eyBpZihlLmRhdGEgJiYgZS5kYXRhLnNpemU+MCkgY2h1bmtzLnB1c2goZS5kYXRhKTsgfTsgcmVjb3JkZXIub25zdG9wID0gKCk9PnsgYmF0Y2hBdWRpb0Jsb2IgPSBuZXcgQmxvYihjaHVua3MsIHsgdHlwZTogY2h1bmtzWzBdPy50eXBlIHx8ICdhdWRpby93ZWJtJyB9KTsgYmF0Y2hBdWRpb0V4dCA9IChiYXRjaEF1ZGlvQmxvYi50eXBlLmluY2x1ZGVzKCdvZ2cnKSA/ICdvZ2cnIDogJ3dlYm0nKTsgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChiYXRjaEF1ZGlvQmxvYik7IGJhdGNoQXVkaW9FbC5zcmMgPSB1cmw7IGJhdGNoQXVkaW9FbC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTsgYmF0Y2hBdWRpb0VsLmRhdGFzZXQuZHVyYXRpb24gPSAoKERhdGUubm93KCktc3RhcnQpLzEwMDApLnRvRml4ZWQoMSk7IH07IHJlY29yZGVyLnN0YXJ0KCk7IH1jYXRjaChlKXsgYWxlcnQoJ01pYyBub3QgYXZhaWxhYmxlIG9yIHBlcm1pc3Npb24gZGVuaWVkLicpOyByZWNCYXRjaEJ0bi5kaXNhYmxlZCA9IGZhbHNlOyBzdG9wQmF0Y2hCdG4uZGlzYWJsZWQgPSB0cnVlOyB9IH0pOwpzdG9wQmF0Y2hCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7IHRyeXsgaWYocmVjb3JkZXIgJiYgcmVjb3JkZXIuc3RhdGUhPT0naW5hY3RpdmUnKSByZWNvcmRlci5zdG9wKCk7IH1jYXRjaChlKXt9IHJlY0JhdGNoQnRuLmRpc2FibGVkID0gZmFsc2U7IHN0b3BCYXRjaEJ0bi5kaXNhYmxlZCA9IHRydWU7IH0pOwovLyBTb2xhciBtYXRoCmZ1bmN0aW9uIHNvbGFyUG9zKGRhdGUsIGxhdCwgbG9uKXsKICBjb25zdCBkMnIgPSBNYXRoLlBJLzE4MCwgcjJkID0gMTgwL01hdGguUEk7CiAgY29uc3QgdCA9IChkYXRlIC0gbmV3IERhdGUoRGF0ZS5VVEMoZGF0ZS5nZXRVVENGdWxsWWVhcigpLDAsMSwwLDAsMCwwKSkpIC8gODY0MDAwMDAgKyAxOwogIGNvbnN0IGdhbW1hID0gMipNYXRoLlBJLzM2NSoodC0xICsgKChkYXRlLmdldFVUQ0hvdXJzKCktMTIpLzI0KSk7CiAgY29uc3QgZGVjbCA9IDAuMDA2OTE4IC0gMC4zOTk5MTIqTWF0aC5jb3MoZ2FtbWEpICsgMC4wNzAyNTcqTWF0aC5zaW4oZ2FtbWEpIC0gMC4wMDY3NTgqTWF0aC5jb3MoMipnYW1tYSkgKyAwLjAwMDkwNypNYXRoLnNpbigyKmdhbW1hKSAtIDAuMDAyNjk3Kk1hdGguY29zKDMqZ2FtbWEpICsgMC4wMDE0OCpNYXRoLnNpbigzKmdhbW1hKTsKICBjb25zdCBlcXQgPSAyMjkuMTgqKDAuMDAwMDc1ICsgMC4wMDE4NjgqTWF0aC5jb3MoZ2FtbWEpIC0gMC4wMzIwNzcqTWF0aC5zaW4oZ2FtbWEpIC0gMC4wMTQ2MTUqTWF0aC5jb3MoMipnYW1tYSkgLSAwLjA0MDg0OSpNYXRoLnNpbigyKmdhbW1hKSk7CiAgY29uc3Qgb2Zmc2V0ID0gZGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpOyBjb25zdCB0c3QgPSBkYXRlLmdldFVUQ0hvdXJzKCkqNjAgKyBkYXRlLmdldFVUQ01pbnV0ZXMoKSArIGVxdCArIDQqbG9uICsgb2Zmc2V0OwogIGNvbnN0IGhhID0gKHRzdC80IC0gMTgwKSAqIGQycjsgY29uc3QgbGF0ciA9IDQ2LjAyMDEqZDJyOwogIGNvbnN0IGVsZXYgPSBNYXRoLmFzaW4oTWF0aC5zaW4obGF0cikqTWF0aC5zaW4oZGVjbCkgKyBNYXRoLmNvcyhsYXRyKSpNYXRoLmNvcyhkZWNsKSpNYXRoLmNvcyhoYSkpOwogIGNvbnN0IGF6ID0gTWF0aC5hdGFuMigtTWF0aC5zaW4oaGEpLCBNYXRoLnRhbihkZWNsKSpNYXRoLmNvcyhsYXRyKSAtIE1hdGguc2luKGxhdHIpKk1hdGguY29zKGhhKSk7CiAgcmV0dXJuIHsgZWxldjogZWxldipyMmQsIGF6OiAoYXoqcjJkKzM2MCklMzYwIH07Cn0KZnVuY3Rpb24gaW5jaWRlbmNlQW5nbGUoZWxldkRlZywgc3VuQXpEZWcsIHRpbHREZWcsIHBhbmVsQXpEZWcpewogIGNvbnN0IGVsID0gdG9SYWQoZWxldkRlZyksIHNhID0gdG9SYWQoc3VuQXpEZWcpLCB0aT10b1JhZCh0aWx0RGVnKSwgcGE9dG9SYWQocGFuZWxBekRlZyk7CiAgY29uc3QgY29zVCA9IE1hdGguc2luKGVsKSpNYXRoLmNvcyh0aSkgKyBNYXRoLmNvcyhlbCkqTWF0aC5zaW4odGkpKk1hdGguY29zKHNhIC0gcGEpOwogIHJldHVybiBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCBjb3NUKSk7Cn0KZnVuY3Rpb24gdGVtcERlcmF0ZSh0YWlyQyl7IGNvbnN0IGNlbGwgPSB0YWlyQyArIDIwOyByZXR1cm4gMSAtIDAuMDA0Kk1hdGgubWF4KDAsIGNlbGwgLSAyNSk7IH0KZnVuY3Rpb24gY2xvdWRGYWN0b3IoY2xvdWRGcmFjKXsgcmV0dXJuIDEgLSAwLjc1Kk1hdGgucG93KGNsb3VkRnJhYywgMyk7IH0KZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VzdGltYXRlUFYnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICBjb25zdCBwdlcgPSBwYXJzZUZsb2F0KCQoJyNwdlcnKS52YWx1ZXx8JzcwMCcpOyBjb25zdCB0aWx0ID0gcGFyc2VGbG9hdCgkKCcjdGlsdCcpLnZhbHVlfHwnMjUnKTsgY29uc3QgYXptID0gcGFyc2VGbG9hdCgkKCcjYXptJykudmFsdWV8fCcxODAnKTsKICBjb25zdCBzaGFkZSA9IChwYXJzZUZsb2F0KCQoJyNzaGFkZScpLnZhbHVlfHwnMCcpLzEwMCk7IGNvbnN0IGNsb3VkID0gKHBhcnNlRmxvYXQoJCgnI2Nsb3VkJykudmFsdWV8fCcwJykvMTAwKTsgY29uc3QgdGFpciA9IHBhcnNlRmxvYXQoJCgnI3RhaXInKS52YWx1ZXx8JzIwJyk7CiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsgY29uc3Qgc3VuID0gc29sYXJQb3Mobm93KTsKICBjb25zdCBwb2EgPSBpbmNpZGVuY2VBbmdsZShzdW4uZWxldiwgc3VuLmF6LCB0aWx0LCBhem0pOyBjb25zdCBkZXJhdGUgPSB0ZW1wRGVyYXRlKHRhaXIpICogKDEgLSBzaGFkZSkgKiBjbG91ZEZhY3RvcihjbG91ZCk7IGNvbnN0IHByZWQgPSBNYXRoLm1heCgwLCBwdlcgKiBwb2EgKiBkZXJhdGUpOwogICQoJyNwdlN0YXR1cycpLnRleHRDb250ZW50ID0gYFN1biBlbGV2ICR7c3VuLmVsZXYudG9GaXhlZCgxKX3CsCwgYXogJHtzdW4uYXoudG9GaXhlZCgwKX3CsC4gUE9BPSR7cG9hLnRvRml4ZWQoMil9LCBkZXJhdGU9JHtkZXJhdGUudG9GaXhlZCgyKX0g4oaSIFByZWQgJHtwcmVkLnRvRml4ZWQoMCl9IFdgOwp9KTsKZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY29yZFBWJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgY29uc3QgcHZXID0gcGFyc2VGbG9hdCgkKCcjcHZXJykudmFsdWV8fCc3MDAnKTsgY29uc3QgdGlsdCA9IHBhcnNlRmxvYXQoJCgnI3RpbHQnKS52YWx1ZXx8JzI1Jyk7IGNvbnN0IGF6bSA9IHBhcnNlRmxvYXQoJCgnI2F6bScpLnZhbHVlfHwnMTgwJyk7CiAgY29uc3Qgc2hhZGUgPSAocGFyc2VGbG9hdCgkKCcjc2hhZGUnKS52YWx1ZXx8JzAnKS8xMDApOyBjb25zdCBjbG91ZCA9IChwYXJzZUZsb2F0KCQoJyNjbG91ZCcpLnZhbHVlfHwnMCcpLzEwMCk7IGNvbnN0IHRhaXIgPSBwYXJzZUZsb2F0KCQoJyN0YWlyJykudmFsdWV8fCcyMCcpOwogIGNvbnN0IG91cGVzVyA9IHBhcnNlRmxvYXQoJCgnI291cGVzVycpLnZhbHVlfHwnTmFOJyk7IGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7IGNvbnN0IHN1biA9IHNvbGFyUG9zKG5vdyk7IGNvbnN0IHBvYSA9IGluY2lkZW5jZUFuZ2xlKHN1bi5lbGV2LCBzdW4uYXosIHRpbHQsIGF6bSk7IGNvbnN0IGRlcmF0ZSA9IHRlbXBEZXJhdGUodGFpcikgKiAoMSAtIHNoYWRlKSAqIGNsb3VkRmFjdG9yKGNsb3VkKTsgY29uc3QgcHJlZCA9IE1hdGgubWF4KDAsIHB2VyAqIHBvYSAqIGRlcmF0ZSk7CiAgY29uc3QgcmVjID0geyB0X2lzbzogbm93LnRvSVNPU3RyaW5nKCksIHB2VywgdGlsdCwgYXptLCBzaGFkZV9wY3Q6IHNoYWRlKjEwMCwgY2xvdWRfcGN0OiBjbG91ZCoxMDAsIHRhaXJfQzogdGFpciwgc3VuOiB7IGVsZXZfZGVnOiBzdW4uZWxldiwgYXpfZGVnOiBzdW4uYXogfSwgcG9hLCBkZXJhdGUsIHByZWRfVzogcHJlZCwgb3VwZXNfVzogaXNGaW5pdGUob3VwZXNXKT8gb3VwZXNXIDogbnVsbCB9OwogIGNvbnN0IGFyciA9IGxvYWRTb2xhcigpOyBhcnIucHVzaChyZWMpOyBzYXZlU29sYXIoYXJyKTsgJCgnI3B2U3RhdHVzJykudGV4dENvbnRlbnQgPSBgU2F2ZWQ6IHByZWQgJHtwcmVkLnRvRml4ZWQoMCl9IFdgICsgKGlzRmluaXRlKG91cGVzVyk/IGAsIG1lYXN1cmVkICR7b3VwZXNXLnRvRml4ZWQoMCl9IFdgIDogJycpOwp9KTsKZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cG9ydFBWJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7IGNvbnN0IGFyciA9IGxvYWRTb2xhcigpOyBjb25zdCBibG9iID0gbmV3IEJsb2IoW0pTT04uc3RyaW5naWZ5KHsgbW9kdWxlOiAiRUgxMDAzMDA2IFNvbGFyIERhdGFzZXQiLCB2ZXJzaW9uOiAiMS4wIiwgcGFyY2VsOiAiRUgxMDAzMDA2Iiwgc2FtcGxlczogYXJyIH0sIG51bGwsIDIpXSwge3R5cGU6J2FwcGxpY2F0aW9uL2pzb24nfSk7IGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7IGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7IGEuaHJlZiA9IHVybDsgYS5kb3dubG9hZCA9ICJlaDEwMDMwMDZfc29sYXJfZGF0YXNldF92MV8wLmpzb24iOyBhLmNsaWNrKCk7IFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTsgfSk7CmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbGVhclBWJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7IGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFNPTEFSX0tFWSk7ICQoJyNwdlN0YXR1cycpLnRleHRDb250ZW50ID0gIlNvbGFyIGRhdGFzZXQgY2xlYXJlZC4iOyB9KTsKLy8gTWFuaWZlc3QgJiBleHBvcnQKZnVuY3Rpb24gcm9sZXNGcm9tUXVpY2soKXsgcmV0dXJuIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI3F1aWNrVGFncyAudGFnLm9uJykpLm1hcCh4PT54LnRleHRDb250ZW50LnRyaW0oKSk7IH0KZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI3F1aWNrVGFncyAudGFnJykuZm9yRWFjaChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT4gZWwuY2xhc3NMaXN0LnRvZ2dsZSgnb24nKSkpOwpmdW5jdGlvbiBjb2xsZWN0TWFuaWZlc3QoZW1iZWRJbWFnZXM9ZmFsc2UpewogIGNvbnN0IGNoZWNrcyA9IFtdOyBjb25zdCBjaGsgPSBbJ2Vyb3Npb25fcHJlc2VudCcsJ3N0YW5kaW5nX3dhdGVyJywnaW52YXNpdmVzX2RlbnNlJywnd2lsZGxpZmVfc2lnbicsJ2FjY2Vzc19ibG9ja2VkJ107IC8vIChrZXB0IHNpbXBsZSkKICBjb25zdCBtZiA9IHsgbW9kdWxlOiAiRUgxMDAzMDA2IEZpZWxkIEludGFrZSIsIHZlcnNpb246ICIxLjMuMyIsIHBhcmNlbDogIkVIMTAwMzAwNiIsIGRlZmF1bHRfbG9jYXRpb246IHsgbGF0OiA0Ni4wMjAxLCBsb246IC0xMjIuNTQ4OCB9LAogICAgZGVmYXVsdHM6IHsgc3ViamVjdF9kaXN0YW5jZV9tOiBwYXJzZUZsb2F0KCQoIiNkZWZhdWx0RGlzdCIpLnZhbHVlIHx8ICcwJykgfHwgMCwgaGVhZGluZ19kZWc6IChoID0+IGlzRmluaXRlKGgpID8gaCA6IG51bGwpKHBhcnNlRmxvYXQoJCgiI2RlZmF1bHRIZWFkaW5nIikudmFsdWUpKSB9LAogICAgYXNzZXRzOiBBcnJheS5mcm9tKCQoJyNhc3NldHMnKS5zZWxlY3RlZE9wdGlvbnMpLm1hcChvPT5vLnZhbHVlKSwgdGl0bGU6ICQoIiNiYXRjaFRpdGxlIikudmFsdWUgfHwgbnVsbCwgdGFnczogcm9sZXNGcm9tUXVpY2soKSwgYmF0Y2hfY29uZGl0aW9uczogY2hlY2tzLAogICAgbm90ZXM6ICQoIiNiYXRjaE5vdGVzIikudmFsdWUgfHwgbnVsbCwgYmF0Y2hfdm9pY2U6IGJhdGNoQXVkaW9CbG9iID8geyBmaWxlbmFtZTogImJhdGNoX3ZvaWNlLndlYm0iLCBkdXJhdGlvbl9zOiBOdW1iZXIoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhdGNoQXVkaW8nKS5kYXRhc2V0LmR1cmF0aW9ufHwwKSB9IDogbnVsbCwKICAgIGNyZWF0ZWRfdXRjOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksCiAgICBzb2xhcl9tb2RlbDogKGZ1bmN0aW9uKCl7IGNvbnN0IHB2VyA9IHBhcnNlRmxvYXQoJCgnI3B2VycpLnZhbHVlfHwnNzAwJyk7IGNvbnN0IHRpbHQgPSBwYXJzZUZsb2F0KCQoJyN0aWx0JykudmFsdWV8fCcyNScpOyBjb25zdCBhem0gPSBwYXJzZUZsb2F0KCQoJyNhem0nKS52YWx1ZXx8JzE4MCcpOyBjb25zdCBzaGFkZSA9IChwYXJzZUZsb2F0KCQoJyNzaGFkZScpLnZhbHVlfHwnMCcpLzEwMCk7IGNvbnN0IGNsb3VkID0gKHBhcnNlRmxvYXQoJCgnI2Nsb3VkJykudmFsdWV8fCcwJykvMTAwKTsgY29uc3QgdGFpciA9IHBhcnNlRmxvYXQoJCgnI3RhaXInKS52YWx1ZXx8JzIwJyk7IHJldHVybiB7IHB2VywgdGlsdCwgYXptLCBzaGFkZV9wY3Q6IHNoYWRlKjEwMCwgY2xvdWRfcGN0OiBjbG91ZCoxMDAsIHRhaXJfQzogdGFpciB9OyB9KSgpLAogICAgc29sYXJfc2Vzc2lvbjogd2luZG93Ll9zb2xhclNlc3Npb24gfHwgbnVsbCwKICAgIGl0ZW1zOiBiYXRjaC5tYXAoaXQgPT4gKHsgaWQ6IGl0LmlkLCBmaWxlbmFtZTogaXQubmFtZSwgdGltZXN0YW1wX3V0YzogbmV3IERhdGUoaXQudHMpLnRvSVNPU3RyaW5nKCksIGNhbWVyYV9ncHM6IGl0LmNhbWVyYV9ncHMgfHwgbnVsbCwgc3ViamVjdF9ncHM6IGl0LnN1YmplY3RfZ3BzIHx8IG51bGwsIGhlYWRpbmdfZGVnOiAoaXQuaGVhZGluZyE9bnVsbD9pdC5oZWFkaW5nOm51bGwpLCBzdWJqZWN0X2Rpc3RhbmNlX206IChpc0Zpbml0ZShpdC5kaXN0X20pP2l0LmRpc3RfbTpudWxsKSwgdGFnczogaXQudGFncywgcm9sZXM6IHJvbGVzRnJvbVRhZ3MoaXQudGFncyksIHNuYXBfaGludDogaXQuc25hcF9oaW50IHx8ICdub25lJywgY29uZGl0aW9uczogaXQuY29uZGl0aW9ucywgbm90ZXM6IGl0Lm5vdGVzIHx8IG51bGwsIHZvaWNlOiBpdC52b2ljZSA/IHsgZmlsZW5hbWU6IGB2b2ljZV8ke2l0LmlkfS4ke2l0LnZvaWNlLmV4dH1gLCBkdXJhdGlvbl9zOiBNYXRoLnJvdW5kKGl0LnZvaWNlLmR1cmF0aW9ufHwwKSB9IDogbnVsbCwgaW1hZ2VfZGF0YV91cmw6IGVtYmVkSW1hZ2VzID8gaXQucHJldmlldyA6IHVuZGVmaW5lZCB9KSkgfTsKICByZXR1cm4gbWY7Cn0KJCgiI2NvcHlGb3JDaGF0IikuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7IGNvbnN0IG0gPSBjb2xsZWN0TWFuaWZlc3QodHJ1ZSk7IGNvbnN0IHRleHQgPSAiRUgxMDAzMDA2IFBob3RvIEJhdGNoIE1hbmlmZXN0ICh2MS4zLjcpXG4iICsgSlNPTi5zdHJpbmdpZnkobSwgbnVsbCwgMik7IHRyeXsgYXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodGV4dCk7ICQoIiNidWlsZEluZm8iKS50ZXh0Q29udGVudCA9ICJDb3BpZWQgbWFuaWZlc3QgKHdpdGggcHJldmlld3MpIHRvIGNsaXBib2FyZC4iOyB9IGNhdGNoKGUpeyAkKCIjYnVpbGRJbmZvIikudGV4dENvbnRlbnQgPSAiQ2xpcGJvYXJkIGJsb2NrZWQuIFVzZSBEb3dubG9hZCBtYW5pZmVzdC5qc29uLiI7IH0gfSk7CiQoIiNkb3dubG9hZE1hbmlmZXN0IikuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7IGNvbnN0IG0gPSBjb2xsZWN0TWFuaWZlc3QodHJ1ZSk7IGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbSlNPTi5zdHJpbmdpZnkobSwgbnVsbCwgMildLCB7dHlwZTonYXBwbGljYXRpb24vanNvbid9KTsgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsgYS5ocmVmID0gdXJsOyBhLmRvd25sb2FkID0gImVoMTAwMzAwNl9waG90b19tYW5pZmVzdF92MV8zXzcuanNvbiI7IGEuY2xpY2soKTsgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpOyB9KTsKJCgiI2J1aWxkVGVzdCIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4geyBjb25zdCBtID0gY29sbGVjdE1hbmlmZXN0KGZhbHNlKTsgbS5pdGVtcy5mb3JFYWNoKGl0ID0+IHsgZGVsZXRlIGl0LmltYWdlX2RhdGFfdXJsOyB9KTsgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtKU09OLnN0cmluZ2lmeShtLCBudWxsLCAyKV0sIHt0eXBlOidhcHBsaWNhdGlvbi9qc29uJ30pOyBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOyBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOyBhLmhyZWYgPSB1cmw7IGEuZG93bmxvYWQgPSAiZWgxMDAzMDA2X3Rlc3RfbWFuaWZlc3RfdjFfM183Lmpzb24iOyBhLmNsaWNrKCk7IFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTsgfSk7CmZ1bmN0aW9uIHN1bW1hcml6ZUZvclZhbGlkYXRpb24obWFuaWZlc3QpewogIGNvbnN0IGl0ZW1zID0gbWFuaWZlc3QuaXRlbXMgfHwgW107IGNvbnN0IGdwc09rID0gaXRlbXMuZmlsdGVyKGl0ID0+IGl0LmNhbWVyYV9ncHMgJiYgaXNGaW5pdGUoaXQuY2FtZXJhX2dwcy5sYXQpICYmIGlzRmluaXRlKGl0LmNhbWVyYV9ncHMubG9uKSkubGVuZ3RoOyBjb25zdCB3aXRoU3ViamVjdCA9IGl0ZW1zLmZpbHRlcihpdCA9PiBpdC5zdWJqZWN0X2dwcykubGVuZ3RoOyBjb25zdCB3aXRoVm9pY2UgPSBpdGVtcy5maWx0ZXIoaXQgPT4gaXQudm9pY2UpLmxlbmd0aDsgY29uc3QgdGFncyA9IHt9OyBpdGVtcy5mb3JFYWNoKGl0PT4gKGl0LnRhZ3N8fFtdKS5mb3JFYWNoKHQ9PiB0YWdzW3RdPSh0YWdzW3RdfHwwKSsxICkpOyBjb25zdCByb2xlcyA9IHt9OyBpdGVtcy5mb3JFYWNoKGl0PT4gKGl0LnJvbGVzfHxbXSkuZm9yRWFjaChyPT4gcm9sZXNbcl09KHJvbGVzW3JdfHwwKSsxICkpOyBjb25zdCB0aHVtYnMgPSBpdGVtcy5zbGljZSgwLDEyKS5tYXAoaXQgPT4gKHsgaWQ6IGl0LmlkLCBuYW1lOiBpdC5maWxlbmFtZSwgcHJldmlldzogaXQuaW1hZ2VfZGF0YV91cmwgfHwgaXQucHJldmlldyB8fCBudWxsLCB0YWdzOiBpdC50YWdzfHxbXSwgZ3BzOiBpdC5jYW1lcmFfZ3BzfHxudWxsIH0pKTsgbGV0IHNhbXBsZXMgPSBbXTsgdHJ5IHsgc2FtcGxlcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ0VIMTAwMzAwNjpzb2xhcl9zYW1wbGVzJyl8fCdbXScpOyB9IGNhdGNoIHt9IGNvbnN0IG4gPSBzYW1wbGVzLmxlbmd0aDsgY29uc3QgbGFzdCA9IG4/IHNhbXBsZXNbbi0xXSA6IG51bGw7IHJldHVybiB7IG1vZHVsZTogIkVIMTAwMzAwNiBWYWxpZGF0aW9uIFBhY2siLCB2ZXJzaW9uOiAiMS4wIiwgcGFyY2VsOiAiRUgxMDAzMDA2IiwgY3JlYXRlZF91dGM6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwgbWFuaWZlc3RfdmVyc2lvbjogbWFuaWZlc3QudmVyc2lvbiwgY291bnRzOiB7IGl0ZW1zOiBpdGVtcy5sZW5ndGgsIGdwc19vazogZ3BzT2ssIHN1YmplY3Rfb2s6IHdpdGhTdWJqZWN0LCB2b2ljZTogd2l0aFZvaWNlIH0sIHRhZ19oaXN0OiB0YWdzLCByb2xlX2hpc3Q6IHJvbGVzLCBzb2xhcl9zdW1tYXJ5OiB7IGNvdW50Om4sIGxhc3QgfSwgc2FtcGxlX3RodW1iczogdGh1bWJzIH07IH0KJCgiI2J1aWxkVmFsaWRhdGlvbiIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4geyBjb25zdCBtID0gY29sbGVjdE1hbmlmZXN0KHRydWUpOyBjb25zdCB2ID0gc3VtbWFyaXplRm9yVmFsaWRhdGlvbihtKTsgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtKU09OLnN0cmluZ2lmeSh2LCBudWxsLCAyKV0sIHt0eXBlOidhcHBsaWNhdGlvbi9qc29uJ30pOyBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOyBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOyBhLmhyZWYgPSB1cmw7IGEuZG93bmxvYWQgPSAiZWgxMDAzMDA2X3ZhbGlkYXRpb25fcGFja192MV8zXzcuanNvbiI7IGEuY2xpY2soKTsgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpOyB9KTsKbGV0IEpTWmlwTG9hZGVkID0gZmFsc2U7CmFzeW5jIGZ1bmN0aW9uIGVuc3VyZUpTWmlwKCl7IGlmKEpTWmlwTG9hZGVkKSByZXR1cm4gdHJ1ZTsgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKT0+eyBjb25zdCBzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7IHMuc3JjID0gImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vanN6aXBAMy4xMC4xL2Rpc3QvanN6aXAubWluLmpzIjsgcy5vbmxvYWQgPSAoKT0+eyBKU1ppcExvYWRlZCA9IHRydWU7IHJlc29sdmUodHJ1ZSk7IH07IHMub25lcnJvciA9ICgpPT4gcmVzb2x2ZShmYWxzZSk7IGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocyk7IH0pOyB9CiQoIiNidWlsZFppcCIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4geyAkKCIjYnVpbGRJbmZvIikudGV4dENvbnRlbnQgPSAiUHJlcGFyaW5nIFpJUOKApiI7IGNvbnN0IG9rID0gYXdhaXQgZW5zdXJlSlNaaXAoKTsgaWYoIW9rKXsgJCgiI2J1aWxkSW5mbyIpLnRleHRDb250ZW50ID0gIlpJUCBsaWJyYXJ5IGZhaWxlZCAob2ZmbGluZSkuIFVzZSBtYW5pZmVzdC90ZXN0L3ZhbGlkYXRpb24uIjsgcmV0dXJuOyB9IGNvbnN0IHppcCA9IG5ldyBKU1ppcCgpOyBjb25zdCBtID0gY29sbGVjdE1hbmlmZXN0KGZhbHNlKTsgemlwLmZpbGUoIm1hbmlmZXN0Lmpzb24iLCBKU09OLnN0cmluZ2lmeShtLCBudWxsLCAyKSk7IGNvbnN0IGZvbGRlciA9IHppcC5mb2xkZXIoImltYWdlcyIpOyBmb3IoY29uc3QgaXQgb2YgYmF0Y2gpeyBjb25zdCBibG9iID0gYXdhaXQgZmlsZVRvUmVzaXplZEJsb2IoaXQuZmlsZSwgMTYwMCk7IGNvbnN0IGFycmJ1ZiA9IGF3YWl0IGJsb2IuYXJyYXlCdWZmZXIoKTsgZm9sZGVyLmZpbGUoaXQubmFtZS5yZXBsYWNlKC9ccysvZywnXycpLnJlcGxhY2UoL1teQS1aYS16MC05Ll8tXS9nLCcnKSwgYXJyYnVmKTsgfSBjb25zdCBhZm9sZGVyID0gemlwLmZvbGRlcigiYXVkaW8iKTsgaWYoYmF0Y2hBdWRpb0Jsb2IpeyBjb25zdCBhcnIgPSBhd2FpdCBiYXRjaEF1ZGlvQmxvYi5hcnJheUJ1ZmZlcigpOyBhZm9sZGVyLmZpbGUoYGJhdGNoX3ZvaWNlLiR7YmF0Y2hBdWRpb0V4dH1gLCBhcnIpOyB9IGZvcihjb25zdCBpdCBvZiBiYXRjaCl7IGlmKGl0LnZvaWNlICYmIGl0LnZvaWNlLmJsb2IpeyBjb25zdCBhcnIgPSBhd2FpdCBpdC52b2ljZS5ibG9iLmFycmF5QnVmZmVyKCk7IGFmb2xkZXIuZmlsZShgdm9pY2VfJHtpdC5pZH0uJHtpdC52b2ljZS5leHR9YCwgYXJyKTsgfSB9IGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB6aXAuZ2VuZXJhdGVBc3luYyh7dHlwZToiYmxvYiJ9KTsgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChjb250ZW50KTsgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsgYS5ocmVmID0gdXJsOyBhLmRvd25sb2FkID0gImVoMTAwMzAwNl9waG90b19iYXRjaF92MV8zXzcuemlwIjsgYS5jbGljaygpOyBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7ICQoIiNidWlsZEluZm8iKS50ZXh0Q29udGVudCA9ICJaSVAgYnVpbHQuIjsgfSk7Ci8vIFBlcnNpc3QgdG8gUGxhbm5lcgpjb25zdCBLRVkgPSAiRUgxMDAzMDA2OmZpZWxkX2ludGFrZV9yZWNvcmRzIjsgZnVuY3Rpb24gbG9hZExvY2FsKCl7IHRyeSB7IHJldHVybiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKEtFWSkgfHwgIltdIik7IH0gY2F0Y2ggeyByZXR1cm4gW107IH0gfSBmdW5jdGlvbiBzYXZlTG9jYWwoYXJyKXsgbG9jYWxTdG9yYWdlLnNldEl0ZW0oS0VZLCBKU09OLnN0cmluZ2lmeShhcnIpKTsgfQpmdW5jdGlvbiBwZXJzaXN0VG9Mb2NhbChyZWNvcmRzKXsgY29uc3QgYXJyID0gbG9hZExvY2FsKCk7IHJlY29yZHMuZm9yRWFjaChpdCA9PiB7IGFyci5wdXNoKHsgdG9vbF92ZXJzaW9uOiAidjFfM183IiwgcGFyY2VsOiAiRUgxMDAzMDA2IiwgbGF0OiBpdC5jYW1lcmFfZ3BzPy5sYXQgPz8gbnVsbCwgbG5nOiBpdC5jYW1lcmFfZ3BzPy5sb24gPz8gbnVsbCwgYWNjdXJhY3lfbTogaXQuY2FtZXJhX2dwcz8uYWNjID8/IG51bGwsIHRpbWVzdGFtcF9tczogaXQudHMsIGNhdGVnb3J5OiAoaXQudGFncy5pbmNsdWRlcygnZ2Vlc2UnKSA/ICdnZWVzZScgOiBpdC50YWdzLmluY2x1ZGVzKCdjaGlja2VucycpID8gJ2NoaWNrZW5zJyA6IGl0LnRhZ3MuaW5jbHVkZXMoJ3NvbGFyLXBhbmVsJykgPyAnc29sYXInIDogaXQudGFnc1swXSB8fCAnaW50YWtlJyksIG5vdGVzOiBpdC5ub3RlcyB8fCAiIiwgcGhvdG9fZGF0YV91cmw6IGl0LnByZXZpZXcgfSk7IH0pOyBzYXZlTG9jYWwoYXJyKTsgfQpjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpPT57IGNvbnN0IHdpdGhHUFMgPSBiYXRjaC5maWx0ZXIoaXQgPT4gaXQuY2FtZXJhX2dwcyAmJiBpc0Zpbml0ZShpdC5jYW1lcmFfZ3BzLmxhdCkgJiYgaXNGaW5pdGUoaXQuY2FtZXJhX2dwcy5sb24pKTsgaWYod2l0aEdQUy5sZW5ndGgpIHBlcnNpc3RUb0xvY2FsKHdpdGhHUFMpOyB9KTsKb2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlzdCcpLCB7IGNoaWxkTGlzdDp0cnVlLCBzdWJ0cmVlOnRydWUgfSk7CndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgc3RhcnRHUFNXYXRjaCk7Ci8vIC0tLS0gU29sYXIgMzYwIENhcHR1cmUgdG9nZ2xlIGJlaGF2aW91ciAtLS0tCmNvbnN0IHNvbGFyVG9nZ2xlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NvbGFyVG9nZ2xlJyk7IGNvbnN0IHNvbGFyR3VpZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc29sYXJHdWlkZScpOyBjb25zdCBzb2xhclN0YXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NvbGFyU3RhdGUnKTsgY29uc3QgcHJvZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzb2xhclByb2dyZXNzJyk7CndpbmRvdy5fc29sYXJTZXNzaW9uID0geyBlbmFibGVkOmZhbHNlLCBzdGVwczp7MTpmYWxzZSwyOmZhbHNlLDM6ZmFsc2UsNDpmYWxzZX0sIHN0YXJ0ZWRfdXRjOm51bGwsIGZpbmlzaGVkX3V0YzpudWxsIH07CmZ1bmN0aW9uIHVwZGF0ZVNvbGFyVUkoKXsgc29sYXJTdGF0ZS50ZXh0Q29udGVudCA9IHNvbGFyVG9nZ2xlLmNsYXNzTGlzdC5jb250YWlucygnb24nKSA/ICdvbicgOiAnb2ZmJzsgcHJvZy50ZXh0Q29udGVudCA9IGBQcm9ncmVzczogJHtPYmplY3QudmFsdWVzKHdpbmRvdy5fc29sYXJTZXNzaW9uLnN0ZXBzKS5maWx0ZXIoQm9vbGVhbikubGVuZ3RofS80YDsgfQpzb2xhclRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57IGNvbnN0IG9uID0gc29sYXJUb2dnbGUuY2xhc3NMaXN0LnRvZ2dsZSgnb24nKTsgY29uc3QgZW5hYmxlZCA9IG9uOyBzb2xhckd1aWRlLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicsICFvbik7IHdpbmRvdy5fc29sYXJTZXNzaW9uLmVuYWJsZWQgPSBlbmFibGVkOyBpZihlbmFibGVkICYmICF3aW5kb3cuX3NvbGFyU2Vzc2lvbi5zdGFydGVkX3V0Yykgd2luZG93Ll9zb2xhclNlc3Npb24uc3RhcnRlZF91dGMgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7IHVwZGF0ZVNvbGFyVUkoKTsgfSk7CnNvbGFyVG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSk9PnsgaWYoZS5rZXk9PT0nICd8fGUua2V5PT09J0VudGVyJyl7IGUucHJldmVudERlZmF1bHQoKTsgc29sYXJUb2dnbGUuY2xpY2soKTsgfX0pOwpkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1zdGVwZG9uZV0nKS5mb3JFYWNoKGJ0biA9PiB7IGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57IGNvbnN0IGsgPSBOdW1iZXIoYnRuLmdldEF0dHJpYnV0ZSgnZGF0YS1zdGVwZG9uZScpKTsgd2luZG93Ll9zb2xhclNlc3Npb24uc3RlcHNba10gPSB0cnVlOyB1cGRhdGVTb2xhclVJKCk7IGlmKE9iamVjdC52YWx1ZXMod2luZG93Ll9zb2xhclNlc3Npb24uc3RlcHMpLmV2ZXJ5KEJvb2xlYW4pKSB3aW5kb3cuX3NvbGFyU2Vzc2lvbi5maW5pc2hlZF91dGMgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7IH0pOyB9KTsKYXN5bmMgZnVuY3Rpb24gaG9va1N0ZXBJbnB1dChpbnBJZCwgdGFncyl7IGNvbnN0IGlucCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlucElkKTsgaW5wLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGFzeW5jIChlKT0+eyBjb25zdCBmaWxlcyA9IEFycmF5LmZyb20oZS50YXJnZXQuZmlsZXN8fFtdKTsgZm9yKGNvbnN0IGYgb2YgZmlsZXMpeyBhd2FpdCBwdXNoRmlsZVdpdGhBdXRvVGFncyhmLCB0YWdzKTsgfSByZWZyZXNoTGlzdCgpOyB9KTsgfQpob29rU3RlcElucHV0KCdzdGVwMUFkZCcsIFsnc2l0ZS1jb250ZXh0Jywnc29sYXItcGFuZWwnXSk7IGhvb2tTdGVwSW5wdXQoJ3N0ZXAyQWRkJywgWydzb2xhci1wYW5lbCddKTsgaG9va1N0ZXBJbnB1dCgnc3RlcDNBZGQnLCBbJ3NpdGUtY29udGV4dCcsJ3NvbGFyLXBhbmVsJ10pOyBob29rU3RlcElucHV0KCdzdGVwNEFkZCcsIFsnc2l0ZS1jb250ZXh0Jywnc29sYXItcGFuZWwnLCd3ZWF0aGVyJ10pOwpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc29sYXJTdW1tYXJpemUnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57IGNvbnN0IHMgPSB3aW5kb3cuX3NvbGFyU2Vzc2lvbjsgY29uc3QgZG9uZSA9IE9iamVjdC52YWx1ZXMocy5zdGVwcykuZmlsdGVyKEJvb2xlYW4pLmxlbmd0aDsgY29uc3Qgbm90ZSA9IGBTb2xhciAzNjAgc2Vzc2lvbiDigJQgc3RlcHMgY29tcGxldGU6ICR7ZG9uZX0vNDsgc3RhcnQgJHtzLnN0YXJ0ZWRfdXRjfHwn4oCUJ307IGZpbmlzaCAke3MuZmluaXNoZWRfdXRjfHwn4oCUJ30uYDsgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmF0Y2hOb3RlcycpOyBlbC52YWx1ZSA9IChlbC52YWx1ZSA/IGVsLnZhbHVlICsgJ1xcbicgOiAnJykgKyBub3RlOyB9KTsKPC9zY3JpcHQ+CjwvYm9keT4KPC9odG1sPgo="    },
      pdr:     { EH1003006: "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CjxtZXRhIGNoYXJzZXQ9InV0Zi04Ii8+CjxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MSwgbWF4aW11bS1zY2FsZT0xIi8+Cjx0aXRsZT5FSDEwMDMwMDYgUERSIE5hdmlnYXRvciDigJQgdjAuMy4yIChiZXRhKTwvdGl0bGU+CjxtZXRhIG5hbWU9ImNvbG9yLXNjaGVtZSIgY29udGVudD0iZGFyayBsaWdodCI+CjxzdHlsZT4KICA6cm9vdHstLWJnOiMwYjEwMjA7LS1pbms6I2UyZThmMDstLW11dGVkOiM5NGEzYjg7LS1jYXJkOiMwZjE3MmE7LS1hY2NlbnQ6IzYwYTVmYTstLWdvb2Q6IzIyYzU1ZTstLXdhcm46I2Y1OWUwYjstLWJhZDojZWY0NDQ0O30KICBib2R5e21hcmdpbjowO2JhY2tncm91bmQ6dmFyKC0tYmcpO2NvbG9yOnZhcigtLWluayk7Zm9udC1mYW1pbHk6c3lzdGVtLXVpLFNlZ29lIFVJLFJvYm90byxIZWx2ZXRpY2EsQXJpYWx9CiAgaGVhZGVye3BhZGRpbmc6MTJweCAxNHB4O2JhY2tncm91bmQ6IzBhMGYxZjtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjMTcyMDNiO3Bvc2l0aW9uOnN0aWNreTt0b3A6MDt6LWluZGV4OjEwfQogIGgxe21hcmdpbjowO2ZvbnQtc2l6ZToxOHB4fQogIC5zdWJ7Y29sb3I6dmFyKC0tbXV0ZWQpO2ZvbnQtc2l6ZToxMnB4O21hcmdpbi10b3A6NHB4fQogIG1haW57cGFkZGluZzoxMnB4IDE0cHg7ZGlzcGxheTpncmlkO2dhcDoxMnB4fQogIC5jYXJke2JhY2tncm91bmQ6dmFyKC0tY2FyZCk7Ym9yZGVyOjFweCBzb2xpZCAjMGIxMjI1O2JvcmRlci1yYWRpdXM6MTJweDtwYWRkaW5nOjEycHh9CiAgLnJvd3tkaXNwbGF5OmZsZXg7Z2FwOjhweDtmbGV4LXdyYXA6d3JhcDthbGlnbi1pdGVtczpjZW50ZXJ9CiAgLmJ0bntiYWNrZ3JvdW5kOiMxZjZmZWI7Y29sb3I6I2ZmZjtib3JkZXI6bm9uZTtib3JkZXItcmFkaXVzOjEwcHg7cGFkZGluZzoxMHB4IDE0cHg7Zm9udC13ZWlnaHQ6NzAwO2N1cnNvcjpwb2ludGVyfQogIC5idG4uc2Vjb25kYXJ5e2JhY2tncm91bmQ6IzMzNDE1NX0KICAuYnRuLmdob3N0e2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7Ym9yZGVyOjFweCBzb2xpZCAjMzM0MTU1O2NvbG9yOiNlNWU3ZWJ9CiAgLmJ0bi5nb29ke2JhY2tncm91bmQ6IzE1ODAzZH0KICAuYnRuLndhcm57YmFja2dyb3VuZDojYjkxYzFjfQogIC5waWxse2JhY2tncm91bmQ6IzBiMTMyNjtib3JkZXI6MXB4IHNvbGlkICMxZTI5M2I7Ym9yZGVyLXJhZGl1czo5OTlweDtwYWRkaW5nOjRweCAxMHB4O2ZvbnQtc2l6ZToxMnB4fQogIC5waWxsLm9re2JvcmRlci1jb2xvcjojMGY1MTMyO2NvbG9yOiNiYmY3ZDA7YmFja2dyb3VuZDojMGIxZjE0fQogIC5waWxsLmluZm97Ym9yZGVyLWNvbG9yOiMxZTQwYWY7Y29sb3I6I2JmZGJmZTtiYWNrZ3JvdW5kOiMwYjEzMjZ9CiAgLnBpbGwuYmFke2JvcmRlci1jb2xvcjojN2YxZDFkO2NvbG9yOiNmZWNhY2E7YmFja2dyb3VuZDojMmEwZjEyfQogIC5zbWFsbHtmb250LXNpemU6MTJweDtjb2xvcjp2YXIoLS1tdXRlZCl9CiAgLmlucHV0LCBzZWxlY3R7YmFja2dyb3VuZDojMGIxMzI2O2NvbG9yOiNlMmU4ZjA7Ym9yZGVyOjFweCBzb2xpZCAjMWUyOTNiO2JvcmRlci1yYWRpdXM6OHB4O3BhZGRpbmc6MTBweH0KICAubWV0ZXJ7Zm9udC12YXJpYW50LW51bWVyaWM6dGFidWxhci1udW1zfQogIGNhbnZhc3t3aWR0aDoxMDAlO2hlaWdodDozNDBweDtiYWNrZ3JvdW5kOiMwYjEzMjY7Ym9yZGVyOjFweCBzb2xpZCAjMWUyOTNiO2JvcmRlci1yYWRpdXM6MTJweH0KICAua3Z7ZGlzcGxheTpncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczptYXgtY29udGVudCAxZnI7IGdhcDo2cHggMTJweDsgZm9udC1zaXplOjEycHh9CiAgLmt2IGRpdntwYWRkaW5nOjJweCAwfQogIC5yYW5nZXtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo4cHh9CiAgaW5wdXRbdHlwZT1yYW5nZV17d2lkdGg6MjAwcHh9Cjwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+CjxoZWFkZXI+CiAgPGgxPkVIMTAwMzAwNiBQRFIgTmF2aWdhdG9yIDxzcGFuIGNsYXNzPSJwaWxsIj52MC4zLjIgYmV0YTwvc3Bhbj48L2gxPgogIDxkaXYgY2xhc3M9InN1YiI+QW5kcm9pZC9QaXhlbC1mcmllbmRseSBQRFIuIExpdmUgZ+KAkW1ldGVyLCBhZGp1c3RhYmxlIHN0ZXAgdGhyZXNob2xkLCB0YXDigJF0b+KAkXN0ZXAgdGVzdCwgYW5kIGJhc2VsaW5lIGNhbGlicmF0aW9uLjwvZGl2Pgo8L2hlYWRlcj4KPG1haW4+CiAgPGRpdiBjbGFzcz0iY2FyZCI+CiAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICA8ZGl2PjxiPkFuY2hvcjwvYj4gPHNwYW4gaWQ9ImFuY2hvclBpbGwiIGNsYXNzPSJwaWxsIGluZm8iPm5vdCBzZXQ8L3NwYW4+PC9kaXY+CiAgICAgIDxidXR0b24gaWQ9InVzZVN0YXJsaW5rIiBjbGFzcz0iYnRuIj5Vc2UgU3RhcmxpbmsgYW5jaG9yPC9idXR0b24+CiAgICAgIDxidXR0b24gaWQ9ImdldEdQUyIgY2xhc3M9ImJ0biBzZWNvbmRhcnkiPlVzZSBkZXZpY2UgR1BTPC9idXR0b24+CiAgICAgIDxidXR0b24gaWQ9InBlcm0iIGNsYXNzPSJidG4gZ2hvc3QiPkVuYWJsZSBzZW5zb3JzPC9idXR0b24+CiAgICA8L2Rpdj4KICAgIDxkaXYgY2xhc3M9InNtYWxsIj5PcGVuIHZpYSA8Yj5IVFRQUzwvYj4gb3IgPGI+aHR0cDovL2xvY2FsaG9zdDwvYj4uIENocm9tZSDihpIgU2l0ZSBzZXR0aW5ncyDihpIgTW90aW9uIHNlbnNvcnMg4oaSIDxiPkFsbG93ZWQ8L2I+LiBBdm9pZCBtZXRhbCByb29mcy92ZWhpY2xlcyBmb3IgaGVhZGluZyBsb2NrLjwvZGl2PgogICAgPGRpdiBjbGFzcz0icm93IiBzdHlsZT0ibWFyZ2luLXRvcDo2cHgiPgogICAgICA8bGFiZWw+U3RlcCBsZW5ndGggKG0pIDxpbnB1dCBpZD0ic3RlcExlbiIgdHlwZT0ibnVtYmVyIiBjbGFzcz0iaW5wdXQiIHZhbHVlPSIwLjc1IiBzdGVwPSIwLjAxIiBzdHlsZT0id2lkdGg6MTEwcHgiLz48L2xhYmVsPgogICAgICA8bGFiZWw+TWFnIGRlY2xpbmF0aW9uICjCsEUgKyAvIMKwVyDiiJIpIDxpbnB1dCBpZD0iZGVjbCIgdHlwZT0ibnVtYmVyIiBjbGFzcz0iaW5wdXQiIHZhbHVlPSIxNSIgc3RlcD0iMC41IiBzdHlsZT0id2lkdGg6MTEwcHgiLz48L2xhYmVsPgogICAgICA8bGFiZWw+QXV0byBHUFMgc25hcCAobSkgPGlucHV0IGlkPSJncHNTbmFwIiB0eXBlPSJudW1iZXIiIGNsYXNzPSJpbnB1dCIgdmFsdWU9IjgiIHN0ZXA9IjEiIHN0eWxlPSJ3aWR0aDo5MHB4Ii8+PC9sYWJlbD4KICAgICAgPGxhYmVsPkhlYWRpbmcgc21vb3RoaW5nICgw4oCTMSkgPGlucHV0IGlkPSJoZWFkU21vb3RoIiB0eXBlPSJudW1iZXIiIGNsYXNzPSJpbnB1dCIgdmFsdWU9IjAuODUiIHN0ZXA9IjAuMDUiIHN0eWxlPSJ3aWR0aDoxMTBweCIvPjwvbGFiZWw+CiAgICA8L2Rpdj4KICA8L2Rpdj4KCiAgPGRpdiBjbGFzcz0iY2FyZCI+CiAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICA8YnV0dG9uIGlkPSJzdGFydCIgY2xhc3M9ImJ0biBnb29kIj5TdGFydCBQRFI8L2J1dHRvbj4KICAgICAgPGJ1dHRvbiBpZD0icGF1c2UiIGNsYXNzPSJidG4gd2FybiI+UGF1c2U8L2J1dHRvbj4KICAgICAgPGJ1dHRvbiBpZD0icmVzZXQiIGNsYXNzPSJidG4gZ2hvc3QiPlJlc2V0PC9idXR0b24+CiAgICAgIDxidXR0b24gaWQ9InNuYXBOb3ciIGNsYXNzPSJidG4gc2Vjb25kYXJ5Ij5TbmFwIHRvIEdQUyBub3c8L2J1dHRvbj4KICAgICAgPHNwYW4gaWQ9InN0YXQiIGNsYXNzPSJzbWFsbCBtZXRlciIgc3R5bGU9Im1hcmdpbi1sZWZ0OmF1dG8iPmlkbGU8L3NwYW4+CiAgICA8L2Rpdj4KICAgIDxkaXYgY2xhc3M9InJvdyBzbWFsbCBtZXRlciI+CiAgICAgIDxkaXY+SGVhZGluZzogPHNwYW4gaWQ9ImhlYWRpbmciPuKAlDwvc3Bhbj7CsDwvZGl2PgogICAgICA8ZGl2Pk1hZzogPHNwYW4gaWQ9Im1hZyI+4oCUPC9zcGFuPsKwPC9kaXY+CiAgICAgIDxkaXY+U3RlcHM6IDxzcGFuIGlkPSJzdGVwcyI+MDwvc3Bhbj48L2Rpdj4KICAgICAgPGRpdj5TcGVlZDogPHNwYW4gaWQ9InNwZCI+4oCUPC9zcGFuPiBtL3M8L2Rpdj4KICAgICAgPGRpdj5HUFMgYWNjOiA8c3BhbiBpZD0iZ2FjYyI+4oCUPC9zcGFuPiBtPC9kaXY+CiAgICA8L2Rpdj4KICAgIDxjYW52YXMgaWQ9Im1hcCI+PC9jYW52YXM+CiAgICA8ZGl2IGNsYXNzPSJzbWFsbCI+Tm9ydGgtdXAgZ3JpZC4gT25lIG1ham9yIGxpbmUgPSA1IG0uIEJsdWUgPSBQRFIsIEdyZWVuID0gR1BTLCBSZWQgPSBjdXJyZW50LjwvZGl2PgogIDwvZGl2PgoKICA8ZGl2IGNsYXNzPSJjYXJkIj4KICAgIDxkaXY+PGI+TGl2ZSBzZW5zb3JzICYgdHVuaW5nPC9iPjwvZGl2PgogICAgPGRpdiBjbGFzcz0icm93IHNtYWxsIG1ldGVyIj4KICAgICAgPGRpdj5n4oCRbWV0ZXI6IDxzcGFuIGlkPSJnbWFnIj7igJQ8L3NwYW4+IG0vc8KyPC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9InJhbmdlIj5TdGVwIHRocmVzaG9sZAogICAgICAgIDxpbnB1dCBpZD0idGhyZXNoIiB0eXBlPSJyYW5nZSIgbWluPSI4IiBtYXg9IjE0IiBzdGVwPSIwLjEiIHZhbHVlPSIxMS41Ii8+CiAgICAgICAgPHNwYW4gaWQ9InRocmVzaFZhbCI+MTEuNTwvc3Bhbj4KICAgICAgPC9kaXY+CiAgICAgIDxidXR0b24gaWQ9ImNhbGliIiBjbGFzcz0iYnRuIGdob3N0Ij5DYWxpYnJhdGUgYmFzZWxpbmU8L2J1dHRvbj4KICAgICAgPGJ1dHRvbiBpZD0idGFwU3RlcCIgY2xhc3M9ImJ0biBzZWNvbmRhcnkiPlRhcCB0byBzdGVwPC9idXR0b24+CiAgICA8L2Rpdj4KICAgIDxkaXYgY2xhc3M9InNtYWxsIj5DYWxpYnJhdGlvbjogaG9sZCBwaG9uZSBzdGlsbCAzIHMg4oaSIHNldHMgdGhyZXNob2xkIHRvIGJhc2VsaW5lICsgMi4wLjwvZGl2PgogIDwvZGl2PgoKICA8ZGl2IGNsYXNzPSJjYXJkIj4KICAgIDxkaXY+PGI+U2Vuc29yIGRpYWdub3N0aWNzPC9iPjwvZGl2PgogICAgPGRpdiBjbGFzcz0ia3YiIGlkPSJkaWFnIj4KICAgICAgPGRpdj5TZWN1cmUgY29udGV4dDwvZGl2PjxkaXYgaWQ9ImQtc2VjIj7igJQ8L2Rpdj4KICAgICAgPGRpdj5Nb3Rpb24gc2Vuc29ycyBhbGxvd2VkPC9kaXY+PGRpdiBpZD0iZC1tcyI+4oCUPC9kaXY+CiAgICAgIDxkaXY+RGV2aWNlT3JpZW50YXRpb248L2Rpdj48ZGl2IGlkPSJkLWRvIj7igJQ8L2Rpdj4KICAgICAgPGRpdj5EZXZpY2VNb3Rpb248L2Rpdj48ZGl2IGlkPSJkLWRtIj7igJQ8L2Rpdj4KICAgICAgPGRpdj5HZW5lcmljIFNlbnNvciBBUEk8L2Rpdj48ZGl2IGlkPSJkLWdzIj7igJQ8L2Rpdj4KICAgICAgPGRpdj5NYWduZXRvbWV0ZXI8L2Rpdj48ZGl2IGlkPSJkLW1hZyI+4oCUPC9kaXY+CiAgICAgIDxkaXY+R3lyb3Njb3BlPC9kaXY+PGRpdiBpZD0iZC1neXJvIj7igJQ8L2Rpdj4KICAgICAgPGRpdj5BY2NlbGVyb21ldGVyPC9kaXY+PGRpdiBpZD0iZC1hY2MiPuKAlDwvZGl2PgogICAgICA8ZGl2Pk9yaWVudGF0aW9uU2Vuc29yPC9kaXY+PGRpdiBpZD0iZC1hb3MiPuKAlDwvZGl2PgogICAgICA8ZGl2Pkxhc3QgZXJyb3I8L2Rpdj48ZGl2IGlkPSJkLWVyciI+4oCUPC9kaXY+CiAgICA8L2Rpdj4KICA8L2Rpdj4KCiAgPGRpdiBjbGFzcz0iY2FyZCI+CiAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICA8YnV0dG9uIGlkPSJleHBvcnRHZW8iIGNsYXNzPSJidG4iPkV4cG9ydCBHZW9KU09OPC9idXR0b24+CiAgICAgIDxidXR0b24gaWQ9ImV4cG9ydENTViIgY2xhc3M9ImJ0biBnaG9zdCI+RXhwb3J0IENTVjwvYnV0dG9uPgogICAgPC9kaXY+CiAgPC9kaXY+CjwvbWFpbj4KCjxzY3JpcHQ+Ci8vIC0tLSBHZW8gaGVscGVycyAtLS0KY29uc3QgUkVGID0geyBsYXQ6IDQ2LjAyMDEsIGxvbjogLTEyMi41NDg4IH07CmNvbnN0IHRvUmFkID0gZCA9PiBkICogTWF0aC5QSS8xODA7CmZ1bmN0aW9uIG1ldGVyc1BlckRlZyhsYXQpeyBjb25zdCBtbGF0ID0gMTExMzIwLCBtbG9uID0gMTExMzIwICogTWF0aC5jb3ModG9SYWQobGF0KSk7IHJldHVybiB7bWxhdCwgbWxvbn07IH0KZnVuY3Rpb24gYWRkT2Zmc2V0KGxhdCwgbG9uLCBkaXN0LCBiZWFyaW5nKXsgY29uc3Qge21sYXQsIG1sb259ID0gbWV0ZXJzUGVyRGVnKGxhdCk7IGNvbnN0IGR5ID0gZGlzdCAqIE1hdGguY29zKHRvUmFkKGJlYXJpbmcpKTsgY29uc3QgZHggPSBkaXN0ICogTWF0aC5zaW4odG9SYWQoYmVhcmluZykpOyByZXR1cm4geyBsYXQ6IGxhdCArIGR5L21sYXQsIGxvbjogbG9uICsgZHgvbWxvbiB9OyB9CgovLyAtLS0gU3RhdGUgLS0tCmxldCBhbmNob3IgPSBudWxsOwpsZXQgcnVubmluZyA9IGZhbHNlOwpsZXQgcG9pbnRzID0gW107IC8vIHt0LCBsYXQsIGxvbiwgc3JjOidwZHInfCdncHMnLCBoZWFkaW5nLCBzdGVwc30KbGV0IGN1ciA9IG51bGw7CmxldCB3YXRjaElkID0gbnVsbDsKbGV0IGxhc3RHUFMgPSBudWxsOwoKLy8gLS0tIFVJIHJlZnMgLS0tCmNvbnN0IGVsID0gKGlkKT0+IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsKZnVuY3Rpb24gcGlsbChzZXQsIG9rKXsgc2V0LnRleHRDb250ZW50ID0gb2sgPyAieWVzIiA6ICJubyI7IHNldC5jbGFzc05hbWUgPSAicGlsbCAiICsgKG9rID8gIm9rIjoiYmFkIik7IH0KCi8vIC0tLSBEaWFnbm9zdGljcyAtLS0KZnVuY3Rpb24gZGlhZ0luaXQoKXsKICBwaWxsKGVsKCdkLXNlYycpLCB3aW5kb3cuaXNTZWN1cmVDb250ZXh0KTsKICBwaWxsKGVsKCdkLWRvJyksICdvbmRldmljZW9yaWVudGF0aW9uJyBpbiB3aW5kb3cpOwogIHBpbGwoZWwoJ2QtZG0nKSwgJ29uZGV2aWNlbW90aW9uJyBpbiB3aW5kb3cpOwogIGNvbnN0IGdzID0gISEod2luZG93LkFjY2VsZXJvbWV0ZXIgfHwgd2luZG93Lkd5cm9zY29wZSB8fCB3aW5kb3cuTWFnbmV0b21ldGVyIHx8IHdpbmRvdy5BYnNvbHV0ZU9yaWVudGF0aW9uU2Vuc29yKTsKICBwaWxsKGVsKCdkLWdzJyksIGdzKTsKICBwaWxsKGVsKCdkLW1hZycpLCAhIXdpbmRvdy5NYWduZXRvbWV0ZXIpOwogIHBpbGwoZWwoJ2QtZ3lybycpLCAhIXdpbmRvdy5HeXJvc2NvcGUpOwogIHBpbGwoZWwoJ2QtYWNjJyksICEhd2luZG93LkFjY2VsZXJvbWV0ZXIpOwogIHBpbGwoZWwoJ2QtYW9zJyksICEhd2luZG93LkFic29sdXRlT3JpZW50YXRpb25TZW5zb3IpOwogIHRyeXsKICAgIGlmIChuYXZpZ2F0b3IucGVybWlzc2lvbnMgJiYgbmF2aWdhdG9yLnBlcm1pc3Npb25zLnF1ZXJ5KXsKICAgICAgbmF2aWdhdG9yLnBlcm1pc3Npb25zLnF1ZXJ5KHtuYW1lOidhY2NlbGVyb21ldGVyJ30pLnRoZW4ocj0+IGVsKCdkLW1zJykudGV4dENvbnRlbnQgPSByLnN0YXRlKS5jYXRjaCgoKT0+IGVsKCdkLW1zJykudGV4dENvbnRlbnQgPSAidW5rbm93biIpOwogICAgfSBlbHNlIHsKICAgICAgZWwoJ2QtbXMnKS50ZXh0Q29udGVudCA9ICJ1bmtub3duIjsKICAgIH0KICB9Y2F0Y2goZSl7IGVsKCdkLW1zJykudGV4dENvbnRlbnQgPSAidW5rbm93biI7IH0KfQpkaWFnSW5pdCgpOwoKLy8gLS0tIEFuY2hvciAtLS0KZnVuY3Rpb24gdXBkYXRlQW5jaG9yUGlsbCgpeyBjb25zdCBwID0gZWwoJ2FuY2hvclBpbGwnKTsgaWYoIWFuY2hvcil7IHAudGV4dENvbnRlbnQgPSAibm90IHNldCI7IHAuY2xhc3NOYW1lID0gInBpbGwgaW5mbyI7IH0gZWxzZSB7IHAudGV4dENvbnRlbnQgPSBhbmNob3IubGF0LnRvRml4ZWQoNikrIiwgIithbmNob3IubG9uLnRvRml4ZWQoNikrIiAoIithbmNob3Iuc3JjKyIpIjsgcC5jbGFzc05hbWUgPSAicGlsbCBvayI7IH0gfQplbCgndXNlU3RhcmxpbmsnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57IGFuY2hvciA9IHsgbGF0OiBSRUYubGF0LCBsb246IFJFRi5sb24sIHNyYzoic3RhcmxpbmsiIH07IGN1ciA9IHsgbGF0OiBhbmNob3IubGF0LCBsb246IGFuY2hvci5sb24sIGhlYWRpbmc6MCwgc3RlcHM6MCB9OyB1cGRhdGVBbmNob3JQaWxsKCk7IGRyYXcoKTsgfSk7CmVsKCdnZXRHUFMnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57CiAgaWYoIW5hdmlnYXRvci5nZW9sb2NhdGlvbil7IGVsKCdzdGF0JykudGV4dENvbnRlbnQgPSAiR1BTIG5vdCBzdXBwb3J0ZWQiOyByZXR1cm47IH0KICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKHBvcz0+ewogICAgY29uc3Qge2xhdGl0dWRlLCBsb25naXR1ZGUsIGFjY3VyYWN5fSA9IHBvcy5jb29yZHM7CiAgICBhbmNob3IgPSB7IGxhdDogbGF0aXR1ZGUsIGxvbjogbG9uZ2l0dWRlLCBhY2M6IGFjY3VyYWN5LCBzcmM6ImRldmljZSIgfTsKICAgIGN1ciA9IHsgbGF0OiBhbmNob3IubGF0LCBsb246IGFuY2hvci5sb24sIGhlYWRpbmc6MCwgc3RlcHM6MCB9OwogICAgdXBkYXRlQW5jaG9yUGlsbCgpOyBlbCgnZ2FjYycpLnRleHRDb250ZW50ID0gTWF0aC5yb3VuZChhY2N1cmFjeSk7CiAgICBkcmF3KCk7CiAgfSwgZXJyPT4gZWwoJ3N0YXQnKS50ZXh0Q29udGVudCA9ICJHUFMgZXJyb3I6ICIrZXJyLm1lc3NhZ2UsIHtlbmFibGVIaWdoQWNjdXJhY3k6dHJ1ZSwgbWF4aW11bUFnZTo1MDAwLCB0aW1lb3V0OjEyMDAwfSk7Cn0pOwoKLy8gLS0tIFNlbnNvciBoYW5kbGluZyAtLS0KbGV0IHNtb290aGVkSGVhZGluZyA9IDA7CmZ1bmN0aW9uIG5vcm1hbGl6ZShhKXsgYSA9IGElMzYwOyBpZihhPDApIGErPTM2MDsgcmV0dXJuIGE7IH0KZnVuY3Rpb24gc21vb3RoSGVhZGluZyhuZXdILCBhbHBoYSl7IGxldCBkaCA9IG5ld0ggLSBzbW9vdGhlZEhlYWRpbmc7IGlmKGRoID4gMTgwKSBkaCAtPSAzNjA7IGVsc2UgaWYoZGggPCAtMTgwKSBkaCArPSAzNjA7IHNtb290aGVkSGVhZGluZyA9IG5vcm1hbGl6ZShzbW9vdGhlZEhlYWRpbmcgKyBhbHBoYSpkaCk7IHJldHVybiBzbW9vdGhlZEhlYWRpbmc7IH0KCmxldCB1c2VHZW5lcmljID0gZmFsc2U7CmxldCBhY2NlbFNlbnNvcj1udWxsLCBhb3M9bnVsbDsKbGV0IGxhc3RTdGVwVCA9IDA7CmxldCBkeW5hbWljVGhyZXNob2xkID0gcGFyc2VGbG9hdChlbCgndGhyZXNoJykudmFsdWV8fCIxMS41Iik7CmVsKCd0aHJlc2gnKS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpPT57IGR5bmFtaWNUaHJlc2hvbGQgPSBwYXJzZUZsb2F0KGVsKCd0aHJlc2gnKS52YWx1ZSk7IGVsKCd0aHJlc2hWYWwnKS50ZXh0Q29udGVudCA9IGR5bmFtaWNUaHJlc2hvbGQudG9GaXhlZCgxKTsgfSk7Cgphc3luYyBmdW5jdGlvbiBlbmFibGVTZW5zb3JzKCl7CiAgdHJ5ewogICAgaWYgKHR5cGVvZiBEZXZpY2VNb3Rpb25FdmVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIERldmljZU1vdGlvbkV2ZW50LnJlcXVlc3RQZXJtaXNzaW9uID09PSAnZnVuY3Rpb24nKSB7IGF3YWl0IERldmljZU1vdGlvbkV2ZW50LnJlcXVlc3RQZXJtaXNzaW9uKCkuY2F0Y2goKCk9Pnt9KTsgfQogICAgaWYgKHR5cGVvZiBEZXZpY2VPcmllbnRhdGlvbkV2ZW50ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgRGV2aWNlT3JpZW50YXRpb25FdmVudC5yZXF1ZXN0UGVybWlzc2lvbiA9PT0gJ2Z1bmN0aW9uJykgeyBhd2FpdCBEZXZpY2VPcmllbnRhdGlvbkV2ZW50LnJlcXVlc3RQZXJtaXNzaW9uKCkuY2F0Y2goKCk9Pnt9KTsgfQogIH1jYXRjaChlKXsgLyppZ25vcmUqLyB9CiAgdHJ5ewogICAgaWYod2luZG93LkFic29sdXRlT3JpZW50YXRpb25TZW5zb3IpewogICAgICBhb3MgPSBuZXcgQWJzb2x1dGVPcmllbnRhdGlvblNlbnNvcih7ZnJlcXVlbmN5OiAzMH0pOwogICAgICBhb3MuYWRkRXZlbnRMaXN0ZW5lcigncmVhZGluZycsICgpPT57CiAgICAgICAgY29uc3QgcSA9IGFvcy5xdWF0ZXJuaW9uOyBpZighcSkgcmV0dXJuOwogICAgICAgIGNvbnN0IFt4LHkseix3XSA9IHE7CiAgICAgICAgY29uc3Qgc2lueV9jb3NwID0gMioodyp6ICsgeCp5KTsKICAgICAgICBjb25zdCBjb3N5X2Nvc3AgPSAxIC0gMiooeSp5ICsgeip6KTsKICAgICAgICBsZXQgeWF3ID0gTWF0aC5hdGFuMihzaW55X2Nvc3AsIGNvc3lfY29zcCk7CiAgICAgICAgbGV0IGhlYWRpbmcgPSBub3JtYWxpemUoeWF3KjE4MC9NYXRoLlBJKTsKICAgICAgICBjb25zdCBkZWNsID0gcGFyc2VGbG9hdChlbCgnZGVjbCcpLnZhbHVlfHwiMCIpOwogICAgICAgIGhlYWRpbmcgPSBub3JtYWxpemUoaGVhZGluZyArIGRlY2wpOwogICAgICAgIGNvbnN0IGFscGhhID0gcGFyc2VGbG9hdChlbCgnaGVhZFNtb290aCcpLnZhbHVlfHwiMC44NSIpOwogICAgICAgIGNvbnN0IGggPSBzbW9vdGhIZWFkaW5nKGhlYWRpbmcsIDEtYWxwaGEpOwogICAgICAgIGVsKCdtYWcnKS50ZXh0Q29udGVudCA9IGhlYWRpbmcudG9GaXhlZCgwKTsKICAgICAgICBlbCgnaGVhZGluZycpLnRleHRDb250ZW50ID0gaC50b0ZpeGVkKDApOwogICAgICAgIGlmKGN1cil7IGN1ci5oZWFkaW5nID0gaDsgfQogICAgICB9KTsKICAgICAgYW9zLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZT0+eyBlbCgnZC1lcnInKS50ZXh0Q29udGVudCA9ICJBT1MgZXJyb3I6ICIrKGUuZXJyb3I/Lm1lc3NhZ2V8fGUubWVzc2FnZXx8ZSk7IH0pOwogICAgICBhb3Muc3RhcnQoKTsgdXNlR2VuZXJpYyA9IHRydWU7CiAgICB9CiAgICBpZih3aW5kb3cuQWNjZWxlcm9tZXRlcil7CiAgICAgIGFjY2VsU2Vuc29yID0gbmV3IEFjY2VsZXJvbWV0ZXIoe2ZyZXF1ZW5jeTogNTB9KTsKICAgICAgYWNjZWxTZW5zb3IuYWRkRXZlbnRMaXN0ZW5lcigncmVhZGluZycsICgpPT57CiAgICAgICAgY29uc3QgZyA9IE1hdGguc3FydCgoYWNjZWxTZW5zb3IueHx8MCkqKjIgKyAoYWNjZWxTZW5zb3IueXx8MCkqKjIgKyAoYWNjZWxTZW5zb3Iuenx8MCkqKjIpOwogICAgICAgIGVsKCdnbWFnJykudGV4dENvbnRlbnQgPSBnLnRvRml4ZWQoMik7CiAgICAgICAgaWYoIXJ1bm5pbmcpIHJldHVybjsKICAgICAgICBjb25zdCBub3cgPSBwZXJmb3JtYW5jZS5ub3coKTsKICAgICAgICBpZihnID4gZHluYW1pY1RocmVzaG9sZCAmJiAobm93IC0gbGFzdFN0ZXBUKSA+IDI1MCl7IGxhc3RTdGVwVCA9IG5vdzsgc3RlcCgpOyB9CiAgICAgIH0pOwogICAgICBhY2NlbFNlbnNvci5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGU9PnsgZWwoJ2QtZXJyJykudGV4dENvbnRlbnQgPSAiQWNjIGVycm9yOiAiKyhlLmVycm9yPy5tZXNzYWdlfHxlLm1lc3NhZ2V8fGUpOyB9KTsKICAgICAgYWNjZWxTZW5zb3Iuc3RhcnQoKTsKICAgIH0KICB9Y2F0Y2goZSl7IGVsKCdkLWVycicpLnRleHRDb250ZW50ID0gIkdlbmVyaWMgc2Vuc29ycyBibG9ja2VkOiAiICsgKGUubWVzc2FnZXx8ZSk7IH0KCiAgaWYoIXVzZUdlbmVyaWMpewogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2RldmljZW9yaWVudGF0aW9uYWJzb2x1dGUnLCAoZSk9PnsKICAgICAgY29uc3QgZGVjbCA9IHBhcnNlRmxvYXQoZWwoJ2RlY2wnKS52YWx1ZXx8IjAiKTsKICAgICAgbGV0IG1hZyA9IGUuYWxwaGE7IGlmKG1hZz09bnVsbCkgcmV0dXJuOwogICAgICBsZXQgdHJ1ZUggPSBub3JtYWxpemUobWFnICsgZGVjbCk7CiAgICAgIGNvbnN0IGFscGhhID0gcGFyc2VGbG9hdChlbCgnaGVhZFNtb290aCcpLnZhbHVlfHwiMC44NSIpOwogICAgICBjb25zdCBoID0gc21vb3RoSGVhZGluZyh0cnVlSCwgMS1hbHBoYSk7CiAgICAgIGVsKCdtYWcnKS50ZXh0Q29udGVudCA9ICh0cnVlSCkudG9GaXhlZCgwKTsKICAgICAgZWwoJ2hlYWRpbmcnKS50ZXh0Q29udGVudCA9IGgudG9GaXhlZCgwKTsKICAgICAgaWYoY3VyKXsgY3VyLmhlYWRpbmcgPSBoOyB9CiAgICB9LCB0cnVlKTsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdkZXZpY2VvcmllbnRhdGlvbicsIChlKT0+ewogICAgICBpZiAoZS5hYnNvbHV0ZSkgcmV0dXJuOwogICAgICBjb25zdCBkZWNsID0gcGFyc2VGbG9hdChlbCgnZGVjbCcpLnZhbHVlfHwiMCIpOwogICAgICBsZXQgbWFnID0gZS5hbHBoYTsgaWYobWFnPT1udWxsKSByZXR1cm47CiAgICAgIGxldCB0cnVlSCA9IG5vcm1hbGl6ZShtYWcgKyBkZWNsKTsKICAgICAgY29uc3QgYWxwaGEgPSBwYXJzZUZsb2F0KGVsKCdoZWFkU21vb3RoJykudmFsdWV8fCIwLjg1Iik7CiAgICAgIGNvbnN0IGggPSBzbW9vdGhIZWFkaW5nKHRydWVILCAxLWFscGhhKTsKICAgICAgZWwoJ21hZycpLnRleHRDb250ZW50ID0gKHRydWVIKS50b0ZpeGVkKDApOwogICAgICBlbCgnaGVhZGluZycpLnRleHRDb250ZW50ID0gaC50b0ZpeGVkKDApOwogICAgICBpZihjdXIpeyBjdXIuaGVhZGluZyA9IGg7IH0KICAgIH0sIHRydWUpOwogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2RldmljZW1vdGlvbicsIChlKT0+ewogICAgICBjb25zdCBhID0gZS5hY2NlbGVyYXRpb25JbmNsdWRpbmdHcmF2aXR5OyBpZighYSkgcmV0dXJuOwogICAgICBjb25zdCBnID0gTWF0aC5zcXJ0KChhLnh8fDApKioyICsgKGEueXx8MCkqKjIgKyAoYS56fHwwKSoqMik7CiAgICAgIGVsKCdnbWFnJykudGV4dENvbnRlbnQgPSBnLnRvRml4ZWQoMik7CiAgICAgIGlmKCFydW5uaW5nKSByZXR1cm47CiAgICAgIGNvbnN0IG5vdyA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgICBpZihnID4gZHluYW1pY1RocmVzaG9sZCAmJiAobm93IC0gbGFzdFN0ZXBUKSA+IDI1MCl7IGxhc3RTdGVwVCA9IG5vdzsgc3RlcCgpOyB9CiAgICB9LCB0cnVlKTsKICB9CiAgZWwoJ3N0YXQnKS50ZXh0Q29udGVudCA9ICh1c2VHZW5lcmljPyAic2Vuc29yczogZ2VuZXJpYyI6InNlbnNvcnM6IGxlZ2FjeSIpICsgKHdpbmRvdy5pc1NlY3VyZUNvbnRleHQgPyAiIiA6ICIgKG5vbi1zZWN1cmU6IHNvbWUgc2Vuc29ycyBtYXkgYmUgYmxvY2tlZCkiKTsKfQplbCgncGVybScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZW5hYmxlU2Vuc29ycyk7CgovLyBDYWxpYnJhdGlvbjogaG9sZCBzdGlsbCBmb3IgMyBzCmVsKCdjYWxpYicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PnsKICBjb25zdCBzYW1wbGVzID0gW107IGNvbnN0IHQwID0gcGVyZm9ybWFuY2Uubm93KCk7CiAgZnVuY3Rpb24gb25SZWFkKGcpewogICAgc2FtcGxlcy5wdXNoKGcpOwogICAgaWYocGVyZm9ybWFuY2Uubm93KCkgLSB0MCA+PSAzMDAwKXsKICAgICAgY29uc3QgbWVhbiA9IHNhbXBsZXMucmVkdWNlKChzLHgpPT5zK3gsMCkvTWF0aC5tYXgoMSxzYW1wbGVzLmxlbmd0aCk7CiAgICAgIGR5bmFtaWNUaHJlc2hvbGQgPSBtZWFuICsgMi4wOwogICAgICBlbCgndGhyZXNoJykudmFsdWUgPSBkeW5hbWljVGhyZXNob2xkOyBlbCgndGhyZXNoVmFsJykudGV4dENvbnRlbnQgPSBkeW5hbWljVGhyZXNob2xkLnRvRml4ZWQoMSk7CiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdkZXZpY2Vtb3Rpb24nLCBkbUxpc3RlbmVyLCB0cnVlKTsKICAgICAgZWwoJ2QtZXJyJykudGV4dENvbnRlbnQgPSAiQ2FsaWJyYXRlZCB0aHJlc2hvbGQgdG8gIiArIGR5bmFtaWNUaHJlc2hvbGQudG9GaXhlZCgyKTsKICAgIH0KICB9CiAgZnVuY3Rpb24gZG1MaXN0ZW5lcihlKXsKICAgIGNvbnN0IGEgPSBlLmFjY2VsZXJhdGlvbkluY2x1ZGluZ0dyYXZpdHl8fHt9OyBjb25zdCBnID0gTWF0aC5zcXJ0KChhLnh8fDApKioyICsgKGEueXx8MCkqKjIgKyAoYS56fHwwKSoqMik7CiAgICBvblJlYWQoZyk7CiAgfQogIGlmKHdpbmRvdy5BY2NlbGVyb21ldGVyKXsKICAgIGNvbnN0IHMgPSBuZXcgQWNjZWxlcm9tZXRlcih7ZnJlcXVlbmN5OiA1MH0pOwogICAgcy5hZGRFdmVudExpc3RlbmVyKCdyZWFkaW5nJywgKCk9PiBvblJlYWQoTWF0aC5zcXJ0KChzLnh8fDApKioyICsgKHMueXx8MCkqKjIgKyAocy56fHwwKSoqMikpKTsKICAgIHMuc3RhcnQoKTsKICAgIHNldFRpbWVvdXQoKCk9PnsgdHJ5e3Muc3RvcCgpO31jYXRjaHt9IH0sIDMxMDApOwogIH1lbHNlewogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2RldmljZW1vdGlvbicsIGRtTGlzdGVuZXIsIHRydWUpOwogICAgc2V0VGltZW91dCgoKT0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdkZXZpY2Vtb3Rpb24nLCBkbUxpc3RlbmVyLCB0cnVlKSwgMzEwMCk7CiAgfQp9KTsKCi8vIFRhcC10by1zdGVwIHRlc3QKZWwoJ3RhcFN0ZXAnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT4gc3RlcCgpKTsKCi8vIC0tLSBTdGVwICYgR1BTIC0tLQpmdW5jdGlvbiBzdGVwKCl7CiAgaWYoIWN1cikgcmV0dXJuOwogIGNvbnN0IHN0ZXBMZW4gPSBNYXRoLm1heCgwLjMsIHBhcnNlRmxvYXQoZWwoJ3N0ZXBMZW4nKS52YWx1ZXx8IjAuNzUiKSk7CiAgY3VyLnN0ZXBzID0gKGN1ci5zdGVwc3x8MCkgKyAxOwogIGNvbnN0IG5leHQgPSBhZGRPZmZzZXQoY3VyLmxhdCwgY3VyLmxvbiwgc3RlcExlbiwgY3VyLmhlYWRpbmd8fDApOwogIGN1ci5sYXQgPSBuZXh0LmxhdDsgY3VyLmxvbiA9IG5leHQubG9uOwogIHBvaW50cy5wdXNoKHsgdDogRGF0ZS5ub3coKSwgbGF0OiBjdXIubGF0LCBsb246IGN1ci5sb24sIHNyYzoncGRyJywgaGVhZGluZzogY3VyLmhlYWRpbmd8fDAsIHN0ZXBzOiBjdXIuc3RlcHMgfSk7CiAgZWwoJ3N0ZXBzJykudGV4dENvbnRlbnQgPSBjdXIuc3RlcHM7CiAgZHJhdygpOwp9CgpmdW5jdGlvbiBzdGFydEdQU1dhdGNoKCl7CiAgaWYoIW5hdmlnYXRvci5nZW9sb2NhdGlvbikgcmV0dXJuOwogIHdhdGNoSWQgPSBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24ud2F0Y2hQb3NpdGlvbihwb3M9PnsKICAgIGNvbnN0IHtsYXRpdHVkZSwgbG9uZ2l0dWRlLCBhY2N1cmFjeSwgc3BlZWR9ID0gcG9zLmNvb3JkczsKICAgIGxhc3RHUFMgPSB7IGxhdDogbGF0aXR1ZGUsIGxvbjogbG9uZ2l0dWRlLCBhY2M6IGFjY3VyYWN5LCBzcGQ6IHNwZWVkfHwwLCB0OiBEYXRlLm5vdygpIH07CiAgICBlbCgnZ2FjYycpLnRleHRDb250ZW50ID0gYWNjdXJhY3kgPyBNYXRoLnJvdW5kKGFjY3VyYWN5KSA6ICLigJQiOwogICAgZWwoJ3NwZCcpLnRleHRDb250ZW50ID0gaXNGaW5pdGUoc3BlZWQpID8gKHNwZWVkfHwwKS50b0ZpeGVkKDIpIDogIuKAlCI7CiAgICBjb25zdCBzbmFwID0gcGFyc2VGbG9hdChlbCgnZ3BzU25hcCcpLnZhbHVlfHwiOCIpOwogICAgaWYoc25hcCAmJiBhY2N1cmFjeSAmJiBhY2N1cmFjeSA8PSBzbmFwKXsKICAgICAgaWYoY3VyKXsKICAgICAgICBjdXIubGF0ID0gKGN1ci5sYXQqMyArIGxhdGl0dWRlKS80OwogICAgICAgIGN1ci5sb24gPSAoY3VyLmxvbiozICsgbG9uZ2l0dWRlKS80OwogICAgICAgIHBvaW50cy5wdXNoKHsgdDogRGF0ZS5ub3coKSwgbGF0OiBsYXRpdHVkZSwgbG9uOiBsb25naXR1ZGUsIHNyYzonZ3BzJywgaGVhZGluZzogY3VyLmhlYWRpbmd8fDAsIHN0ZXBzOiBjdXIuc3RlcHN8fDAgfSk7CiAgICAgICAgZHJhdygpOwogICAgICB9CiAgICB9CiAgfSwgZXJyPT57fSwge2VuYWJsZUhpZ2hBY2N1cmFjeTp0cnVlLCBtYXhpbXVtQWdlOjIwMDAsIHRpbWVvdXQ6MTIwMDB9KTsKfQpmdW5jdGlvbiBzdG9wR1BTV2F0Y2goKXsgaWYod2F0Y2hJZCE9bnVsbCl7IG5hdmlnYXRvci5nZW9sb2NhdGlvbi5jbGVhcldhdGNoKHdhdGNoSWQpOyB3YXRjaElkPW51bGw7IH0gfQplbCgnc25hcE5vdycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PnsgaWYobGFzdEdQUyAmJiBjdXIpeyBjdXIubGF0ID0gbGFzdEdQUy5sYXQ7IGN1ci5sb24gPSBsYXN0R1BTLmxvbjsgcG9pbnRzLnB1c2goeyB0OiBEYXRlLm5vdygpLCBsYXQ6IGN1ci5sYXQsIGxvbjogY3VyLmxvbiwgc3JjOidncHMnLCBoZWFkaW5nOiBjdXIuaGVhZGluZ3x8MCwgc3RlcHM6IGN1ci5zdGVwc3x8MCB9KTsgZHJhdygpOyB9IH0pOwoKLy8gLS0tIENvbnRyb2xzIC0tLQplbCgnc3RhcnQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57IGlmKCFhbmNob3IpeyBhbGVydCgiU2V0IGFuY2hvciBmaXJzdC4iKTsgcmV0dXJuOyB9IGlmKCFjdXIpIGN1ciA9IHsgbGF0OiBhbmNob3IubGF0LCBsb246IGFuY2hvci5sb24sIGhlYWRpbmc6IDAsIHN0ZXBzOiAwIH07IHJ1bm5pbmcgPSB0cnVlOyBlbCgnc3RhdCcpLnRleHRDb250ZW50ID0gInJ1bm5pbmciOyBzdGFydEdQU1dhdGNoKCk7IH0pOwplbCgncGF1c2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57IHJ1bm5pbmcgPSBmYWxzZTsgZWwoJ3N0YXQnKS50ZXh0Q29udGVudCA9ICJwYXVzZWQiOyBzdG9wR1BTV2F0Y2goKTsgfSk7CmVsKCdyZXNldCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PnsgcnVubmluZyA9IGZhbHNlOyBzdG9wR1BTV2F0Y2goKTsgcG9pbnRzID0gW107IGN1ciA9IGFuY2hvciA/IHsgbGF0OiBhbmNob3IubGF0LCBsb246IGFuY2hvci5sb24sIGhlYWRpbmc6MCwgc3RlcHM6MCB9IDogbnVsbDsgZWwoJ3N0ZXBzJykudGV4dENvbnRlbnQgPSAiMCI7IGVsKCdzdGF0JykudGV4dENvbnRlbnQgPSAiaWRsZSI7IGRyYXcoKTsgfSk7CgovLyAtLS0gRHJhd2luZyAtLS0KY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpOyBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKZnVuY3Rpb24gcmVzaXplQ2FudmFzKCl7IGNvbnN0IHIgPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxOyBjYW52YXMud2lkdGggPSBNYXRoLmZsb29yKGNhbnZhcy5jbGllbnRXaWR0aCAqIHIpOyBjYW52YXMuaGVpZ2h0ID0gTWF0aC5mbG9vcihjYW52YXMuY2xpZW50SGVpZ2h0ICogcik7IH0Kd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpPT57IHJlc2l6ZUNhbnZhcygpOyBkcmF3KCk7IH0pOyByZXNpemVDYW52YXMoKTsKZnVuY3Rpb24gbGF0bG9uVG9Mb2NhbChsYXQsIGxvbiwgcmVmTGF0LCByZWZMb24peyBjb25zdCB7bWxhdCwgbWxvbn0gPSBtZXRlcnNQZXJEZWcocmVmTGF0KTsgY29uc3QgZHggPSAobG9uIC0gcmVmTG9uKSAqIG1sb247IGNvbnN0IGR5ID0gKGxhdCAtIHJlZkxhdCkgKiBtbGF0OyByZXR1cm4ge3g6IGR4LCB5OiBkeX07IH0KZnVuY3Rpb24gZHJhdygpewogIHJlc2l6ZUNhbnZhcygpOyBjdHguY2xlYXJSZWN0KDAsMCxjYW52YXMud2lkdGgsY2FudmFzLmhlaWdodCk7IGNvbnN0IHcgPSBjYW52YXMud2lkdGgsIGggPSBjYW52YXMuaGVpZ2h0OyBjdHguc2F2ZSgpOwogIGxldCBjZW50ZXIgPSBhbmNob3IgfHwge2xhdDogUkVGLmxhdCwgbG9uOiBSRUYubG9ufTsgaWYoY3VyKXsgY2VudGVyID0geyBsYXQ6IGN1ci5sYXQsIGxvbjogY3VyLmxvbiB9OyB9CiAgY29uc3QgbG9jYWxQdHMgPSBwb2ludHMubWFwKHAgPT4gKHsuLi5wLCAuLi5sYXRsb25Ub0xvY2FsKHAubGF0LHAubG9uLCBjZW50ZXIubGF0LCBjZW50ZXIubG9uKX0pKTsKICBjb25zdCBtUGVyUGl4ID0gMC4yICogTWF0aC5tYXgoMSwgIChNYXRoLm1heCgxMCwgbG9jYWxQdHMucmVkdWNlKChNLHApPT5NYXRoLm1heChNLCBNYXRoLmh5cG90KHAueCxwLnkpKSwgMCkpIC8gKE1hdGgubWluKHcsaCkvMykpICk7CiAgY29uc3QgZ3JpZFN0ZXAgPSA1OyBjb25zdCBweFBlck1ldGVyID0gMSAvIG1QZXJQaXg7CiAgY3R4LnN0cm9rZVN0eWxlID0gIiMxZTI5M2IiOyBjdHgubGluZVdpZHRoID0gMTsgY3R4LmJlZ2luUGF0aCgpOwogIGZvcihsZXQgZ3g9LTEwMDsgZ3g8PTEwMDsgZ3grPWdyaWRTdGVwKXsgY29uc3QgeCA9IHcvMiArIGd4KnB4UGVyTWV0ZXI7IGN0eC5tb3ZlVG8oeCwgMCk7IGN0eC5saW5lVG8oeCwgaCk7IH0KICBmb3IobGV0IGd5PS0xMDA7IGd5PD0xMDA7IGd5Kz1ncmlkU3RlcCl7IGNvbnN0IHkgPSBoLzIgLSBneSpweFBlck1ldGVyOyBjdHgubW92ZVRvKDAsIHkpOyBjdHgubGluZVRvKHcsIHkpOyB9CiAgY3R4LnN0cm9rZSgpOwogIGN0eC5saW5lV2lkdGggPSAzOyBjdHguc3Ryb2tlU3R5bGUgPSAiIzE2YTM0YSI7IGN0eC5iZWdpblBhdGgoKTsKICBsb2NhbFB0cy5maWx0ZXIocD0+cC5zcmM9PT0nZ3BzJykuZm9yRWFjaCgocCxpKT0+eyBjb25zdCB4ID0gdy8yICsgcC54KnB4UGVyTWV0ZXIsIHkgPSBoLzIgLSBwLnkqcHhQZXJNZXRlcjsgaWYoaT09PTApIGN0eC5tb3ZlVG8oeCx5KTsgZWxzZSBjdHgubGluZVRvKHgseSk7IH0pOyBjdHguc3Ryb2tlKCk7CiAgY3R4LnN0cm9rZVN0eWxlID0gIiM2MGE1ZmEiOyBjdHguYmVnaW5QYXRoKCk7CiAgbG9jYWxQdHMuZmlsdGVyKHA9PnAuc3JjPT09J3BkcicpLmZvckVhY2goKHAsaSk9PnsgY29uc3QgeCA9IHcvMiArIHAueCpweFBlck1ldGVyLCB5ID0gaC8yIC0gcC55KnB4UGVyTWV0ZXI7IGlmKGk9PT0wKSBjdHgubW92ZVRvKHgseSk7IGVsc2UgY3R4LmxpbmVUbyh4LHkpOyB9KTsgY3R4LnN0cm9rZSgpOwogIGlmKGN1cil7IGNvbnN0IGMgPSBsYXRsb25Ub0xvY2FsKGN1ci5sYXQsIGN1ci5sb24sIGNlbnRlci5sYXQsIGNlbnRlci5sb24pOyBjb25zdCB4ID0gdy8yICsgYy54KnB4UGVyTWV0ZXIsIHkgPSBoLzIgLSBjLnkqcHhQZXJNZXRlcjsgY3R4LmZpbGxTdHlsZSA9ICIjZWY0NDQ0IjsgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKHgseSw2LDAsTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsgY29uc3QgYnJnID0gKGN1ci5oZWFkaW5nfHwwKSpNYXRoLlBJLzE4MDsgY3R4LnN0cm9rZVN0eWxlID0gIiNlZjQ0NDQiOyBjdHgubGluZVdpZHRoID0gMjsgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKHgseSk7IGN0eC5saW5lVG8oeCtNYXRoLnNpbihicmcpKjIwLCB5LU1hdGguY29zKGJyZykqMjApOyBjdHguc3Ryb2tlKCk7IH0KICBjdHgucmVzdG9yZSgpOwp9CgovLyAtLS0gRXhwb3J0IC0tLQpmdW5jdGlvbiBkb3dubG9hZChuYW1lLCBkYXRhLCB0eXBlPSdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nKXsgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtkYXRhXSwge3R5cGV9KTsgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsgYS5ocmVmID0gdXJsOyBhLmRvd25sb2FkID0gbmFtZTsgYS5jbGljaygpOyBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7IH0KZWwoJ2V4cG9ydEdlbycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PnsgY29uc3QgZmMgPSB7IHR5cGU6ICJGZWF0dXJlQ29sbGVjdGlvbiIsIGZlYXR1cmVzOiBbIHsgdHlwZTogIkZlYXR1cmUiLCBwcm9wZXJ0aWVzOiB7IG5hbWU6ICJQRFIgcGF0aCIgfSwgZ2VvbWV0cnk6IHsgdHlwZTogIkxpbmVTdHJpbmciLCBjb29yZGluYXRlczogcG9pbnRzLm1hcChwPT5bcC5sb24sIHAubGF0XSkgfSB9IF0gfTsgZG93bmxvYWQoImVoMTAwMzAwNl9wZHJfcGF0aF92MF8zXzIuZ2VvanNvbiIsIEpTT04uc3RyaW5naWZ5KGZjLCBudWxsLCAyKSwgImFwcGxpY2F0aW9uL2dlbytqc29uIik7IH0pOwplbCgnZXhwb3J0Q1NWJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+eyBjb25zdCBjc3YgPSAidCxsYXQsbG9uLHNyYyxoZWFkaW5nLHN0ZXBzXG4iICsgcG9pbnRzLm1hcChwPT5bcC50LHAubGF0LHAubG9uLHAuc3JjLHAuaGVhZGluZz8/IiIscC5zdGVwcz8/IiJdLmpvaW4oIiwiKSkuam9pbigiXG4iKTsgZG93bmxvYWQoImVoMTAwMzAwNl9wZHJfcGF0aF92MF8zXzIuY3N2IiwgY3N2LCAidGV4dC9jc3YiKTsgfSk7Cjwvc2NyaXB0Pgo8L2JvZHk+CjwvaHRtbD4K",    Canby: "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CjxtZXRhIGNoYXJzZXQ9InV0Zi04Ii8+CjxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MSwgbWF4aW11bS1zY2FsZT0xIi8+Cjx0aXRsZT5FSDEwMDMwMDYgUERSIE5hdmlnYXRvciDigJQgdjAuMy4yIChiZXRhKTwvdGl0bGU+CjxtZXRhIG5hbWU9ImNvbG9yLXNjaGVtZSIgY29udGVudD0iZGFyayBsaWdodCI+CjxzdHlsZT4KICA6cm9vdHstLWJnOiMwYjEwMjA7LS1pbms6I2UyZThmMDstLW11dGVkOiM5NGEzYjg7LS1jYXJkOiMwZjE3MmE7LS1hY2NlbnQ6IzYwYTVmYTstLWdvb2Q6IzIyYzU1ZTstLXdhcm46I2Y1OWUwYjstLWJhZDojZWY0NDQ0O30KICBib2R5e21hcmdpbjowO2JhY2tncm91bmQ6dmFyKC0tYmcpO2NvbG9yOnZhcigtLWluayk7Zm9udC1mYW1pbHk6c3lzdGVtLXVpLFNlZ29lIFVJLFJvYm90byxIZWx2ZXRpY2EsQXJpYWx9CiAgaGVhZGVye3BhZGRpbmc6MTJweCAxNHB4O2JhY2tncm91bmQ6IzBhMGYxZjtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjMTcyMDNiO3Bvc2l0aW9uOnN0aWNreTt0b3A6MDt6LWluZGV4OjEwfQogIGgxe21hcmdpbjowO2ZvbnQtc2l6ZToxOHB4fQogIC5zdWJ7Y29sb3I6dmFyKC0tbXV0ZWQpO2ZvbnQtc2l6ZToxMnB4O21hcmdpbi10b3A6NHB4fQogIG1haW57cGFkZGluZzoxMnB4IDE0cHg7ZGlzcGxheTpncmlkO2dhcDoxMnB4fQogIC5jYXJke2JhY2tncm91bmQ6dmFyKC0tY2FyZCk7Ym9yZGVyOjFweCBzb2xpZCAjMGIxMjI1O2JvcmRlci1yYWRpdXM6MTJweDtwYWRkaW5nOjEycHh9CiAgLnJvd3tkaXNwbGF5OmZsZXg7Z2FwOjhweDtmbGV4LXdyYXA6d3JhcDthbGlnbi1pdGVtczpjZW50ZXJ9CiAgLmJ0bntiYWNrZ3JvdW5kOiMxZjZmZWI7Y29sb3I6I2ZmZjtib3JkZXI6bm9uZTtib3JkZXItcmFkaXVzOjEwcHg7cGFkZGluZzoxMHB4IDE0cHg7Zm9udC13ZWlnaHQ6NzAwO2N1cnNvcjpwb2ludGVyfQogIC5idG4uc2Vjb25kYXJ5e2JhY2tncm91bmQ6IzMzNDE1NX0KICAuYnRuLmdob3N0e2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7Ym9yZGVyOjFweCBzb2xpZCAjMzM0MTU1O2NvbG9yOiNlNWU3ZWJ9CiAgLmJ0bi5nb29ke2JhY2tncm91bmQ6IzE1ODAzZH0KICAuYnRuLndhcm57YmFja2dyb3VuZDojYjkxYzFjfQogIC5waWxse2JhY2tncm91bmQ6IzBiMTMyNjtib3JkZXI6MXB4IHNvbGlkICMxZTI5M2I7Ym9yZGVyLXJhZGl1czo5OTlweDtwYWRkaW5nOjRweCAxMHB4O2ZvbnQtc2l6ZToxMnB4fQogIC5waWxsLm9re2JvcmRlci1jb2xvcjojMGY1MTMyO2NvbG9yOiNiYmY3ZDA7YmFja2dyb3VuZDojMGIxZjE0fQogIC5waWxsLmluZm97Ym9yZGVyLWNvbG9yOiMxZTQwYWY7Y29sb3I6I2JmZGJmZTtiYWNrZ3JvdW5kOiMwYjEzMjZ9CiAgLnBpbGwuYmFke2JvcmRlci1jb2xvcjojN2YxZDFkO2NvbG9yOiNmZWNhY2E7YmFja2dyb3VuZDojMmEwZjEyfQogIC5zbWFsbHtmb250LXNpemU6MTJweDtjb2xvcjp2YXIoLS1tdXRlZCl9CiAgLmlucHV0LCBzZWxlY3R7YmFja2dyb3VuZDojMGIxMzI2O2NvbG9yOiNlMmU4ZjA7Ym9yZGVyOjFweCBzb2xpZCAjMWUyOTNiO2JvcmRlci1yYWRpdXM6OHB4O3BhZGRpbmc6MTBweH0KICAubWV0ZXJ7Zm9udC12YXJpYW50LW51bWVyaWM6dGFidWxhci1udW1zfQogIGNhbnZhc3t3aWR0aDoxMDAlO2hlaWdodDozNDBweDtiYWNrZ3JvdW5kOiMwYjEzMjY7Ym9yZGVyOjFweCBzb2xpZCAjMWUyOTNiO2JvcmRlci1yYWRpdXM6MTJweH0KICAua3Z7ZGlzcGxheTpncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczptYXgtY29udGVudCAxZnI7IGdhcDo2cHggMTJweDsgZm9udC1zaXplOjEycHh9CiAgLmt2IGRpdntwYWRkaW5nOjJweCAwfQogIC5yYW5nZXtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo4cHh9CiAgaW5wdXRbdHlwZT1yYW5nZV17d2lkdGg6MjAwcHh9Cjwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+CjxoZWFkZXI+CiAgPGgxPkVIMTAwMzAwNiBQRFIgTmF2aWdhdG9yIDxzcGFuIGNsYXNzPSJwaWxsIj52MC4zLjIgYmV0YTwvc3Bhbj48L2gxPgogIDxkaXYgY2xhc3M9InN1YiI+QW5kcm9pZC9QaXhlbC1mcmllbmRseSBQRFIuIExpdmUgZ+KAkW1ldGVyLCBhZGp1c3RhYmxlIHN0ZXAgdGhyZXNob2xkLCB0YXDigJF0b+KAkXN0ZXAgdGVzdCwgYW5kIGJhc2VsaW5lIGNhbGlicmF0aW9uLjwvZGl2Pgo8L2hlYWRlcj4KPG1haW4+CiAgPGRpdiBjbGFzcz0iY2FyZCI+CiAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICA8ZGl2PjxiPkFuY2hvcjwvYj4gPHNwYW4gaWQ9ImFuY2hvclBpbGwiIGNsYXNzPSJwaWxsIGluZm8iPm5vdCBzZXQ8L3NwYW4+PC9kaXY+CiAgICAgIDxidXR0b24gaWQ9InVzZVN0YXJsaW5rIiBjbGFzcz0iYnRuIj5Vc2UgU3RhcmxpbmsgYW5jaG9yPC9idXR0b24+CiAgICAgIDxidXR0b24gaWQ9ImdldEdQUyIgY2xhc3M9ImJ0biBzZWNvbmRhcnkiPlVzZSBkZXZpY2UgR1BTPC9idXR0b24+CiAgICAgIDxidXR0b24gaWQ9InBlcm0iIGNsYXNzPSJidG4gZ2hvc3QiPkVuYWJsZSBzZW5zb3JzPC9idXR0b24+CiAgICA8L2Rpdj4KICAgIDxkaXYgY2xhc3M9InNtYWxsIj5PcGVuIHZpYSA8Yj5IVFRQUzwvYj4gb3IgPGI+aHR0cDovL2xvY2FsaG9zdDwvYj4uIENocm9tZSDihpIgU2l0ZSBzZXR0aW5ncyDihpIgTW90aW9uIHNlbnNvcnMg4oaSIDxiPkFsbG93ZWQ8L2I+LiBBdm9pZCBtZXRhbCByb29mcy92ZWhpY2xlcyBmb3IgaGVhZGluZyBsb2NrLjwvZGl2PgogICAgPGRpdiBjbGFzcz0icm93IiBzdHlsZT0ibWFyZ2luLXRvcDo2cHgiPgogICAgICA8bGFiZWw+U3RlcCBsZW5ndGggKG0pIDxpbnB1dCBpZD0ic3RlcExlbiIgdHlwZT0ibnVtYmVyIiBjbGFzcz0iaW5wdXQiIHZhbHVlPSIwLjc1IiBzdGVwPSIwLjAxIiBzdHlsZT0id2lkdGg6MTEwcHgiLz48L2xhYmVsPgogICAgICA8bGFiZWw+TWFnIGRlY2xpbmF0aW9uICjCsEUgKyAvIMKwVyDiiJIpIDxpbnB1dCBpZD0iZGVjbCIgdHlwZT0ibnVtYmVyIiBjbGFzcz0iaW5wdXQiIHZhbHVlPSIxNSIgc3RlcD0iMC41IiBzdHlsZT0id2lkdGg6MTEwcHgiLz48L2xhYmVsPgogICAgICA8bGFiZWw+QXV0byBHUFMgc25hcCAobSkgPGlucHV0IGlkPSJncHNTbmFwIiB0eXBlPSJudW1iZXIiIGNsYXNzPSJpbnB1dCIgdmFsdWU9IjgiIHN0ZXA9IjEiIHN0eWxlPSJ3aWR0aDo5MHB4Ii8+PC9sYWJlbD4KICAgICAgPGxhYmVsPkhlYWRpbmcgc21vb3RoaW5nICgw4oCTMSkgPGlucHV0IGlkPSJoZWFkU21vb3RoIiB0eXBlPSJudW1iZXIiIGNsYXNzPSJpbnB1dCIgdmFsdWU9IjAuODUiIHN0ZXA9IjAuMDUiIHN0eWxlPSJ3aWR0aDoxMTBweCIvPjwvbGFiZWw+CiAgICA8L2Rpdj4KICA8L2Rpdj4KCiAgPGRpdiBjbGFzcz0iY2FyZCI+CiAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICA8YnV0dG9uIGlkPSJzdGFydCIgY2xhc3M9ImJ0biBnb29kIj5TdGFydCBQRFI8L2J1dHRvbj4KICAgICAgPGJ1dHRvbiBpZD0icGF1c2UiIGNsYXNzPSJidG4gd2FybiI+UGF1c2U8L2J1dHRvbj4KICAgICAgPGJ1dHRvbiBpZD0icmVzZXQiIGNsYXNzPSJidG4gZ2hvc3QiPlJlc2V0PC9idXR0b24+CiAgICAgIDxidXR0b24gaWQ9InNuYXBOb3ciIGNsYXNzPSJidG4gc2Vjb25kYXJ5Ij5TbmFwIHRvIEdQUyBub3c8L2J1dHRvbj4KICAgICAgPHNwYW4gaWQ9InN0YXQiIGNsYXNzPSJzbWFsbCBtZXRlciIgc3R5bGU9Im1hcmdpbi1sZWZ0OmF1dG8iPmlkbGU8L3NwYW4+CiAgICA8L2Rpdj4KICAgIDxkaXYgY2xhc3M9InJvdyBzbWFsbCBtZXRlciI+CiAgICAgIDxkaXY+SGVhZGluZzogPHNwYW4gaWQ9ImhlYWRpbmciPuKAlDwvc3Bhbj7CsDwvZGl2PgogICAgICA8ZGl2Pk1hZzogPHNwYW4gaWQ9Im1hZyI+4oCUPC9zcGFuPsKwPC9kaXY+CiAgICAgIDxkaXY+U3RlcHM6IDxzcGFuIGlkPSJzdGVwcyI+MDwvc3Bhbj48L2Rpdj4KICAgICAgPGRpdj5TcGVlZDogPHNwYW4gaWQ9InNwZCI+4oCUPC9zcGFuPiBtL3M8L2Rpdj4KICAgICAgPGRpdj5HUFMgYWNjOiA8c3BhbiBpZD0iZ2FjYyI+4oCUPC9zcGFuPiBtPC9kaXY+CiAgICA8L2Rpdj4KICAgIDxjYW52YXMgaWQ9Im1hcCI+PC9jYW52YXM+CiAgICA8ZGl2IGNsYXNzPSJzbWFsbCI+Tm9ydGgtdXAgZ3JpZC4gT25lIG1ham9yIGxpbmUgPSA1IG0uIEJsdWUgPSBQRFIsIEdyZWVuID0gR1BTLCBSZWQgPSBjdXJyZW50LjwvZGl2PgogIDwvZGl2PgoKICA8ZGl2IGNsYXNzPSJjYXJkIj4KICAgIDxkaXY+PGI+TGl2ZSBzZW5zb3JzICYgdHVuaW5nPC9iPjwvZGl2PgogICAgPGRpdiBjbGFzcz0icm93IHNtYWxsIG1ldGVyIj4KICAgICAgPGRpdj5n4oCRbWV0ZXI6IDxzcGFuIGlkPSJnbWFnIj7igJQ8L3NwYW4+IG0vc8KyPC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9InJhbmdlIj5TdGVwIHRocmVzaG9sZAogICAgICAgIDxpbnB1dCBpZD0idGhyZXNoIiB0eXBlPSJyYW5nZSIgbWluPSI4IiBtYXg9IjE0IiBzdGVwPSIwLjEiIHZhbHVlPSIxMS41Ii8+CiAgICAgICAgPHNwYW4gaWQ9InRocmVzaFZhbCI+MTEuNTwvc3Bhbj4KICAgICAgPC9kaXY+CiAgICAgIDxidXR0b24gaWQ9ImNhbGliIiBjbGFzcz0iYnRuIGdob3N0Ij5DYWxpYnJhdGUgYmFzZWxpbmU8L2J1dHRvbj4KICAgICAgPGJ1dHRvbiBpZD0idGFwU3RlcCIgY2xhc3M9ImJ0biBzZWNvbmRhcnkiPlRhcCB0byBzdGVwPC9idXR0b24+CiAgICA8L2Rpdj4KICAgIDxkaXYgY2xhc3M9InNtYWxsIj5DYWxpYnJhdGlvbjogaG9sZCBwaG9uZSBzdGlsbCAzIHMg4oaSIHNldHMgdGhyZXNob2xkIHRvIGJhc2VsaW5lICsgMi4wLjwvZGl2PgogIDwvZGl2PgoKICA8ZGl2IGNsYXNzPSJjYXJkIj4KICAgIDxkaXY+PGI+U2Vuc29yIGRpYWdub3N0aWNzPC9iPjwvZGl2PgogICAgPGRpdiBjbGFzcz0ia3YiIGlkPSJkaWFnIj4KICAgICAgPGRpdj5TZWN1cmUgY29udGV4dDwvZGl2PjxkaXYgaWQ9ImQtc2VjIj7igJQ8L2Rpdj4KICAgICAgPGRpdj5Nb3Rpb24gc2Vuc29ycyBhbGxvd2VkPC9kaXY+PGRpdiBpZD0iZC1tcyI+4oCUPC9kaXY+CiAgICAgIDxkaXY+RGV2aWNlT3JpZW50YXRpb248L2Rpdj48ZGl2IGlkPSJkLWRvIj7igJQ8L2Rpdj4KICAgICAgPGRpdj5EZXZpY2VNb3Rpb248L2Rpdj48ZGl2IGlkPSJkLWRtIj7igJQ8L2Rpdj4KICAgICAgPGRpdj5HZW5lcmljIFNlbnNvciBBUEk8L2Rpdj48ZGl2IGlkPSJkLWdzIj7igJQ8L2Rpdj4KICAgICAgPGRpdj5NYWduZXRvbWV0ZXI8L2Rpdj48ZGl2IGlkPSJkLW1hZyI+4oCUPC9kaXY+CiAgICAgIDxkaXY+R3lyb3Njb3BlPC9kaXY+PGRpdiBpZD0iZC1neXJvIj7igJQ8L2Rpdj4KICAgICAgPGRpdj5BY2NlbGVyb21ldGVyPC9kaXY+PGRpdiBpZD0iZC1hY2MiPuKAlDwvZGl2PgogICAgICA8ZGl2Pk9yaWVudGF0aW9uU2Vuc29yPC9kaXY+PGRpdiBpZD0iZC1hb3MiPuKAlDwvZGl2PgogICAgICA8ZGl2Pkxhc3QgZXJyb3I8L2Rpdj48ZGl2IGlkPSJkLWVyciI+4oCUPC9kaXY+CiAgICA8L2Rpdj4KICA8L2Rpdj4KCiAgPGRpdiBjbGFzcz0iY2FyZCI+CiAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICA8YnV0dG9uIGlkPSJleHBvcnRHZW8iIGNsYXNzPSJidG4iPkV4cG9ydCBHZW9KU09OPC9idXR0b24+CiAgICAgIDxidXR0b24gaWQ9ImV4cG9ydENTViIgY2xhc3M9ImJ0biBnaG9zdCI+RXhwb3J0IENTVjwvYnV0dG9uPgogICAgPC9kaXY+CiAgPC9kaXY+CjwvbWFpbj4KCjxzY3JpcHQ+Ci8vIC0tLSBHZW8gaGVscGVycyAtLS0KY29uc3QgUkVGID0geyBsYXQ6IDQ2LjAyMDEsIGxvbjogLTEyMi41NDg4IH07CmNvbnN0IHRvUmFkID0gZCA9PiBkICogTWF0aC5QSS8xODA7CmZ1bmN0aW9uIG1ldGVyc1BlckRlZyhsYXQpeyBjb25zdCBtbGF0ID0gMTExMzIwLCBtbG9uID0gMTExMzIwICogTWF0aC5jb3ModG9SYWQobGF0KSk7IHJldHVybiB7bWxhdCwgbWxvbn07IH0KZnVuY3Rpb24gYWRkT2Zmc2V0KGxhdCwgbG9uLCBkaXN0LCBiZWFyaW5nKXsgY29uc3Qge21sYXQsIG1sb259ID0gbWV0ZXJzUGVyRGVnKGxhdCk7IGNvbnN0IGR5ID0gZGlzdCAqIE1hdGguY29zKHRvUmFkKGJlYXJpbmcpKTsgY29uc3QgZHggPSBkaXN0ICogTWF0aC5zaW4odG9SYWQoYmVhcmluZykpOyByZXR1cm4geyBsYXQ6IGxhdCArIGR5L21sYXQsIGxvbjogbG9uICsgZHgvbWxvbiB9OyB9CgovLyAtLS0gU3RhdGUgLS0tCmxldCBhbmNob3IgPSBudWxsOwpsZXQgcnVubmluZyA9IGZhbHNlOwpsZXQgcG9pbnRzID0gW107IC8vIHt0LCBsYXQsIGxvbiwgc3JjOidwZHInfCdncHMnLCBoZWFkaW5nLCBzdGVwc30KbGV0IGN1ciA9IG51bGw7CmxldCB3YXRjaElkID0gbnVsbDsKbGV0IGxhc3RHUFMgPSBudWxsOwoKLy8gLS0tIFVJIHJlZnMgLS0tCmNvbnN0IGVsID0gKGlkKT0+IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsKZnVuY3Rpb24gcGlsbChzZXQsIG9rKXsgc2V0LnRleHRDb250ZW50ID0gb2sgPyAieWVzIiA6ICJubyI7IHNldC5jbGFzc05hbWUgPSAicGlsbCAiICsgKG9rID8gIm9rIjoiYmFkIik7IH0KCi8vIC0tLSBEaWFnbm9zdGljcyAtLS0KZnVuY3Rpb24gZGlhZ0luaXQoKXsKICBwaWxsKGVsKCdkLXNlYycpLCB3aW5kb3cuaXNTZWN1cmVDb250ZXh0KTsKICBwaWxsKGVsKCdkLWRvJyksICdvbmRldmljZW9yaWVudGF0aW9uJyBpbiB3aW5kb3cpOwogIHBpbGwoZWwoJ2QtZG0nKSwgJ29uZGV2aWNlbW90aW9uJyBpbiB3aW5kb3cpOwogIGNvbnN0IGdzID0gISEod2luZG93LkFjY2VsZXJvbWV0ZXIgfHwgd2luZG93Lkd5cm9zY29wZSB8fCB3aW5kb3cuTWFnbmV0b21ldGVyIHx8IHdpbmRvdy5BYnNvbHV0ZU9yaWVudGF0aW9uU2Vuc29yKTsKICBwaWxsKGVsKCdkLWdzJyksIGdzKTsKICBwaWxsKGVsKCdkLW1hZycpLCAhIXdpbmRvdy5NYWduZXRvbWV0ZXIpOwogIHBpbGwoZWwoJ2QtZ3lybycpLCAhIXdpbmRvdy5HeXJvc2NvcGUpOwogIHBpbGwoZWwoJ2QtYWNjJyksICEhd2luZG93LkFjY2VsZXJvbWV0ZXIpOwogIHBpbGwoZWwoJ2QtYW9zJyksICEhd2luZG93LkFic29sdXRlT3JpZW50YXRpb25TZW5zb3IpOwogIHRyeXsKICAgIGlmIChuYXZpZ2F0b3IucGVybWlzc2lvbnMgJiYgbmF2aWdhdG9yLnBlcm1pc3Npb25zLnF1ZXJ5KXsKICAgICAgbmF2aWdhdG9yLnBlcm1pc3Npb25zLnF1ZXJ5KHtuYW1lOidhY2NlbGVyb21ldGVyJ30pLnRoZW4ocj0+IGVsKCdkLW1zJykudGV4dENvbnRlbnQgPSByLnN0YXRlKS5jYXRjaCgoKT0+IGVsKCdkLW1zJykudGV4dENvbnRlbnQgPSAidW5rbm93biIpOwogICAgfSBlbHNlIHsKICAgICAgZWwoJ2QtbXMnKS50ZXh0Q29udGVudCA9ICJ1bmtub3duIjsKICAgIH0KICB9Y2F0Y2goZSl7IGVsKCdkLW1zJykudGV4dENvbnRlbnQgPSAidW5rbm93biI7IH0KfQpkaWFnSW5pdCgpOwoKLy8gLS0tIEFuY2hvciAtLS0KZnVuY3Rpb24gdXBkYXRlQW5jaG9yUGlsbCgpeyBjb25zdCBwID0gZWwoJ2FuY2hvclBpbGwnKTsgaWYoIWFuY2hvcil7IHAudGV4dENvbnRlbnQgPSAibm90IHNldCI7IHAuY2xhc3NOYW1lID0gInBpbGwgaW5mbyI7IH0gZWxzZSB7IHAudGV4dENvbnRlbnQgPSBhbmNob3IubGF0LnRvRml4ZWQoNikrIiwgIithbmNob3IubG9uLnRvRml4ZWQoNikrIiAoIithbmNob3Iuc3JjKyIpIjsgcC5jbGFzc05hbWUgPSAicGlsbCBvayI7IH0gfQplbCgndXNlU3RhcmxpbmsnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57IGFuY2hvciA9IHsgbGF0OiBSRUYubGF0LCBsb246IFJFRi5sb24sIHNyYzoic3RhcmxpbmsiIH07IGN1ciA9IHsgbGF0OiBhbmNob3IubGF0LCBsb246IGFuY2hvci5sb24sIGhlYWRpbmc6MCwgc3RlcHM6MCB9OyB1cGRhdGVBbmNob3JQaWxsKCk7IGRyYXcoKTsgfSk7CmVsKCdnZXRHUFMnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57CiAgaWYoIW5hdmlnYXRvci5nZW9sb2NhdGlvbil7IGVsKCdzdGF0JykudGV4dENvbnRlbnQgPSAiR1BTIG5vdCBzdXBwb3J0ZWQiOyByZXR1cm47IH0KICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKHBvcz0+ewogICAgY29uc3Qge2xhdGl0dWRlLCBsb25naXR1ZGUsIGFjY3VyYWN5fSA9IHBvcy5jb29yZHM7CiAgICBhbmNob3IgPSB7IGxhdDogbGF0aXR1ZGUsIGxvbjogbG9uZ2l0dWRlLCBhY2M6IGFjY3VyYWN5LCBzcmM6ImRldmljZSIgfTsKICAgIGN1ciA9IHsgbGF0OiBhbmNob3IubGF0LCBsb246IGFuY2hvci5sb24sIGhlYWRpbmc6MCwgc3RlcHM6MCB9OwogICAgdXBkYXRlQW5jaG9yUGlsbCgpOyBlbCgnZ2FjYycpLnRleHRDb250ZW50ID0gTWF0aC5yb3VuZChhY2N1cmFjeSk7CiAgICBkcmF3KCk7CiAgfSwgZXJyPT4gZWwoJ3N0YXQnKS50ZXh0Q29udGVudCA9ICJHUFMgZXJyb3I6ICIrZXJyLm1lc3NhZ2UsIHtlbmFibGVIaWdoQWNjdXJhY3k6dHJ1ZSwgbWF4aW11bUFnZTo1MDAwLCB0aW1lb3V0OjEyMDAwfSk7Cn0pOwoKLy8gLS0tIFNlbnNvciBoYW5kbGluZyAtLS0KbGV0IHNtb290aGVkSGVhZGluZyA9IDA7CmZ1bmN0aW9uIG5vcm1hbGl6ZShhKXsgYSA9IGElMzYwOyBpZihhPDApIGErPTM2MDsgcmV0dXJuIGE7IH0KZnVuY3Rpb24gc21vb3RoSGVhZGluZyhuZXdILCBhbHBoYSl7IGxldCBkaCA9IG5ld0ggLSBzbW9vdGhlZEhlYWRpbmc7IGlmKGRoID4gMTgwKSBkaCAtPSAzNjA7IGVsc2UgaWYoZGggPCAtMTgwKSBkaCArPSAzNjA7IHNtb290aGVkSGVhZGluZyA9IG5vcm1hbGl6ZShzbW9vdGhlZEhlYWRpbmcgKyBhbHBoYSpkaCk7IHJldHVybiBzbW9vdGhlZEhlYWRpbmc7IH0KCmxldCB1c2VHZW5lcmljID0gZmFsc2U7CmxldCBhY2NlbFNlbnNvcj1udWxsLCBhb3M9bnVsbDsKbGV0IGxhc3RTdGVwVCA9IDA7CmxldCBkeW5hbWljVGhyZXNob2xkID0gcGFyc2VGbG9hdChlbCgndGhyZXNoJykudmFsdWV8fCIxMS41Iik7CmVsKCd0aHJlc2gnKS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpPT57IGR5bmFtaWNUaHJlc2hvbGQgPSBwYXJzZUZsb2F0KGVsKCd0aHJlc2gnKS52YWx1ZSk7IGVsKCd0aHJlc2hWYWwnKS50ZXh0Q29udGVudCA9IGR5bmFtaWNUaHJlc2hvbGQudG9GaXhlZCgxKTsgfSk7Cgphc3luYyBmdW5jdGlvbiBlbmFibGVTZW5zb3JzKCl7CiAgdHJ5ewogICAgaWYgKHR5cGVvZiBEZXZpY2VNb3Rpb25FdmVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIERldmljZU1vdGlvbkV2ZW50LnJlcXVlc3RQZXJtaXNzaW9uID09PSAnZnVuY3Rpb24nKSB7IGF3YWl0IERldmljZU1vdGlvbkV2ZW50LnJlcXVlc3RQZXJtaXNzaW9uKCkuY2F0Y2goKCk9Pnt9KTsgfQogICAgaWYgKHR5cGVvZiBEZXZpY2VPcmllbnRhdGlvbkV2ZW50ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgRGV2aWNlT3JpZW50YXRpb25FdmVudC5yZXF1ZXN0UGVybWlzc2lvbiA9PT0gJ2Z1bmN0aW9uJykgeyBhd2FpdCBEZXZpY2VPcmllbnRhdGlvbkV2ZW50LnJlcXVlc3RQZXJtaXNzaW9uKCkuY2F0Y2goKCk9Pnt9KTsgfQogIH1jYXRjaChlKXsgLyppZ25vcmUqLyB9CiAgdHJ5ewogICAgaWYod2luZG93LkFic29sdXRlT3JpZW50YXRpb25TZW5zb3IpewogICAgICBhb3MgPSBuZXcgQWJzb2x1dGVPcmllbnRhdGlvblNlbnNvcih7ZnJlcXVlbmN5OiAzMH0pOwogICAgICBhb3MuYWRkRXZlbnRMaXN0ZW5lcigncmVhZGluZycsICgpPT57CiAgICAgICAgY29uc3QgcSA9IGFvcy5xdWF0ZXJuaW9uOyBpZighcSkgcmV0dXJuOwogICAgICAgIGNvbnN0IFt4LHkseix3XSA9IHE7CiAgICAgICAgY29uc3Qgc2lueV9jb3NwID0gMioodyp6ICsgeCp5KTsKICAgICAgICBjb25zdCBjb3N5X2Nvc3AgPSAxIC0gMiooeSp5ICsgeip6KTsKICAgICAgICBsZXQgeWF3ID0gTWF0aC5hdGFuMihzaW55X2Nvc3AsIGNvc3lfY29zcCk7CiAgICAgICAgbGV0IGhlYWRpbmcgPSBub3JtYWxpemUoeWF3KjE4MC9NYXRoLlBJKTsKICAgICAgICBjb25zdCBkZWNsID0gcGFyc2VGbG9hdChlbCgnZGVjbCcpLnZhbHVlfHwiMCIpOwogICAgICAgIGhlYWRpbmcgPSBub3JtYWxpemUoaGVhZGluZyArIGRlY2wpOwogICAgICAgIGNvbnN0IGFscGhhID0gcGFyc2VGbG9hdChlbCgnaGVhZFNtb290aCcpLnZhbHVlfHwiMC44NSIpOwogICAgICAgIGNvbnN0IGggPSBzbW9vdGhIZWFkaW5nKGhlYWRpbmcsIDEtYWxwaGEpOwogICAgICAgIGVsKCdtYWcnKS50ZXh0Q29udGVudCA9IGhlYWRpbmcudG9GaXhlZCgwKTsKICAgICAgICBlbCgnaGVhZGluZycpLnRleHRDb250ZW50ID0gaC50b0ZpeGVkKDApOwogICAgICAgIGlmKGN1cil7IGN1ci5oZWFkaW5nID0gaDsgfQogICAgICB9KTsKICAgICAgYW9zLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZT0+eyBlbCgnZC1lcnInKS50ZXh0Q29udGVudCA9ICJBT1MgZXJyb3I6ICIrKGUuZXJyb3I/Lm1lc3NhZ2V8fGUubWVzc2FnZXx8ZSk7IH0pOwogICAgICBhb3Muc3RhcnQoKTsgdXNlR2VuZXJpYyA9IHRydWU7CiAgICB9CiAgICBpZih3aW5kb3cuQWNjZWxlcm9tZXRlcil7CiAgICAgIGFjY2VsU2Vuc29yID0gbmV3IEFjY2VsZXJvbWV0ZXIoe2ZyZXF1ZW5jeTogNTB9KTsKICAgICAgYWNjZWxTZW5zb3IuYWRkRXZlbnRMaXN0ZW5lcigncmVhZGluZycsICgpPT57CiAgICAgICAgY29uc3QgZyA9IE1hdGguc3FydCgoYWNjZWxTZW5zb3IueHx8MCkqKjIgKyAoYWNjZWxTZW5zb3IueXx8MCkqKjIgKyAoYWNjZWxTZW5zb3Iuenx8MCkqKjIpOwogICAgICAgIGVsKCdnbWFnJykudGV4dENvbnRlbnQgPSBnLnRvRml4ZWQoMik7CiAgICAgICAgaWYoIXJ1bm5pbmcpIHJldHVybjsKICAgICAgICBjb25zdCBub3cgPSBwZXJmb3JtYW5jZS5ub3coKTsKICAgICAgICBpZihnID4gZHluYW1pY1RocmVzaG9sZCAmJiAobm93IC0gbGFzdFN0ZXBUKSA+IDI1MCl7IGxhc3RTdGVwVCA9IG5vdzsgc3RlcCgpOyB9CiAgICAgIH0pOwogICAgICBhY2NlbFNlbnNvci5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGU9PnsgZWwoJ2QtZXJyJykudGV4dENvbnRlbnQgPSAiQWNjIGVycm9yOiAiKyhlLmVycm9yPy5tZXNzYWdlfHxlLm1lc3NhZ2V8fGUpOyB9KTsKICAgICAgYWNjZWxTZW5zb3Iuc3RhcnQoKTsKICAgIH0KICB9Y2F0Y2goZSl7IGVsKCdkLWVycicpLnRleHRDb250ZW50ID0gIkdlbmVyaWMgc2Vuc29ycyBibG9ja2VkOiAiICsgKGUubWVzc2FnZXx8ZSk7IH0KCiAgaWYoIXVzZUdlbmVyaWMpewogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2RldmljZW9yaWVudGF0aW9uYWJzb2x1dGUnLCAoZSk9PnsKICAgICAgY29uc3QgZGVjbCA9IHBhcnNlRmxvYXQoZWwoJ2RlY2wnKS52YWx1ZXx8IjAiKTsKICAgICAgbGV0IG1hZyA9IGUuYWxwaGE7IGlmKG1hZz09bnVsbCkgcmV0dXJuOwogICAgICBsZXQgdHJ1ZUggPSBub3JtYWxpemUobWFnICsgZGVjbCk7CiAgICAgIGNvbnN0IGFscGhhID0gcGFyc2VGbG9hdChlbCgnaGVhZFNtb290aCcpLnZhbHVlfHwiMC44NSIpOwogICAgICBjb25zdCBoID0gc21vb3RoSGVhZGluZyh0cnVlSCwgMS1hbHBoYSk7CiAgICAgIGVsKCdtYWcnKS50ZXh0Q29udGVudCA9ICh0cnVlSCkudG9GaXhlZCgwKTsKICAgICAgZWwoJ2hlYWRpbmcnKS50ZXh0Q29udGVudCA9IGgudG9GaXhlZCgwKTsKICAgICAgaWYoY3VyKXsgY3VyLmhlYWRpbmcgPSBoOyB9CiAgICB9LCB0cnVlKTsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdkZXZpY2VvcmllbnRhdGlvbicsIChlKT0+ewogICAgICBpZiAoZS5hYnNvbHV0ZSkgcmV0dXJuOwogICAgICBjb25zdCBkZWNsID0gcGFyc2VGbG9hdChlbCgnZGVjbCcpLnZhbHVlfHwiMCIpOwogICAgICBsZXQgbWFnID0gZS5hbHBoYTsgaWYobWFnPT1udWxsKSByZXR1cm47CiAgICAgIGxldCB0cnVlSCA9IG5vcm1hbGl6ZShtYWcgKyBkZWNsKTsKICAgICAgY29uc3QgYWxwaGEgPSBwYXJzZUZsb2F0KGVsKCdoZWFkU21vb3RoJykudmFsdWV8fCIwLjg1Iik7CiAgICAgIGNvbnN0IGggPSBzbW9vdGhIZWFkaW5nKHRydWVILCAxLWFscGhhKTsKICAgICAgZWwoJ21hZycpLnRleHRDb250ZW50ID0gKHRydWVIKS50b0ZpeGVkKDApOwogICAgICBlbCgnaGVhZGluZycpLnRleHRDb250ZW50ID0gaC50b0ZpeGVkKDApOwogICAgICBpZihjdXIpeyBjdXIuaGVhZGluZyA9IGg7IH0KICAgIH0sIHRydWUpOwogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2RldmljZW1vdGlvbicsIChlKT0+ewogICAgICBjb25zdCBhID0gZS5hY2NlbGVyYXRpb25JbmNsdWRpbmdHcmF2aXR5OyBpZighYSkgcmV0dXJuOwogICAgICBjb25zdCBnID0gTWF0aC5zcXJ0KChhLnh8fDApKioyICsgKGEueXx8MCkqKjIgKyAoYS56fHwwKSoqMik7CiAgICAgIGVsKCdnbWFnJykudGV4dENvbnRlbnQgPSBnLnRvRml4ZWQoMik7CiAgICAgIGlmKCFydW5uaW5nKSByZXR1cm47CiAgICAgIGNvbnN0IG5vdyA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgICBpZihnID4gZHluYW1pY1RocmVzaG9sZCAmJiAobm93IC0gbGFzdFN0ZXBUKSA+IDI1MCl7IGxhc3RTdGVwVCA9IG5vdzsgc3RlcCgpOyB9CiAgICB9LCB0cnVlKTsKICB9CiAgZWwoJ3N0YXQnKS50ZXh0Q29udGVudCA9ICh1c2VHZW5lcmljPyAic2Vuc29yczogZ2VuZXJpYyI6InNlbnNvcnM6IGxlZ2FjeSIpICsgKHdpbmRvdy5pc1NlY3VyZUNvbnRleHQgPyAiIiA6ICIgKG5vbi1zZWN1cmU6IHNvbWUgc2Vuc29ycyBtYXkgYmUgYmxvY2tlZCkiKTsKfQplbCgncGVybScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZW5hYmxlU2Vuc29ycyk7CgovLyBDYWxpYnJhdGlvbjogaG9sZCBzdGlsbCBmb3IgMyBzCmVsKCdjYWxpYicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PnsKICBjb25zdCBzYW1wbGVzID0gW107IGNvbnN0IHQwID0gcGVyZm9ybWFuY2Uubm93KCk7CiAgZnVuY3Rpb24gb25SZWFkKGcpewogICAgc2FtcGxlcy5wdXNoKGcpOwogICAgaWYocGVyZm9ybWFuY2Uubm93KCkgLSB0MCA+PSAzMDAwKXsKICAgICAgY29uc3QgbWVhbiA9IHNhbXBsZXMucmVkdWNlKChzLHgpPT5zK3gsMCkvTWF0aC5tYXgoMSxzYW1wbGVzLmxlbmd0aCk7CiAgICAgIGR5bmFtaWNUaHJlc2hvbGQgPSBtZWFuICsgMi4wOwogICAgICBlbCgndGhyZXNoJykudmFsdWUgPSBkeW5hbWljVGhyZXNob2xkOyBlbCgndGhyZXNoVmFsJykudGV4dENvbnRlbnQgPSBkeW5hbWljVGhyZXNob2xkLnRvRml4ZWQoMSk7CiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdkZXZpY2Vtb3Rpb24nLCBkbUxpc3RlbmVyLCB0cnVlKTsKICAgICAgZWwoJ2QtZXJyJykudGV4dENvbnRlbnQgPSAiQ2FsaWJyYXRlZCB0aHJlc2hvbGQgdG8gIiArIGR5bmFtaWNUaHJlc2hvbGQudG9GaXhlZCgyKTsKICAgIH0KICB9CiAgZnVuY3Rpb24gZG1MaXN0ZW5lcihlKXsKICAgIGNvbnN0IGEgPSBlLmFjY2VsZXJhdGlvbkluY2x1ZGluZ0dyYXZpdHl8fHt9OyBjb25zdCBnID0gTWF0aC5zcXJ0KChhLnh8fDApKioyICsgKGEueXx8MCkqKjIgKyAoYS56fHwwKSoqMik7CiAgICBvblJlYWQoZyk7CiAgfQogIGlmKHdpbmRvdy5BY2NlbGVyb21ldGVyKXsKICAgIGNvbnN0IHMgPSBuZXcgQWNjZWxlcm9tZXRlcih7ZnJlcXVlbmN5OiA1MH0pOwogICAgcy5hZGRFdmVudExpc3RlbmVyKCdyZWFkaW5nJywgKCk9PiBvblJlYWQoTWF0aC5zcXJ0KChzLnh8fDApKioyICsgKHMueXx8MCkqKjIgKyAocy56fHwwKSoqMikpKTsKICAgIHMuc3RhcnQoKTsKICAgIHNldFRpbWVvdXQoKCk9PnsgdHJ5e3Muc3RvcCgpO31jYXRjaHt9IH0sIDMxMDApOwogIH1lbHNlewogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2RldmljZW1vdGlvbicsIGRtTGlzdGVuZXIsIHRydWUpOwogICAgc2V0VGltZW91dCgoKT0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdkZXZpY2Vtb3Rpb24nLCBkbUxpc3RlbmVyLCB0cnVlKSwgMzEwMCk7CiAgfQp9KTsKCi8vIFRhcC10by1zdGVwIHRlc3QKZWwoJ3RhcFN0ZXAnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT4gc3RlcCgpKTsKCi8vIC0tLSBTdGVwICYgR1BTIC0tLQpmdW5jdGlvbiBzdGVwKCl7CiAgaWYoIWN1cikgcmV0dXJuOwogIGNvbnN0IHN0ZXBMZW4gPSBNYXRoLm1heCgwLjMsIHBhcnNlRmxvYXQoZWwoJ3N0ZXBMZW4nKS52YWx1ZXx8IjAuNzUiKSk7CiAgY3VyLnN0ZXBzID0gKGN1ci5zdGVwc3x8MCkgKyAxOwogIGNvbnN0IG5leHQgPSBhZGRPZmZzZXQoY3VyLmxhdCwgY3VyLmxvbiwgc3RlcExlbiwgY3VyLmhlYWRpbmd8fDApOwogIGN1ci5sYXQgPSBuZXh0LmxhdDsgY3VyLmxvbiA9IG5leHQubG9uOwogIHBvaW50cy5wdXNoKHsgdDogRGF0ZS5ub3coKSwgbGF0OiBjdXIubGF0LCBsb246IGN1ci5sb24sIHNyYzoncGRyJywgaGVhZGluZzogY3VyLmhlYWRpbmd8fDAsIHN0ZXBzOiBjdXIuc3RlcHMgfSk7CiAgZWwoJ3N0ZXBzJykudGV4dENvbnRlbnQgPSBjdXIuc3RlcHM7CiAgZHJhdygpOwp9CgpmdW5jdGlvbiBzdGFydEdQU1dhdGNoKCl7CiAgaWYoIW5hdmlnYXRvci5nZW9sb2NhdGlvbikgcmV0dXJuOwogIHdhdGNoSWQgPSBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24ud2F0Y2hQb3NpdGlvbihwb3M9PnsKICAgIGNvbnN0IHtsYXRpdHVkZSwgbG9uZ2l0dWRlLCBhY2N1cmFjeSwgc3BlZWR9ID0gcG9zLmNvb3JkczsKICAgIGxhc3RHUFMgPSB7IGxhdDogbGF0aXR1ZGUsIGxvbjogbG9uZ2l0dWRlLCBhY2M6IGFjY3VyYWN5LCBzcGQ6IHNwZWVkfHwwLCB0OiBEYXRlLm5vdygpIH07CiAgICBlbCgnZ2FjYycpLnRleHRDb250ZW50ID0gYWNjdXJhY3kgPyBNYXRoLnJvdW5kKGFjY3VyYWN5KSA6ICLigJQiOwogICAgZWwoJ3NwZCcpLnRleHRDb250ZW50ID0gaXNGaW5pdGUoc3BlZWQpID8gKHNwZWVkfHwwKS50b0ZpeGVkKDIpIDogIuKAlCI7CiAgICBjb25zdCBzbmFwID0gcGFyc2VGbG9hdChlbCgnZ3BzU25hcCcpLnZhbHVlfHwiOCIpOwogICAgaWYoc25hcCAmJiBhY2N1cmFjeSAmJiBhY2N1cmFjeSA8PSBzbmFwKXsKICAgICAgaWYoY3VyKXsKICAgICAgICBjdXIubGF0ID0gKGN1ci5sYXQqMyArIGxhdGl0dWRlKS80OwogICAgICAgIGN1ci5sb24gPSAoY3VyLmxvbiozICsgbG9uZ2l0dWRlKS80OwogICAgICAgIHBvaW50cy5wdXNoKHsgdDogRGF0ZS5ub3coKSwgbGF0OiBsYXRpdHVkZSwgbG9uOiBsb25naXR1ZGUsIHNyYzonZ3BzJywgaGVhZGluZzogY3VyLmhlYWRpbmd8fDAsIHN0ZXBzOiBjdXIuc3RlcHN8fDAgfSk7CiAgICAgICAgZHJhdygpOwogICAgICB9CiAgICB9CiAgfSwgZXJyPT57fSwge2VuYWJsZUhpZ2hBY2N1cmFjeTp0cnVlLCBtYXhpbXVtQWdlOjIwMDAsIHRpbWVvdXQ6MTIwMDB9KTsKfQpmdW5jdGlvbiBzdG9wR1BTV2F0Y2goKXsgaWYod2F0Y2hJZCE9bnVsbCl7IG5hdmlnYXRvci5nZW9sb2NhdGlvbi5jbGVhcldhdGNoKHdhdGNoSWQpOyB3YXRjaElkPW51bGw7IH0gfQplbCgnc25hcE5vdycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PnsgaWYobGFzdEdQUyAmJiBjdXIpeyBjdXIubGF0ID0gbGFzdEdQUy5sYXQ7IGN1ci5sb24gPSBsYXN0R1BTLmxvbjsgcG9pbnRzLnB1c2goeyB0OiBEYXRlLm5vdygpLCBsYXQ6IGN1ci5sYXQsIGxvbjogY3VyLmxvbiwgc3JjOidncHMnLCBoZWFkaW5nOiBjdXIuaGVhZGluZ3x8MCwgc3RlcHM6IGN1ci5zdGVwc3x8MCB9KTsgZHJhdygpOyB9IH0pOwoKLy8gLS0tIENvbnRyb2xzIC0tLQplbCgnc3RhcnQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57IGlmKCFhbmNob3IpeyBhbGVydCgiU2V0IGFuY2hvciBmaXJzdC4iKTsgcmV0dXJuOyB9IGlmKCFjdXIpIGN1ciA9IHsgbGF0OiBhbmNob3IubGF0LCBsb246IGFuY2hvci5sb24sIGhlYWRpbmc6IDAsIHN0ZXBzOiAwIH07IHJ1bm5pbmcgPSB0cnVlOyBlbCgnc3RhdCcpLnRleHRDb250ZW50ID0gInJ1bm5pbmciOyBzdGFydEdQU1dhdGNoKCk7IH0pOwplbCgncGF1c2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57IHJ1bm5pbmcgPSBmYWxzZTsgZWwoJ3N0YXQnKS50ZXh0Q29udGVudCA9ICJwYXVzZWQiOyBzdG9wR1BTV2F0Y2goKTsgfSk7CmVsKCdyZXNldCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PnsgcnVubmluZyA9IGZhbHNlOyBzdG9wR1BTV2F0Y2goKTsgcG9pbnRzID0gW107IGN1ciA9IGFuY2hvciA/IHsgbGF0OiBhbmNob3IubGF0LCBsb246IGFuY2hvci5sb24sIGhlYWRpbmc6MCwgc3RlcHM6MCB9IDogbnVsbDsgZWwoJ3N0ZXBzJykudGV4dENvbnRlbnQgPSAiMCI7IGVsKCdzdGF0JykudGV4dENvbnRlbnQgPSAiaWRsZSI7IGRyYXcoKTsgfSk7CgovLyAtLS0gRHJhd2luZyAtLS0KY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpOyBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKZnVuY3Rpb24gcmVzaXplQ2FudmFzKCl7IGNvbnN0IHIgPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxOyBjYW52YXMud2lkdGggPSBNYXRoLmZsb29yKGNhbnZhcy5jbGllbnRXaWR0aCAqIHIpOyBjYW52YXMuaGVpZ2h0ID0gTWF0aC5mbG9vcihjYW52YXMuY2xpZW50SGVpZ2h0ICogcik7IH0Kd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpPT57IHJlc2l6ZUNhbnZhcygpOyBkcmF3KCk7IH0pOyByZXNpemVDYW52YXMoKTsKZnVuY3Rpb24gbGF0bG9uVG9Mb2NhbChsYXQsIGxvbiwgcmVmTGF0LCByZWZMb24peyBjb25zdCB7bWxhdCwgbWxvbn0gPSBtZXRlcnNQZXJEZWcocmVmTGF0KTsgY29uc3QgZHggPSAobG9uIC0gcmVmTG9uKSAqIG1sb247IGNvbnN0IGR5ID0gKGxhdCAtIHJlZkxhdCkgKiBtbGF0OyByZXR1cm4ge3g6IGR4LCB5OiBkeX07IH0KZnVuY3Rpb24gZHJhdygpewogIHJlc2l6ZUNhbnZhcygpOyBjdHguY2xlYXJSZWN0KDAsMCxjYW52YXMud2lkdGgsY2FudmFzLmhlaWdodCk7IGNvbnN0IHcgPSBjYW52YXMud2lkdGgsIGggPSBjYW52YXMuaGVpZ2h0OyBjdHguc2F2ZSgpOwogIGxldCBjZW50ZXIgPSBhbmNob3IgfHwge2xhdDogUkVGLmxhdCwgbG9uOiBSRUYubG9ufTsgaWYoY3VyKXsgY2VudGVyID0geyBsYXQ6IGN1ci5sYXQsIGxvbjogY3VyLmxvbiB9OyB9CiAgY29uc3QgbG9jYWxQdHMgPSBwb2ludHMubWFwKHAgPT4gKHsuLi5wLCAuLi5sYXRsb25Ub0xvY2FsKHAubGF0LHAubG9uLCBjZW50ZXIubGF0LCBjZW50ZXIubG9uKX0pKTsKICBjb25zdCBtUGVyUGl4ID0gMC4yICogTWF0aC5tYXgoMSwgIChNYXRoLm1heCgxMCwgbG9jYWxQdHMucmVkdWNlKChNLHApPT5NYXRoLm1heChNLCBNYXRoLmh5cG90KHAueCxwLnkpKSwgMCkpIC8gKE1hdGgubWluKHcsaCkvMykpICk7CiAgY29uc3QgZ3JpZFN0ZXAgPSA1OyBjb25zdCBweFBlck1ldGVyID0gMSAvIG1QZXJQaXg7CiAgY3R4LnN0cm9rZVN0eWxlID0gIiMxZTI5M2IiOyBjdHgubGluZVdpZHRoID0gMTsgY3R4LmJlZ2luUGF0aCgpOwogIGZvcihsZXQgZ3g9LTEwMDsgZ3g8PTEwMDsgZ3grPWdyaWRTdGVwKXsgY29uc3QgeCA9IHcvMiArIGd4KnB4UGVyTWV0ZXI7IGN0eC5tb3ZlVG8oeCwgMCk7IGN0eC5saW5lVG8oeCwgaCk7IH0KICBmb3IobGV0IGd5PS0xMDA7IGd5PD0xMDA7IGd5Kz1ncmlkU3RlcCl7IGNvbnN0IHkgPSBoLzIgLSBneSpweFBlck1ldGVyOyBjdHgubW92ZVRvKDAsIHkpOyBjdHgubGluZVRvKHcsIHkpOyB9CiAgY3R4LnN0cm9rZSgpOwogIGN0eC5saW5lV2lkdGggPSAzOyBjdHguc3Ryb2tlU3R5bGUgPSAiIzE2YTM0YSI7IGN0eC5iZWdpblBhdGgoKTsKICBsb2NhbFB0cy5maWx0ZXIocD0+cC5zcmM9PT0nZ3BzJykuZm9yRWFjaCgocCxpKT0+eyBjb25zdCB4ID0gdy8yICsgcC54KnB4UGVyTWV0ZXIsIHkgPSBoLzIgLSBwLnkqcHhQZXJNZXRlcjsgaWYoaT09PTApIGN0eC5tb3ZlVG8oeCx5KTsgZWxzZSBjdHgubGluZVRvKHgseSk7IH0pOyBjdHguc3Ryb2tlKCk7CiAgY3R4LnN0cm9rZVN0eWxlID0gIiM2MGE1ZmEiOyBjdHguYmVnaW5QYXRoKCk7CiAgbG9jYWxQdHMuZmlsdGVyKHA9PnAuc3JjPT09J3BkcicpLmZvckVhY2goKHAsaSk9PnsgY29uc3QgeCA9IHcvMiArIHAueCpweFBlck1ldGVyLCB5ID0gaC8yIC0gcC55KnB4UGVyTWV0ZXI7IGlmKGk9PT0wKSBjdHgubW92ZVRvKHgseSk7IGVsc2UgY3R4LmxpbmVUbyh4LHkpOyB9KTsgY3R4LnN0cm9rZSgpOwogIGlmKGN1cil7IGNvbnN0IGMgPSBsYXRsb25Ub0xvY2FsKGN1ci5sYXQsIGN1ci5sb24sIGNlbnRlci5sYXQsIGNlbnRlci5sb24pOyBjb25zdCB4ID0gdy8yICsgYy54KnB4UGVyTWV0ZXIsIHkgPSBoLzIgLSBjLnkqcHhQZXJNZXRlcjsgY3R4LmZpbGxTdHlsZSA9ICIjZWY0NDQ0IjsgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKHgseSw2LDAsTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsgY29uc3QgYnJnID0gKGN1ci5oZWFkaW5nfHwwKSpNYXRoLlBJLzE4MDsgY3R4LnN0cm9rZVN0eWxlID0gIiNlZjQ0NDQiOyBjdHgubGluZVdpZHRoID0gMjsgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKHgseSk7IGN0eC5saW5lVG8oeCtNYXRoLnNpbihicmcpKjIwLCB5LU1hdGguY29zKGJyZykqMjApOyBjdHguc3Ryb2tlKCk7IH0KICBjdHgucmVzdG9yZSgpOwp9CgovLyAtLS0gRXhwb3J0IC0tLQpmdW5jdGlvbiBkb3dubG9hZChuYW1lLCBkYXRhLCB0eXBlPSdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nKXsgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtkYXRhXSwge3R5cGV9KTsgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsgYS5ocmVmID0gdXJsOyBhLmRvd25sb2FkID0gbmFtZTsgYS5jbGljaygpOyBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7IH0KZWwoJ2V4cG9ydEdlbycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PnsgY29uc3QgZmMgPSB7IHR5cGU6ICJGZWF0dXJlQ29sbGVjdGlvbiIsIGZlYXR1cmVzOiBbIHsgdHlwZTogIkZlYXR1cmUiLCBwcm9wZXJ0aWVzOiB7IG5hbWU6ICJQRFIgcGF0aCIgfSwgZ2VvbWV0cnk6IHsgdHlwZTogIkxpbmVTdHJpbmciLCBjb29yZGluYXRlczogcG9pbnRzLm1hcChwPT5bcC5sb24sIHAubGF0XSkgfSB9IF0gfTsgZG93bmxvYWQoImVoMTAwMzAwNl9wZHJfcGF0aF92MF8zXzIuZ2VvanNvbiIsIEpTT04uc3RyaW5naWZ5KGZjLCBudWxsLCAyKSwgImFwcGxpY2F0aW9uL2dlbytqc29uIik7IH0pOwplbCgnZXhwb3J0Q1NWJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+eyBjb25zdCBjc3YgPSAidCxsYXQsbG9uLHNyYyxoZWFkaW5nLHN0ZXBzXG4iICsgcG9pbnRzLm1hcChwPT5bcC50LHAubGF0LHAubG9uLHAuc3JjLHAuaGVhZGluZz8/IiIscC5zdGVwcz8/IiJdLmpvaW4oIiwiKSkuam9pbigiXG4iKTsgZG93bmxvYWQoImVoMTAwMzAwNl9wZHJfcGF0aF92MF8zXzIuY3N2IiwgY3N2LCAidGV4dC9jc3YiKTsgfSk7Cjwvc2NyaXB0Pgo8L2JvZHk+CjwvaHRtbD4K"   }
    };

    let ACTIVE_SITE = (localStorage.getItem(KEY) === "Canby") ? "Canby" : "EH1003006";
    let ACTIVE_TOOL = "planner";

    const tabWA = document.getElementById('tabWA'), tabOR = document.getElementById('tabOR'), metaEl = document.getElementById('siteMeta'), qsTitle = document.getElementById('qsTitle');
    const frame = document.getElementById('frame'), loading = document.getElementById('loading'), statusEl = document.getElementById('status');
    const chips = { planner: document.getElementById('chip-planner'), intake: document.getElementById('chip-intake'), pdr: document.getElementById('chip-pdr') };
    const tiles =  { planner: document.getElementById('tile-planner'), intake: document.getElementById('tile-intake'), pdr: document.getElementById('tile-pdr') };

    function setSite(id, autoOpen=true){
      ACTIVE_SITE = (id === "Canby") ? "Canby" : "EH1003006";
      localStorage.setItem(KEY, ACTIVE_SITE);
      const wa = ACTIVE_SITE === "EH1003006";
      tabWA.classList.toggle("active", wa); tabWA.setAttribute("aria-selected", String(wa));
      tabOR.classList.toggle("active", !wa); tabOR.setAttribute("aria-selected", String(!wa));
      metaEl.textContent = SITES[ACTIVE_SITE].meta;
      qsTitle.textContent = "Quick Start ‚Äî " + SITES[ACTIVE_SITE].name;
      document.getElementById('plannerLabel').textContent = "Planner " + SITES[ACTIVE_SITE].tag;
      document.getElementById('intakeLabel').textContent  = "Field Intake " + SITES[ACTIVE_SITE].tag;
      document.getElementById('pdrLabel').textContent     = "PDR Navigator " + SITES[ACTIVE_SITE].tag;
      if (autoOpen) openTool(ACTIVE_TOOL || 'planner', true);
      updateStatus();
    }

    function decodeUTF8(b64){ const bin = atob(b64), len = bin.length, bytes = new Uint8Array(len); for (let i=0;i<len;i++) bytes[i]=bin.charCodeAt(i); return new TextDecoder('utf-8').decode(bytes); }
    function injectSite(html, site){
      const setter = '<script>try{ localStorage.setItem("'+KEY+'","'+site+'"); }catch(e){}</'+'script>';
      const i = html.indexOf('<head>'); return (i !== -1) ? html.slice(0,i+6)+setter+html.slice(i+6) : setter+html;
    }

    function updateStatus(){
      statusEl.innerHTML = 'Active: <b>'+SITES[ACTIVE_SITE].name+'</b> ‚Ä¢ <b>'+ (ACTIVE_TOOL.charAt(0).toUpperCase()+ACTIVE_TOOL.slice(1)) +'</b>';
      ['planner','intake','pdr'].forEach(k => {
        if (chips[k]) chips[k].classList.toggle('active', k===ACTIVE_TOOL);
        if (tiles[k]) tiles[k].classList.toggle('selected', k===ACTIVE_TOOL);
        if (chips[k]) chips[k].setAttribute('aria-pressed', String(k===ACTIVE_TOOL));
      });
    }

    function openTool(which, fromSiteChange=false){
      ACTIVE_TOOL = which;
      localStorage.setItem(KEY, ACTIVE_SITE);
      const b64 = (SRC[which] && SRC[which][ACTIVE_SITE]) ? SRC[which][ACTIVE_SITE] : "";
      if (!b64) return;
      loading.style.display = 'flex';
      let html = decodeUTF8(b64);
      html = injectSite(html, ACTIVE_SITE);
      const blob = new Blob([new TextEncoder().encode(html)], { type:'text/html' });
      const url = URL.createObjectURL(blob);
      frame.onload = function(){ loading.style.display='none'; URL.revokeObjectURL(url); };
      frame.src = url;
      updateStatus();
      if (!fromSiteChange) window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
    }

    tabWA.addEventListener('click', () => setSite('EH1003006', true));
    tabOR.addEventListener('click', () => setSite('Canby', true));

    document.querySelectorAll('.chip[data-open]').forEach(ch => {
      ch.addEventListener('click', (e) => { e.stopPropagation(); openTool(ch.dataset.open); });
      ch.addEventListener('keydown', (e) => { if (e.key==='Enter'||e.key===' '){ e.preventDefault(); openTool(ch.dataset.open);} });
    });

    document.querySelectorAll('.tile').forEach(tile => {
      tile.addEventListener('click', () => openTool(tile.dataset.tool));
      tile.addEventListener('keydown', e=>{ if(e.key==='Enter'||e.key===' '){e.preventDefault();openTool(tile.dataset.tool);} });
    });

    (function init(){
      setSite(ACTIVE_SITE, false);
      openTool('planner');
    })();
  </script>
</body>
</html>
