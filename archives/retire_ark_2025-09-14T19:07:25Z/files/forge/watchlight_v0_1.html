<!doctype html><html lang="en"><meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Watchlight v0.1</title>
<style>
  :root{--bg:#0b0f12;--fg:#dfe7ef;--mut:#8aa0b2;--ok:#1db954;--bad:#ff3b3b;--card:#121820;--chip:#1e2630}
  body{margin:0;background:var(--bg);color:var(--fg);font:16px/1.4 system-ui,Segoe UI,Roboto,Ubuntu}
  .wrap{max-width:960px;margin:40px auto;padding:24px}
  .card{background:var(--card);border-radius:16px;padding:20px;box-shadow:0 6px 24px rgba(0,0,0,.35)}
  .row{display:flex;gap:16px;flex-wrap:wrap}
  .pill{display:inline-block;background:var(--chip);padding:6px 10px;border-radius:14px;color:var(--mut);font-size:12px}
  .big{font-size:48px;margin:8px 0 0 0}
  a{color:#8ecbff;text-decoration:none} a:hover{text-decoration:underline}
  .ok{color:var(--ok)} .bad{color:var(--bad)}
  table{width:100%;border-collapse:collapse;margin-top:12px}
  td{padding:8px 6px;border-bottom:1px solid #26303a;color:#c7d3df}
  td.k{color:var(--mut);width:180px}
</style>
<div class="wrap">
  <div class="card">
    <div class="row" style="justify-content:space-between;align-items:center">
      <div><div class="pill">Watch Checkpoint</div><h1 style="margin:6px 0 0">Static Rooster — Watchlight</h1></div>
      <div id="verdictBig" class="big">…</div>
    </div>
    <div id="sum"></div>
  </div>
</div>
<script>
(async () => {
  const path = '/receipts/sr_watch_checkpoint_v0_1.json';
  const elV = document.getElementById('verdictBig');
  const elS = document.getElementById('sum');
  try{
    const j = await (await fetch(path, {cache:'no-store'})).json();
    const s = j.summary || {};
    const art = j.artifacts || {};
    const ok = (s.canon_parity === 'OK') && (Number(s.filename_offenders||0)===0) && (s.verdict==='foedus intactum');
    elV.textContent = s.verdict || 'unknown';
    elV.className = 'big ' + (ok ? 'ok' : 'bad');

    const snap = (s.snapshot_dir||'').replace(/^\.?\/?/,'');
    const rows = [
      ['Generated at', j.generated_at||'—'],
      ['Parity', s.canon_parity||'—'],
      ['Filename offenders', String(s.filename_offenders ?? '—')],
      ['Snapshot dir', snap ? `<a href="/${snap}/">${snap}</a>` : '—'],
      ['Manifest', art.manifest ? `<a href="/${snap}/${art.manifest}">${art.manifest}</a>` : '—'],
      ['Offenders JSON', art.offenders ? `<a href="/${snap}/${art.offenders}">${art.offenders}</a>` : '—'],
      ['Canon parity JSON', art.canon_parity ? `<a href="/${snap}/${art.canon_parity}">${art.canon_parity}</a>` : '—']
    ];
    elS.innerHTML = `<table>${
      rows.map(([k,v])=>`<tr><td class="k">${k}</td><td>${v}</td></tr>`).join('')
    }</table>`;
  }catch(e){
    elV.textContent='unreadable'; elV.className='big bad';
    elS.textContent = 'Could not read ' + path + ' — run a Tick–Tock.';
  }
})();
</script>
