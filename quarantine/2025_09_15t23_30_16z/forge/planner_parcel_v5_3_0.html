<!doctype html><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Parcel Map Planner</title>
<style>:root{--bg:#0b0c06;--grid:#1a2b1a;--text:#b4ffb4;--glow:#39ff14}
html,body{margin:0;background:var(--bg);color:var(--text);font-family:ui-monospace,Consolas,monospace}
.header{display:flex;justify-content:space-between;align-items:center;padding:10px;border-bottom:1px solid var(--grid)}
.badge{border:1px solid var(--grid);padding:2px 8px;border-radius:999px}
.main{padding:12px}
.tile{border:1px solid var(--grid);border-radius:12px;padding:10px;margin:10px 0;background:#0f140f}
.btn{border:1px solid var(--grid);padding:8px 10px;border-radius:10px;background:#101a10;color:var(--text);cursor:pointer}
pre{white-space:pre-wrap}
</style>
<div class="header"><div>Parcel Map Planner</div><div class="badge">v5.3.0</div></div>
<div class="main">
  <div class="tile">
    <h3 style="margin:0">QuickCheck</h3>
    <button id="qc" class="btn">Run QuickCheck</button>
    <pre id="log">readyâ€¦</pre>
  </div>
  <div class="tile">
    <h3 style="margin:0">Actions</h3>
    <button id="action" class="btn">Do Action</button>
  </div>
</div>
<script>
(function(){
  function emit(type,payload){ parent && parent.postMessage({type:type,toolKey:"planner_parcel",payload:payload||{},version:"5.3.0"},"*"); }
  // ready
  setTimeout(()=>emit("ready",{ok:true,version:"5.3.0"}), 100);
  // wire actions
  document.getElementById('qc').onclick = function(){
    const secure = window.isSecureContext===true;
    const httpok = /^(http|https)$/.test(location.protocol.replace(':',''));
    const rpt = {schema:"eh1003006.dh.health.v1", generatedAt:new Date().toISOString(),
                 status:(secure&&httpok)?"ok":"warn",
                 checks:[{name:"secure-context",ok:secure},{name:"http(s)",ok:httpok}]};
    document.getElementById('log').textContent = JSON.stringify(rpt,null,2);
    emit("status",{ok:true,notes:"qc"});
  };
  document.getElementById('action').onclick = function(){
    emit("capture",{ok:true,what:"action"});
  };
  window.addEventListener('error', e=>emit("error",{message:String(e&&e.message||'error')}));
})();
</script>
